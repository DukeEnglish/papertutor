Value-based Resource Matching with Fairness Criteria:
Application to Agricultural Water Trading
AbhijinAdigaâˆ— YohaiTrabelsiâˆ— TanvirFerdousi
UniversityofVirginia Bar-IlanUniversity UniversityofVirginia
Charlottesville,VA,USA RamatGan,Israel Charlottesville,VA,USA
MadhavMarathe S.S.Ravi SamarthSwarup
UniversityofVirginia UniversityofVirginia UniversityofVirginia
Charlottesville,VA,USA Charlottesville,VA,USA Charlottesville,VA,USA
AnilKumarVullikanti MandyL.Wilson SaritKraus
UniversityofVirginia UniversityofVirginia Bar-IlanUniversity
Charlottesville,VA,USA Charlottesville,VA,USA RamatGan,Israel
ReetwikaBasu SupriyaSavalkar MatthewYourek
WashingtonStateUniversity WashingtonStateUniversity WashingtonStateUniversity
Pullman,WA,USA Pullman,WA,USA Pullman,WA,USA
MichaelBrady KirtiRajagopalan JonathanYoder
WashingtonStateUniversity WashingtonStateUniversity WashingtonStateUniversity
Pullman,WA,USA Pullman,WA,USA Pullman,WA,USA
ABSTRACT KEYWORDS
Optimalallocationofagriculturalwaterintheeventofdroughts Watermarkets,bipartitematching,welfaremaximization,fairness,
isanimportantglobalproblem.Inaddressingthisproblem,many integerlinearprogram,complexity
aspects,includingthewelfareoffarmers,theeconomy,andthe
environment,mustbeconsidered.Underthisbackdrop,ourworkfo- ACMReferenceFormat:
cusesonseveralresource-matchingproblemsaccountingforagents AbhijinAdiga,YohaiTrabelsi,TanvirFerdousi,MadhavMarathe,S.S.Ravi,
withmulti-cropportfolios,geographicconstraints,andfairness. SamarthSwarup,AnilKumarVullikanti,MandyL.Wilson,SaritKraus,
ReetwikaBasu,SupriyaSavalkar,MatthewYourek,MichaelBrady,Kirti
First,weaddressamatchingproblemwherethegoalistomaximize
Rajagopalan,andJonathanYoder.2024.Value-basedResourceMatching
awelfarefunctionintwo-sidedmarketswherebuyersâ€™require-
withFairnessCriteria:ApplicationtoAgriculturalWaterTrading.InFull
mentsandsellersâ€™suppliesarerepresentedbyvaluefunctionsthat
versionofthepaperappearinginProc.ofthe23rdInternationalConferenceon
assignprices(orcosts)tospecifiedvolumesofwater.Forthesetting AutonomousAgentsandMultiagentSystems(AAMAS2024),Auckland,New
wherethevaluefunctionssatisfycertainmonotonicityproperties, Zealand,May6â€“10,2024,IFAAMAS,17pages.
wepresentanefficientalgorithmthatmaximizesasocialwelfare
function.Whenthereareminimumwaterrequirementconstraints,
wepresentarandomizedalgorithmwhichensuresthatthecon- 1 INTRODUCTION
straintsaresatisfiedinexpectation.Forasinglesellerâ€“multiple
1.1 Background
buyerssettingwithfairnessconstraints,wedesignanefficiental-
gorithmthatmaximizestheminimumlevelofsatisfactionofany Thegrowthintheglobalpopulationhasledtoasignificantin-
buyer.Wealsopresentcomputationalcomplexityresultsthathigh- creaseindemandforagriculturalandurbanwatersupplies[17].
lightthelimitsonthegeneralizabilityofourresults.Weevaluate However,watersupplyaugmentationhasreacheditslimit[9].Fur-
thealgorithmsdevelopedinourworkwithexperimentsonboth thermore,climatechangehasledtoanincreasedoccurrenceof
real-worldandsyntheticdatasetswithrespecttodroughtseverity, droughts,which,inturn,leadtoseverewatershortages[23].Water
valuefunctions,andseniorityofagents. marketshavebeenwidelyproposedasaneffectivemeansofwater
reallocationduringsuchshortages[9],andseveralformalandinfor-
malmarketshaveemergedacrosstheworld[21,22,50].Awidely
âˆ—Bothauthorscontributedequallytothiswork. proposed(butmuchdebated)approachissociallyoptimalwater
allocation,wherewateristransferredfromlow-valuetohigh-value
agriculturalapplications[9,21,51].Muchoftheworkinthisregard
FullversionofthepaperappearinginProc.ofthe23rdInternationalConferenceon
AutonomousAgentsandMultiagentSystems(AAMAS2024),N.Alechina,V.Dignum, hasfocusedonelaboratemodelingofagricultural,hydrological
M.Dastani,J.S.Sichman(eds.),May6â€“10,2024,Auckland,NewZealand.Â©2024Interna- andeconomicaspectsoftheproblemasexploredthroughcomplex
tionalFoundationforAutonomousAgentsandMultiagentSystems(www.ifaamas.org).
agent-basedmodels(see,e.g.,[3,38,39,42]).Somereferenceshave
ThisworkislicencedundertheCreativeCommonsAttribution4.0International(CC-
BY4.0)licence. addressedcomputationalaspectsofsuchmodels(see,e.g.,[28,29]).
4202
beF
21
]SD.sc[
2v67560.2042:viXraWhileourworkisapplicabletomanywatermarketsettings,itis allthelowerboundconstraintsisitselfNP-complete.Whenasolu-
motivatedbytheriverwaterallocationmechanismsforagriculture tionsatisfyingalltheconstraintsisknowntoexistandthevalue
inthewesternUS[4,5,26].Here,waterisallocatedaccordingtothe functionssatisfymonotonicityproperties,wepresentanefficient
priorappropriationdoctrine,whichinducesaseniorityordering randomizedalgorithmtofindasolutionthatmaximizeswelfare
amongfarmers[9,37].Whenwateriscurtailedduetoshortages,it andsatisfiesthegivenlowerboundconstraintsinexpectation.To
ismadeavailabletoonlythosewaterrightsholderswhoareabove obtainthisresult,weusethedependentroundingalgorithmof[19]
asenioritythresholdchosenbyappropriateauthoritiesbasedon andleveragemonotonicitypropertiesofvaluefunctions.
thedroughtseverity.Thisnaturallypartitionsthesetoffarmers
MaximizingLeximinsatisfaction.Weconsiderthespecialcase
into two groups: potential sellers and potential buyers, leading
ofasinglesellerâ€“multiplebuyerswhereeachbuyerspecifiesthe
to a two-sided market. An example is provided in Figure 1. In
requirednumberofwaterunits.Thesatisfactionlevelofabuyer
addition,therearescenariosinvolvingexternalentities,suchas
isthefractionofherrequirementthatisallocated.Weconsider
wateraggregatorsorbrokers,whopoolwaterfrommultiplesellers
theproblemwheretheobjectiveistofindatradingassignment
(see,e.g.,[26,32,41])andsellittobuyers.
Underthisbackdrop,wefocusonaclassofvalue-basedresource thatmaximizesthesatisfactionleveloftheleastsatisfiedbuyer.We
provideanefficientalgorithmthatfindsavalidtradingassignment
matchingproblems.Weconsiderasetofagents(farmers),each
satisfyingthefollowingdesirableproperties:(i)itmaximizesthe
associatedwithadiscreteorderedsetofresources(unitvolumesof
water,orsimplywaterunits).Eachwaterunitisassociatedwitha numberofresourcesmatchedoverallvalidassignments(thusmax-
value,whichdependsonwhatusethatunitofwaterisbeingputto imizingsellerprofit),and(ii)inleximinorder[33],thevectorof
buyersatisfactionlevelsisatleastaslargeasthatofanyothervalid
(low-valueorhigh-valuecrops).Sincefarmerscanhavemulti-crop
assignment.Theuseofleximinorderasafairnesscriterionhasalso
portfolios,thevalueofwaterunitsmayvary,notonlyfromone
beenstudiedinseveralothercontexts(see,e.g.,[8,34]).
agenttoanother,butalsowithinanagentâ€™sresourceset.Broadly,
ourworkisapplicabletomanymarketsettingsthatinvolvemultiple Experiments.Wepresentresultsfromexperimentswithaclass
identicalunitsofresources,suchasfinancialmarkets,electricity,
ofsyntheticdatasetsandtworeal-worlddatasets.Thelattercor-
CPUjobscheduling,andbandwidthallocation[12,24,40].
respondtotwowaterbasinsinthestateofWashington,US.We
In a two-sided market where the agents are partitioned into
studytheimpactoffactors,suchasdroughtseverity,valuefunc-
sellersandbuyersbyseniority,asellerâ€™svalueforawaterunitcan
tions,andfarmerseniority,onthecompatibilitygraphstructure
beconsideredtheminimumpricetheselleriswillingtoaccept,
andobjectivesoftradingassignments(e.g.,welfaremaximization,
while,forabuyer,itisthemaximumpricethebuyeriswilling
maximizingsatisfactionlevelsofbuyers).Ourresultsshowthat
topay.Additionally,duetogeographicandlegalconstraints,not
thecombinedeffectsofseniority,cropprofile,andgeographiccon-
every buyer is compatible with a seller for trading water. This
straintscanleadtovariedtradeoutcomesacrossdifferentdatasets.
relationshipisrepresentedbyabuyerâ€“sellerbipartitecompatibility
graph;seeFigure1foranexampleofstreamflowandtheresulting
2 RELATEDWORK
compatibilitygraph.Theobjectiveistoobtainatradingassignment,
thatis,amatchingofsellersâ€™resourceswithbuyersâ€™needs,subject Manyworkshaveproposedmechanismsforoptimalmatchingof
tocompatibilityandvalueconstraints.Wewillassumethatthe buyerstosellersinthecontextofwatermarkets.Xuetal.[51]con-
agentsaretruthfulabouttheirvaluations.Everytradingassignment sideratwo-sidedmarketwithsimplerlinearvaluefunctionswhere
isassessedbythetotalsocialwelfareitgenerates[29,51]. theyfirstapplyweightedbipartitematchingtoachievewelfare
maximization.Then,theysettransactionpricesforeachassign-
1.2 Contributions mentinthematching.Inasingle-seller/multiple-buyersframework,
RaffenspergerandMilke[38,39]useamultipartbiddingframework
Maximizingwelfareundermonotonicityconstraints.Wecon-
whereabuyerâ€™swillingnesstopayismodeledasamonotonenon-
sidertheresourcematchingproblem(MaxWelfare),wherethe
increasingfunctionofthevolumeofwatertraded.Theydevelop
goalistomaximizethetotalwelfare.Weshowthatifthevaluefunc-
alinearprogrammingformulationthatmaximizestheconsumer
tionssatisfycertainmonotonicityproperties(undertheassumption
surplus.Usingasimilarframeworkbutaccountingforwaterqual-
thateveryagentisrationalorprofit-maximizing[6,11,38]),anop-
ity,SharghiandKerachian[42]proposeamulti-agentoptimization
timalmatchingcanbeobtainedinpolynomialtime.Weachievethis
model.Noorietal.[35]incorporatefairnesscriteriaintotheirmod-
bytransformingthetradingassignmentproblemintothemaximum
elsbyrequiringthateachbuyershouldreceiveacertainminimum
weightedmatchingproblemonabipartitegraph.Tocomplement
amountofwaterdependingonthebuyerâ€™sdemand.Theabove
theaboveresult,weshowthatMaxWelfareisNP-hardevenwhen
paperstypicallyalsoaccountforavarietyofagriculturalandsocio-
themonotonicityconstraintsareviolatedonlyonthebuyerâ€™sside.
economicfactors,resultinginverycomplexoptimizationproblems
Maximizingwelfareunderfairnessconstraints.Weconsider thataresolvedusingheuristics.Asmentionedearlier,ourwork
theproblem(MaxWelfareFair)ofmaximizingwelfarewiththe isapplicabletosettingsthatinvolveindistinguishableunitsofa
additionalconstraintthat,forspecifiedsubsetsofbuyers(where resource.Insuchasetting,SandholmandSuri[40]considerthe
thesubsetsmayalsobesingletons),aminimumnumberofwater problemofoptimalclearingwheresellersandbuyersspecifybids
unitsmustbeassigned.Suchconstraintscanbeviewedasaformof throughsupplyanddemandcurves.
enforcingdemographicfairness.Ingeneral,weshowthattheprob- Toourknowledge,veryfewpapershaveaddressedcomputa-
lemofdeterminingwhetherthereisanassignmentthatsatisfies tionalaspectsofwatermarkets.Liuetal.[29]considertheproblem2 3 1 1 4 1 (15) (27) 4
6 4 2(19) (25) 4
2 3 2 5
1 Drought
cutoff 3 (21) (23) 5
6 4
3 6
5
Sellers Buyers 3(23) (29) 6
Stream flow and 5 Sellersâ€™ Buyersâ€™
points of diversion Induced partial order Induced compatibility graph water units water units
Figure1:Example.Goingfromlefttoright,thefirstpanelshowsasamplestreamflowandpointsofdiversionfordifferenttradingagents.
Inthesecondpanel,eachdirectededge(ğ‘,ğ‘)indicatesthatğ‘ >ğ‘,thatis,ğ‘hashigherprioritythanğ‘.Whenthereisnodirectededge
betweentwonodes,theinterpretationisthattheybelongtodifferentstreams.Thedroughtcutoffcorrespondstothescenariowherewater
isavailabletoagents1,2,and3.Inthecompatibilitygraphshowninthethirdpanel,waterunitsandtheirvalueshavenotyetbeenfactored
in.Therightmostpanelshowsthecorrespondingresourcesâ€“needsbipartitegraphalongwiththewaterunitsofthebuyersandsellersand
thecorrespondingcompatibilitygraph.Here,Seller3has,andBuyer4needs,twowaterunits,whiletheothershaveorneedonlyonewater
uniteach.Thevaluesofthewaterunitsareshowninparentheses.
ofoptimaltradingassignmentsinwaterrightmarkets.Theycon- (e.g.,croptype,whichfielditisappliedtoinafarm),anditsvalue
sidertwomaximizationobjectivesâ€“socialwelfareandflowâ€“witha cancorrespondtotheanticipatedprofit,itsimportancetokeepthe
minimumthresholdconstraintonthevolumeofwatertradedin cropaliveorhealthy,etc.(see,e.g.,[38]).TheexampleinFigure1
eachtransaction.Theyconsiderasettingwithlinearvaluefunc- showsagentswithassociatedresourcesandvaluefunctions.
tions,wheretheproblemofmaximizingwelfarecanbeviewed Buyers,sellers,andtrading.Dependingonwateravailability,
asmaximizingflowsinaweightedsellerâ€“buyerbipartitegraph. theagentsetğ´ispartitionedintotwosets,namelysellersğ‘† and
Lietal.[28]considerthesamesettingandexaminetheassignment buyers ğµ. We let ğ‘ ğ‘† = |ğ‘†| and ğ‘ ğµ = |ğµ|. Each sellerğ‘  hasğ›¾ ğ‘ 
problemfromtheperspectiveofcooperativegametheory.Both waterunits,whichistheagentâ€™scapacity,whileeachbuyerğ‘hasa
workspresentexperimentalresultsusingwatermarketdata. requirementofğ›¾ ğ‘waterunits.AtradingassignmentT consistsofa
Ourworkisalsorelatedtoresourceallocationproblemsthatare matchingofbuyerwaterunitswithsellerwaterunits;itisspecified
modeledasmulti-roundmatchings[45]andrepeatedmatchings[7]. byasetoforderedpairsoftheform(ğ‘¤ ğ‘–ğ‘ ,ğ‘¤ğ‘ ğ‘—).
Inbothcases,theproblemcanbeviewedasamatching(orağ‘-
Compatibility.Asellerğ‘ iscompatiblewithabuyerğ‘ifğ‘isallowed
matching)problem[30]onabipartitegraph,withmultiplecopies
tousethewaterrightownedbyğ‘ .Thiscompatibilityrelationship
ofnodescorrespondingtoeachresourceoragent.Thisissimilar
isdeterminedbygeographicfactorssuchaswhethertheyshare
toourwork,wherethewaterunitscorrespondingtoeachselleror
acommonstreamandprevailingwaterlaws.Thisrelationshipis
buyerarerepresentedasnodesofabipartitegraph.
representedbyasellerâ€“buyer(undirected)bipartitecompatibility
Severalrecentpapershaveaddressedfairnessissuesinbipartite
graphğº(ğ‘†,ğµ,ğ¸);asellerğ‘  âˆˆğ‘†iscompatiblewithabuyerğ‘ âˆˆğµif
matching.Forexample,Lesmanaetal.[27]developanalgorithm
andonlyifthereisanedgebetweenğ‘ andğ‘inğº.Theexamplein
withprovableguaranteesforthetrade-offbetweenoperatorbenefit
Figure1(thirdpanel)showsacompatibilitygraphinducedbythe
(inourcase,asingleseller)andtheminimumsatisfactionorutility
geographicpositionsofagentsandwateravailability.
forthecustomer(inourcase,abuyer).Esmaeilietal.[16]consider
Totalvalueandwelfarefromtrade.Weassumethateverywater
Rawlsianfairnessinonlinebipartitematchings.Methodstoachieve
unit will be used regardless of whether it is traded or not. If a
groupfairnesshavealsobeenconsideredinbothofflineandonline
waterunitistraded,thenitisusedbythecorrespondingbuyer;
versionsofthebipartitematchingproblem[16,31,36].
otherwise,itisusedbytheseller.Thevalueextractedfromeach
3 PRELIMINARIES waterunitwilldependonwhousesit(thesellerorbuyer)and
L ree at l[ nğ‘˜ u] mde bn eo rt se .theset{1,2,...,ğ‘˜}andR â‰¥0bethesetofnonnegative
h buo yw eri â€™t si us nu itse ğ‘¤d
ğ‘
ğ‘—. ,F to hr enex ita sm np ewle, vi af lua es ie sll ğ‘“e ğ‘r (â€™ ğ‘¤s
ğ‘
ğ‘—u )n .i Tt hğ‘¤ eğ‘–ğ‘  tois tam lva at lc uh ee bd et foo ra
e
A deg ne on tt es t, hr ees so eu tr oc fe ğ‘s, aa gn ed nv tsa .l Tu he efu agn ec nt ti son ars e.L oe rt dğ´ ere= d{ bğ‘ y1, sğ‘ e2 n, i. o. r. it, yğ‘ ;ğ‘ ğ‘}
ğ‘–
t lera td ğ‘Še Tis dğœ e0 no= te(cid:205) thğ‘ âˆˆ eğ‘† se(cid:205) tğ‘¤ oâˆˆ fÎ“ mğ‘  ağ‘“ ğ‘  tc(ğ‘¤ he) d.G rei sv oe un ra cet sra od fi sn eg llea rs ssi ag nn dm le en tt ğ‘ŠT T,
denotethesetofunmatchedresourcesofsellers.Thetotalvaluefor
Ti os r hds ee en ere li eo d mr st eeo ntğ‘ tÎ“ sğ‘ğ‘— of =o fr Î“{ ğ‘a ğ‘¤n a1ğ‘y r, eğ‘¤ğ‘– o> 2ğ‘ r, dÂ·ğ‘— e. Â· rE Â· ea , dğ‘¤c sh ğ›¾ğ‘ oğ‘a t}g he o an f tt ğ›¾ fğ‘ oğ‘ râˆˆ r aeğ´ ls lo ğ‘¥i us r <a cs e ğ‘¦s so ,o wc ria awt te ead rte uw r ni u it th n ğ‘¤ia t ğ‘¥n ğ‘s. wa eg li fv ae rn e(t Tra )d =in (cid:205)ga (ğ‘¤ss ğ‘–ğ‘ i ,g ğ‘¤n ğ‘ ğ‘—m )âˆˆe Tn [t ğ‘“ ğ‘T (ğ‘¤is ğ‘ ğ‘—ğœ )âˆ’(T ğ‘“ ğ‘ ) (ğ‘¤= ğ‘–ğ‘ ğœ )]0 .+ Now teel tf ha are t( thT e) ww eh lfe ar re e
mustbesoldorboughtbeforethewaterunitğ‘¤ğ‘ ğ‘¦;weusethenotation functiondoesnotaccountforprofitsofindividualagents,whichis
ğ‘¤ ğ‘¥ğ‘ â‰ºğ‘¤ğ‘ ğ‘¦toindicatethisordering.Avaluefunctionğ‘“
ğ‘
:Î“
ğ‘
â†’R
â‰¥0
determinedbythetransactionpriceforeachtrade.
assignsanonnegativevalueğ‘“ ğ‘(ğ‘¤)toeachğ‘¤ âˆˆÎ“ ğ‘.Eachwaterunit Remark3.1. Here,weassumethatthevaluefunctionsarepublic.
ofanagentcanbeconsideredtobeassociatedwithaspecificuse Wealsoassumethatthevalueofeachwaterunitremainsthesameregardlessoftherole(buyerorseller)oftheagentassociatedwith buyerwaterunitğ‘¤ğ‘ ğ‘— ofagentğ‘ âˆˆ ğµ,wecreateanodeğ‘ ğ‘— inğºâ€².
it.Ingeneral,thisneednotbethecase.Forexample,ifanagent Letğµâ€² = {ğ‘ ğ‘— | âˆ€ğ‘ âˆˆ ğµ, ğ‘¤ğ‘ ğ‘— âˆˆ Î“ ğ‘}andğ‘†â€² = {ğ‘  ğ‘– | âˆ€ğ‘  âˆˆğ‘†, ğ‘¤ ğ‘–ğ‘  âˆˆ Î“ ğ‘ }.
riskslosingacropthatcorrespondstoamulti-yearinvestment,she Theedgesetğ¸â€²isdefinedasfollows:(ğ‘  ğ‘–,ğ‘ ğ‘—) âˆˆğ¸â€²ifandonlyif(i)ğ‘is
vm ai lg uh et ob fe thw eil cli rn og p.to Wp ea ay lsm ou ac sh sum mo er te hf ao tr et vh ee ryw aa gte er nt th pa an rtt ih ce ipa an ten su ia nl compatiblewithğ‘ inğº(i.e.,{ğ‘ ,ğ‘}âˆˆğ¸)and(ii)ğ‘“ ğ‘(ğ‘¤ğ‘ ğ‘—) â‰¥ ğ‘“ ğ‘ (ğ‘¤ ğ‘–ğ‘ ).The
themarketasasellerorabuyer.Thisalsoneednotbethecase
weightğ›¼ ğ‘’oneachedgeğ‘’ ={ğ‘  ğ‘–,ğ‘ ğ‘—}isgivenbyğ›¼
ğ‘’
=ğ‘“ ğ‘(ğ‘¤ğ‘ ğ‘—)âˆ’ğ‘“ ğ‘ (ğ‘¤ ğ‘–ğ‘ ).
inreal-life;forexample,somefarmersareknowntoexhibitnon- (SeetherightmostpanelinFigure1foranexample.)
pecuniarybehavior[3,10],thatis,theywouldreducetheirgains
byoptingtofarmratherthanselltheirwater. Algorithm1:MaxWelfarewithmonotonevaluefunc-
tions.
4 MAXIMIZINGWELFARE
Input :Buyersetğµ,sellersetğ‘†,compatibility
4.1 ProblemDefinition graphğº(ğ‘†,ğµ,ğ¸),valuefunctionsğ‘“ ğ‘(Â·),âˆ€ğ‘âˆˆğ‘†âŠğµ
Wenowdefineawelfaremaximizingresourcematchingproblem thatsatisfytheconditionsofTheorem4.1.
wherethegoalistomatchsellersâ€™resourcestobuyersâ€™needssuch 1 Constructresourcesâ€“needscompatibility
that,foreachagent,thematchingrespectsthevalue-basedordering
graphğºâ€²(ğµâ€²,ğ‘†â€²,ğ¸â€²).
oftheresources,i.e.,ifaresourceismatchedinasolution,thenall 2
FindamaximumweightedmatchingMofğºâ€².
unitsvaluedhigherthanthisresourceintheagentâ€™sportfolioare 3 LettradingassignmentT =âˆ….
alsomatched.Also,foreverymatchedresource,thevalueassigned 4 for(ğ‘  ğ‘–,ğ‘ ğ‘—) âˆˆMdo
toitbythesellerisatmostthevalueassignedbythebuyer. 5 Add(ğ‘¤ ğ‘–ğ‘ ,ğ‘¤ğ‘ ğ‘—)toT.
Problem1(MaximumWelfareWaterTradingproblemâ€“MaxWel- 6 whileâˆƒğ‘âˆˆğµâŠğ‘†andâˆƒğ‘– >1s.t.ğ‘¤ ğ‘–ğ‘ismatchedinT but
vfa alr ue e). fuG ni cv te ion ns se ,t as no dfs ae cll oe mrs pğ‘† a, tb ibu iy lie tyrs gğµ r, at ph hei ğºrw (ğ‘†a ,t ğµe ,r ğ¸u )n ,i fits n, das as to rc ai da it ned
g 7
ğ‘¤ ğ‘–ğ‘
âˆ’ R1
epis lan co et ğ‘¤d ğ‘–ğ‘o
withğ‘¤ ğ‘–ğ‘ âˆ’1inT.
assignmentTâˆ—thatmaximizesthewelfarefunctionwelfare(Â·)sub- Output:TradingassignmentT
jecttothefollowingconstraints:(i)Buyervaluestheunitatleastas
muchastheseller:foreverymatchedpair(ğ‘¤ ğ‘–ğ‘ ,ğ‘¤ğ‘ ğ‘—)whereğ‘¤ ğ‘–ğ‘  isthe
ğ‘–thunitofsellerğ‘ andğ‘¤ğ‘
ğ‘—
istheğ‘—thunitofbuyerğ‘,ğ‘“ ğ‘(ğ‘¤ğ‘ ğ‘—) â‰¥ ğ‘“ ğ‘ (ğ‘¤ ğ‘–ğ‘ ), ProofofTheorem4.1. ForamatchingMinğºâ€²,letweight(M)
denotethesumoftheweightsofalltheedgesinM.Notethatany
and(ii)Matchingisconsistentwithorderingofresources:forany
agentğ‘âˆˆğ‘†âˆªğµandğ‘– >1,ğ‘¤ ğ‘–ğ‘ ismatchedonlyifğ‘¤ ğ‘–ğ‘ âˆ’1ismatched. t (r ğ‘ a ğ‘–,d ğ‘in ğ‘—)g âˆˆass Mign im fe an nt dT onc lyor ir fes (p ğ‘¤o ğ‘–ğ‘ n ,ğ‘¤ds ğ‘ ğ‘—t )o âˆˆa u Tn .iq Au le som
,
wat ec ih gi hn tg (Min )ğº =â€²:
Henceforth,werefertoatradingassignmentthatsatisfiesthetwo (cid:205) ğ‘’âˆˆMğ›¼ ğ‘’ = (cid:205) ğ‘’={ğ‘ ğ‘–,ğ‘ğ‘—}[ğ‘“ ğ‘(ğ‘–) âˆ’ ğ‘“ ğ‘ (ğ‘—)] = welfare(T).Hence,the
conditionsaboveasavalidtradingassignment. maximumwelfarethatcanbeachievedfromanyT isatmostthe
weightofanymaximumweightedmatchingofğºâ€².
4.2 MonotoneValueFunctions
WenowshowthattheoutputofAlgorithm1satisfiesthepriority
Here,weshowthat,withcertainmonotonicityconstraintsonvalue constraintsdefinedinProblem1.SinceMisamaximumweighted
functions,theMaxWelfareproblemcanbesolvedefficiently.The matching,T correspondstoanassignmentwithmaximumwel-
conditionsareasfollows.Foreachsellerğ‘ ,thevaluefunctionis fare.However,itmightnotsatisfythepriorityconstraintsstated
(m f io .eo r .n ,eo ğ‘“a ğ‘t co (h ğ‘¤ne b ğ‘–ğ‘ un )yo â‰¤en r- ğ‘“d ğ‘ ğ‘e , (c ğ‘¤tr h ğ‘–e ğ‘ e âˆ’a 1s vi )an flg u ore(i. afe u l. l, n ğ‘–ğ‘“ cğ‘  >t( iğ‘¤ o 1nğ‘–ğ‘  ).) i Tsâ‰¥ hm eğ‘“ sğ‘  o e( nğ‘¤ co oğ‘–ğ‘  tâˆ’ o rr1 n e) e sf po n or o na n dl -l i tğ‘– n oc> rr ae1 ta) iosa i nn n ad g l, i âˆƒ in sğ‘ nP âˆˆ or to .ğµb Wle âŠm itğ‘† h,1 os. uuS tcu h lp op sth so as ote f,T f go er nis s eo rn amo lit e tya ğ‘– ,v l> ea tl 1i ğ‘d ,ğ‘¤t âˆˆr ğ‘–ğ‘a ğµd isi .n Lmg ea ta ts c (s ğ‘¤hig e ğ‘–ğ‘ n d ,ğ‘¤m b
ğ‘
ğ‘—e u )n tt ğ‘¤ âˆˆ, ğ‘–i ğ‘. âˆ’ Te 1.,
.
orprofit-maximizingagents;asellerwouldsellthefirstassigned LetTâ€²=(T \{(ğ‘¤ ğ‘–ğ‘ ,ğ‘¤ğ‘ ğ‘—)})âˆª{(ğ‘¤ ğ‘–ğ‘ âˆ’1,ğ‘¤ğ‘ ğ‘—)}.Since(ğ‘¤ ğ‘–ğ‘ ,ğ‘¤ğ‘ ğ‘—) âˆˆ T,ğ‘
resourcethatwasmeantforthelowestvaluedusewhileabuyer iscompatiblewithğ‘ ,i.e., (ğ‘ ,ğ‘) âˆˆ ğ¸ and ğ‘“ ğ‘(ğ‘¤ğ‘ ğ‘—) â‰¥ ğ‘“ ğ‘ (ğ‘¤ ğ‘–ğ‘ ) byour
willusethefirstassignedresourceforthehighestvalueduse. construction of the bipartite graphğºâ€². Since ğ‘“ ğ‘ is a monotone
Theorem4.1. Supposewearegivenasetofsellersğ‘†,buyersğµ,their non-increasingfunction,ğ‘“ ğ‘(ğ‘¤ğ‘ ğ‘—âˆ’1) â‰¥ ğ‘“ ğ‘(ğ‘¤ğ‘ ğ‘—).Hence,Tâ€²isalsoa
respectivewaterunits,acompatibilitygraphğº(ğ‘†,ğµ,ğ¸),andvalue validassignment.Also,sinceğ‘“ ğ‘(ğ‘¤ğ‘ ğ‘—âˆ’1)âˆ’ğ‘“ ğ‘ (ğ‘¤ ğ‘–ğ‘ ) â‰¥ ğ‘“ ğ‘(ğ‘¤ğ‘ ğ‘—)âˆ’ğ‘“ ğ‘ (ğ‘¤ ğ‘–ğ‘ ),
functionssatisfyingthefollowingcriteria:âˆ€ğ‘  âˆˆğ‘†,ğ‘“ ğ‘  isamonotone welfare(Tâ€²) â‰¥welfare(T),whichimpliesthatthenewassignment
non-decreasingfunctionandâˆ€ğ‘ âˆˆğµ,ğ‘“ ğ‘isamonotonenon-increasing doesnotreducewelfare.(Infact,thewelfarecannotincreasesince
function.Inthissetting,MaxWelfarecanbesolvedintimepolyno- T has the maximum welfare value.) The same argument holds
mialinthetotalnumberofwaterunits. foreveryiterationintheloopdefinedonLine6inthealgorithm.
Notingthatthemaximumweightedbipartitematchingcanbecom-
WeshowthatAlgorithm1solvesMaxWelfareformonotonevalue
putedinpolynomialtime,thetheoremfollows.Fordetailsonthe
functions.Westartwiththefollowingdefinition. runningtime,seesupplement. â–¡
Resourcesâ€“needscompatibilitygraph.Giventhecompatibility
graphğº(ğ‘†,ğµ,ğ¸) andthevaluefunctions,weconstructanedge- Non-monotonevaluefunctions.Onemayaskwhetheraneffi-
weightedbipartitegraphğºâ€²(ğ‘†â€²,ğµâ€²,ğ¸â€²)asfollows.Foreachseller cientalgorithmispossibleunderweakerassumptionsonthevalue
waterunitğ‘¤ ğ‘–ğ‘  ofagentğ‘  âˆˆğ‘†,wecreateanodeğ‘  ğ‘– inğºâ€².Foreach functions.WenowconsideraversionoftheMaxWelfareproblemwherethevaluefunctionsforsellersaremonotonenon-decreasing, MaxWelfareFairalsoinvolvesmatching-relatedconstraints.For
whilethoseforthebuyersarenotrequiredtosatisfythemonotone thisproblem,wheneverasolutionwhichsatisfiesalltheconstraints
non-increasingproperty.Ournextresultpointsoutthecomplexity exists,weshowbelow(Theorem5.1)thatthereisapolynomialtime
oftheMaxWelfareproblemforthatsetting. randomizedalgorithmtomaximizethewelfare.
Theorem4.2. Givenasetofsellersğ‘†,buyersğµ,theirwaterunits, Theorem5.1. LetMdenotethesetofalltradingassignmentsT
compatibilitygraphğº(ğ‘†,ğµ,ğ¸),andvaluefunctionssatisfyingthe whichsatisfythelowerboundconstraintsassociatedwithallğ¿âˆˆL.
followingcondition:âˆ€ğ‘  âˆˆ ğ‘†,valuefunction ğ‘“ ğ‘  isamonotonenon- SupposeM â‰ âˆ….Ifğ‘“ ğ‘  andğ‘“ ğ‘ havethesamemonotonicityproperties
decreasingfunction,MaxWelfareisNP-hard. asinTheorem4.1,thereisapolynomialtimerandomizedalgorithm
tofindatradingassignmentT satisfyingthefollowingproperties:
ProofIdea:OurreductionisfromtheExactCoverby3-Sets
(1)(Singlebuyerconstraint)foreachğ¿ âˆˆ L suchthat|ğ¿| = 1,the
problem;seeSectionB.2ofthesupplement.
amountofwaterassignedisatleastğ‘Ÿ(ğ¿);(2)(Demographicconstraint)
Remark4.3. ByexaminingourproofofTheorem4.2,itcanbe foreachğ¿ âˆˆ L where|ğ¿| > 1,thelowerboundconstraintforğ¿is
seenthattheMaxWelfareproblemishardwhenvaluefunctions satisfiedinexpectation,and(3)theexpectedwelfareof T isatleast
(forboththesellersandbuyers)arethresholdfunctions(i.e.,they themaximumwelfareamongalltheassignmentsinM.
haveanon-zerovalueonlywhenthenumberofwaterunitssold
Proof. Letğºâ€²(ğ‘†â€²,ğµâ€²,ğ¸â€²)betheresources-needscompatibility
byasellerorassignedtoabuyerisatleastagivenpositiveinteger).
Thus,theproblemofmaximizingwelfareisNP-hardwhenagents
graph.Recallthatinğºâ€²,ğ‘ 
ğ‘–
representstheğ‘–thwaterunitofsellerğ‘ ,
andğ‘
ğ‘—
representstheğ‘—thwaterunitofbuyerğ‘.Foranodeğ‘£inğºâ€²,
havealowerboundonthenumberofwaterunitstheysell/buy
beforeatradeprovidesvaluetoanagent. letğ‘(ğ‘£) denotethesetofneighborsofğ‘£.Letğ›¼ ğ‘ ğ‘–ğ‘ğ‘— = ğ‘“ ğ‘(ğ‘¤ğ‘ ğ‘—) âˆ’
ğ‘“ ğ‘ (ğ‘¤ ğ‘–ğ‘ )betheweightontheedge(ğ‘  ğ‘–,ğ‘ ğ‘—) âˆˆğ¸â€².Weformulatethe
5 RESOURCEMATCHINGWITHFAIRNESS followinglinearprogram(LP)withavariableğ‘§ ğ‘ ğ‘–ğ‘ğ‘—foreachpossible
assignment(ğ‘  ğ‘–,ğ‘ ğ‘—)intheresourceâ€“needscompatibilitygraph.
Here,wepresenttworesultsincorporatingfairnesscriteriacorre-
âˆ‘ï¸
spondingtothebuyers.Thefirstresultisonmaximizingwelfare max ğ›¼ ğ‘ ğ‘–ğ‘ğ‘—ğ‘§ ğ‘ ğ‘–ğ‘ğ‘—
subjecttolowerboundsonthenumberofwaterunitsassignedto
groupsofbuyers.ThesecondproblemaddressesLeximinfairness, âˆ€(ğ‘  ğ‘–,ğ‘ ğ‘—) âˆˆğ¸â€², ğ‘§ ğ‘ ğ‘–ğ‘ğ‘— â‰¥0, (1)
whichisageneralizationofRawlsianfairness.
5.1 Buyersâ€™LowerBoundFairnessConstraints âˆ€ğ‘ ğ‘— âˆˆğµâ€², âˆ‘ï¸ ğ‘§ ğ‘ ğ‘–ğ‘ğ‘— â‰¤1; âˆ€ğ‘  ğ‘– âˆˆğ‘†â€², âˆ‘ï¸ ğ‘§ ğ‘ ğ‘–ğ‘ğ‘— â‰¤1, (2)
ğ‘ ğ‘–âˆˆğ‘(ğ‘ğ‘—) ğ‘ğ‘—âˆˆğ‘(ğ‘ ğ‘–)
Let L = {ğ¿ | ğ¿ âŠ† ğµ} beacollectionofsubsets1 ofbuyers.For
eachğ¿ âˆˆL,letğ‘Ÿ(ğ¿)beapositiveintegerdenotingtheminimum
âˆ€ğ¿âˆˆL,
âˆ‘ï¸âˆ‘ï¸
ğ‘§ ğ‘ ğ‘–ğ‘ğ‘— â‰¥ğ‘Ÿ(ğ¿). (3)
(total)numberofwaterunitstobeassignedtothebuyersinğ¿.Note
ğ‘âˆˆğ¿ğ‘ ,ğ‘–,ğ‘—
thatğ¿cancorrespondtoasinglebuyeraswell.
Theconstraintsin(2)correspondtomatchingconstraints,while
Problem2(MaximumWelfareWaterTradingwithbuyersâ€™lower thosein(3)capturethefairnessconditions.Becauseofourassump-
boundFairnessconstraints(MaxWelfareFair)). Givensetsof tionregardingfeasibility,thereisanoptimalfractionalsolutionğ‘§to
sellersğ‘†,buyersğµ,associatedvaluefunctions,collectionofsub- theaboveLP.Notethatthesolutionğ‘§willsatisfythepropertythat
setsL,functionğ‘Ÿ :Lâ†’Z >0,andacompatibilitygraphğº(ğ‘†,ğµ,ğ¸), ifğ‘§ ğ‘ğ‘–ğ‘ ğ‘— >0,itmustbethecasethat(cid:205) ğ‘ â€²ğ‘—â€²ğ‘§ ğ‘(ğ‘–âˆ’1)ğ‘ â€²ğ‘—â€² =1.Otherwise,
find a trading assignment Tâˆ— that maximizes the welfare func- wecanmodifythefractionalsolutioninthesamewayasinthe
tionwelfare(Â·)underthefollowingconstraints:(i)foreverymatched proofofTheorem4.1andachievethisproperty.
pair(ğ‘¤ ğ‘–ğ‘ ,ğ‘¤ğ‘ ğ‘—)whereğ‘¤ ğ‘–ğ‘  istheğ‘–thunitofsellerğ‘ andğ‘¤ğ‘
ğ‘—
istheğ‘—th Weusethedependentroundingalgorithmof[19],whichrounds
ğ¿u ann âˆˆdit Lğ‘–o > ,f tb 1 hu , eğ‘¤y ne ğ‘–ğ‘ ur miğ‘ s b, m eğ‘“ ğ‘ rat( ocğ‘¤ fhğ‘ ğ‘— we) d atoâ‰¥ en rlğ‘“ y uğ‘  ni( fğ‘¤ itğ‘¤ sğ‘–ğ‘  ğ‘–) ğ‘ aâˆ’,
s1
s(i ii i g) s nmf eo dar t tca ohn ğ¿ey d ia , sg a ane tn d lt e( aiğ‘ i si) tâˆˆ f ğ‘Ÿo (ğ‘† r ğ¿e )âˆª .acğµ h, ğ‘§e isğ‘a ğ‘–c ağ‘ h nğ‘—,ğ‘§ ia nğ‘ nğ‘– tğ‘  edğ‘— g(cid:205)t eo rğ‘– ,,a ğ‘  f,n oğ‘— rğ‘in ğ¿ğ‘t ğ‘–e ğ‘  =g ğ‘—e {âˆˆr ğ‘v }{ ,a âŒŠr i(cid:205) tia fğ‘–b o,ğ‘ l le , lğ‘— oğ‘ ğ‘§ wğ‘ğ‘ ğ‘– sğ‘– ğ‘ ğ‘  ğ‘— tğ‘— hâŒ‹s , au âŒˆ t(cid:205)c âŒŠh ğ‘– (cid:205),ğ‘ t , ğ‘–h ğ‘— ,ğ‘ a ğ‘§ ,t ğ‘—ğ‘ ğ‘§ğ‘–P ğ‘  ğ‘r ğ‘— ğ‘–[ âŒ‰ ğ‘ ğ‘ } ğ‘—âŒ‹ğ‘ .ğ‘– Sğ‘  â‰¥iğ‘— n ğ‘Ÿ= ce ({1 ğ‘Ÿ ğ‘] ( }Â·= ))
,
sothat(cid:205) ğ‘–,ğ‘ ,ğ‘—ğ‘ ğ‘ğ‘–ğ‘ ğ‘— â‰¥ğ‘Ÿ({ğ‘}).Additionally,E[(cid:205) ğ‘âˆˆğ¿(cid:205) ğ‘–,ğ‘ ,ğ‘—ğ‘§ ğ‘ğ‘–ğ‘ ğ‘—] â‰¥
Itiseasytoconstructinstanceswherethereisnosolutionthatsat- ğ‘Ÿ(ğ¿)foreach|ğ¿| > 1.Inasimilarmanner,theexpectedvalueof
isfiesallthelowerboundconstraints.Thisalsoimpliesthatbuyersâ€™ theobjectivefunctionisatleasttheobjectivevalueoftheLP. â–¡
lowerboundfairnessconstraintscanarbitrarilyaffectthewelfare
NotethatthesolutionT fromTheorem5.1neednotsatisfythe
objective.Whenthesubsetsforwhichlowerboundconstraints
lowerboundconstraintsforagivenğ¿ âˆˆLâ€“itisonlysatisfiedin
specifiedarepairwisedisjoint,thefeasibilityproblemsharessome
expectation,overtherandomchoicesmadebythealgorithm.It
similaritywiththeconstructionofcoalitionstooptimizecertain
actuallygivesa(fractional)solutionwhenevertheLPisfeasible,
functionsofagentsâ€™utilitiesinhedonicgames(seee.g.,[47,48])
whichmighthappenevenifM = âˆ….Wenotebelowthatifthe
andtheproblemofpartitioningthenodesetsofgraphssothat
MaxWelfareFairinstancehaslowerboundconstraintsonlyfor
thesubgraphinducedoneachblockofthepartitionhasaspeci-
individual buyers, they are satisfied exactly as the resulting LP
fiedminimumdegree(see,e.g.,[1,2,43]).Itshouldbenotedthat
representsaninstanceoftheğ‘-matching2problem.
1Ingeneral,|L|canbeexponentialin|ğµ|.Wewillassumethat|L|isboundedbya
polynomialin|ğµ|. 2SeeSectionAofthesupplementforadefinitionoftheğ‘-matchingproblem.Corollary5.2. LetMdenotethesetofalltradingassignmentsT roundsassignedtoğ‘¥ ğ‘– isâ„“.Theobjectiveistofindağ‘˜-roundmatch-
whichsatisfythelowerboundconstraintsassociatedwithallğ‘ âˆˆğµ. ingtomaximizethetotalbenefit.GivenaninstanceofMaxLeximin,
SupposeM â‰ âˆ….Ifğ‘“ ğ‘ andğ‘“ ğ‘havethesamemonotonicityproperties wecanconstructaninstanceofMaxTB-MRMasfollows.
asinTheorem4.1,itispossibletofindatradingassignmentT (1) Constructanewcompatibilitygraphğº ğ‘š(ğ‘‹,ğ‘Œ,ğ¸ ğ‘š)whereğ‘‹ =
in polynomial time, which ensures that: (1) for each buyerğ‘ âˆˆ {ğ‘£}isaspecialnodethatrepresentsaspecificresourceinevery
ğµ, the amount of water assigned is at leastğ‘Ÿ({ğ‘}), and (2) the round,ğ‘Œ =ğµ,thesetofbuyers,andğ¸ ğ‘š ={(ğ‘£,ğ‘) |ğ‘ âˆˆğµ}.(ğº ğ‘š
expectedwelfareof T isatleastthemaximumwelfareamongall isastargraphwithcenterğ‘£andnodesofğµasleaves.)
theassignmentsinM. (2) Thenumberofroundsğ‘˜ =|ğ‘Š|,oneforeachwaterunitinğ‘Š.
Complexity.Weshowthat,ingeneral,theproblemofdetermining (3) F spo or ne dac th ob thu oy se erğ‘ re, pğ¾ rğ‘ es= en{ tğ‘– in| g(ğ‘¤ coğ‘– m,ğ‘ p) aâˆˆ tibğ¸ lğ‘¤ e} re, si. oe u., rt ch ee s,r ao nu dnd ğœŒs ğ‘c =or ğ›¾r ğ‘e-
,
whetherthereisamatchingsolutionthatsatisfiesallthelower therequirementofğ‘.Theconstructionofthebenefitfunctionğœ‡
ğ‘
boundconstraintsisitselfanNP-completeproblem.Thisisshown
followstheconstructionusedinTheorem4.9in[45].
usingareductionfromtheMinimumVertexCoverproblem(see
Givenamulti-roundmatchingsolutionMtotheaboveinstanceof
PropositionC.1inSectionC.1ofthesupplement).
theMaxTB-MRMproblem,weconstructatradingassignmentT
5.2 LeximinFairness
asfollows:Eachmatchingedge(ğ‘£,ğ‘)correspondstosomeroundğ‘–.
Itismappedtotheassignment (ğ‘¤ ğ‘–,ğ‘) âˆˆ T.Theproofthatthe
We consider a simpler setting of a single seller with a set ofğ‘˜ solutionsatisfiesleximin-largestcriterionusesseveraladditional
resourcesorwaterunitsğ‘Š ={ğ‘¤ 1,ğ‘¤ 2,...,ğ‘¤ ğ‘˜}andmultiplebuyers
results;itispresentedinSectionC.2ofthesupplement.
withrequirements.Allwaterunitshavethesamevalue.Thesellerâ€™s
objective is to maximize the number of resources sold, subject Remark5.4. WenotethatinTrabelsietal.[45],itwasonlyshown
totheconstraintsrepresentedbyaresourceâ€“buyercompatibility thattheirsolutionfortherelevantbenefitfunctionsatisfiesthe
graphğº ğ‘¤(ğ‘Š,ğµ,ğ¸ ğ‘¤)andanadditionalfairnessconditiondiscussed Rawlsiansocialwelfare,i.e.,thesolutionmaximizesthesatisfaction
below.ForanyassignmentT andbuyerğ‘ âˆˆ ğµ,letğœ‚ ğ‘ denotethe oftheleastsatisfiedbuyer.Here,inthecontextoftradingassign-
totalnumberofwaterunitsassignedtoğ‘.Letğ›¾ ğ‘ bethenumberof ments,weshowthatthesameconstructionprovidesastronger
unitsrequiredbyğ‘.Letğœ“(T) = (ğœ‚ ğ‘/ğ›¾ ğ‘ |ğ‘ âˆˆğµ)denotethebuyer leximin-largestsolution.
satisfactionvectorcorrespondingtoT.Thefairnessconditionwe
6 EXPERIMENTS
imposeisbasedonleximinorderingofvectorsdefinedbelow.
LeximinOrdering:Supposewehavetworealsequences,ğœ‡ 1and Weexperimentedwithreal-worldandsyntheticdatasets3tostudy
ğœ‡ 2,eachoflengthğ‘˜.Wesaythatğœ‡ 1isleximinlargerthanğœ‡ 2ifthere resourcematchingundervariousscenariosdeterminedbydrought
existsaninteger0â‰¤â„“ <ğ‘˜suchthatthefirstâ„“smallestelements
severity,typesofvaluefunctions,andagentseniority.Allourexper-
ofbothvectorsareequal,whilethe(â„“+1)-smallestelementofğœ‡
1 imentalresultsrelyontheassumptionsmentionedinRemark3.1.
isgreaterthanthe(â„“+1)-smallestelementofğœ‡ 2.
Supposethesequencesğœ‡ 1andğœ‡ 2representthesatisfactionvec- 6.1 Datasets
t
l
seo inxr
i
cs
m
eo ,inf fob
l
rau sry oge mer rs
eth
ic nar te
n
ea gğœ‡t ee
2
rd
.F
â„“b
r
<oy
m
ğ‘˜tw
,a
to
hfa
ea irs (ns â„“ei +g ssn 1m
p
)tee hrn
s
lpt es
e ac
sT
t
t1
iv
saa
e
tn
, iT
sd
fi1
eT
is
d2
p
ba
r
un
e
yd
fe er
rğœ‡ a1
hb
ali es
s
S agy en nt th se ğ´tic =da {t ğ‘a ğ‘–se |t 1s. â‰¤We ğ‘–c â‰¤on ğ‘sid }e wra hesi rm ep ale buse yt eu rp cw anhe bre uyth fe rr oe mar ae nğ‘
y
alargersatisfactionlevelinğœ‡ 1comparedtothatinğœ‡ 2.(Foralllower selleraslongasthereisvaluecompatibility.Fromadomainper-
values,thesatisfactionratioofbuyersinğœ‡ 1isatleastaslargeas spective,thissetupmodelsthesituationwherethereisasingle
thatofğœ‡ 2.)Thismotivatesthefollowingproblem. stream,and,therefore,anagentcanpotentiallyaccessanyother
agentâ€™swater.Wewillassumethatallcapacitiesandrequirements
Problem3(MaxLeximin). Givenasellerwithasetğ‘Š ofğ‘˜water arethesame;thatis,forallagentsğ‘ âˆˆğ‘†âˆªğµ,ğ›¾
ğ‘
=ğ‘˜.Wateravail-
units,asetofbuyersğµwiththesamecostforeverywaterunit,and abilityğ›¿determinesthefractionofwaterthatisavailable.Ifğ›¿ =1
acompatibilitygraphğº ğ‘¤(ğ‘Š,ğµ,ğ¸ ğ‘¤),findatradingassignmentTâˆ— (similarly,ğ›¿ = 0), then all (none of the) ğ‘ğ‘˜ units of water are
withtheleximin-largestbuyersatisfactionvector. available,andtherefore,thereisnotrade.Everyagentğ‘ ğ‘– isasso-
Theorem5.3. AnoptimalsolutiontotheMaxLeximinproblem ciatedwithğ‘˜ unitsofwater.Givenğ›¿,agentğ‘ ğ‘– isasellerifand
canbeobtainedinpolynomialtime. onlyif ğ‘ğ‘– â‰¥ 1âˆ’ğ›¿ (largertheğ‘–,thehigherthepriority).Agents
arecategorizedintotwotypes:high-valuedandlow-valued.Fora
Proofoutline:First,weshowthataninstanceof MaxLeximin sellerğ‘ ,wewillconsiderasimplelinearvaluefunction:ğ‘“ ğ‘ (â„“)=ğ›½â„“
canbereducedtoaninstanceofthemulti-roundmatchingproblem forâ„“ =1,...,ğ‘˜;high-valuedagentshavealargerğ›½thanlow-valued
calledMaxTB-MRMfromTrabelsietal.[45].Inmulti-roundmatch- agents.Similarly,forabuyerğ‘,wewillconsiderthefollowinglinear
i nn eg e, dğ‘‹ tois ba es met ao tcf ha eg den tots ra en sd ouğ‘Œ rci es sa is net ğ‘˜o rf or ue ns do sur fc oe rs sw omhe ere poag sie tn ivt es f au gn enct tio
ğ‘
ğ‘–n: isğ‘“ ğ‘ h( igâ„“) h-= vağ›½ lu(ğ‘˜ edâˆ’ oâ„“ r+ lo1 w) -f vo ar luâ„“ e= d,1 w, e.. w., iğ‘˜ ll. dT eo fid ne ec aid pe row bh ae bt ih lie tyr
integerğ‘˜.Abipartitecompatibilitygraphğº ğ‘š(ğ‘‹,ğ‘Œ,ğ¸ ğ‘š)indicates functionasfollows:ğ‘ â„(ğ‘ ğ‘–)=ğœ† ğ‘ğ‘– +(1âˆ’ğœ†)(cid:0) 1âˆ’ ğ‘ğ‘– (cid:1) ,whereğœ†âˆˆ [0,1]
whichresourceiscompatiblewithwhichagentformatching.Each isatunableparameter.Thehighertheğœ†,thegreatertheprobability
agentğ‘¥ ğ‘– hasapermissiblesetofroundsğ¾ ğ‘– âŠ† [ğ‘˜]inwhichitcanbe thathighpriorityagentsarehigh-valued.Ifğœ†=0.5,thenallagents
matched,andğœŒ ğ‘– â‰¤ |ğ¾ ğ‘–|isthedesirednumberofroundsinwhichit
willbematched.Inaddition,ğœ‡ ğ‘– : [ğœŒ ğ‘–] â†’R >0isabenefitfunction 3ThedataandthecodeforrunningtheexperimentsareavailableinGithub[44].The
foragentğ‘¥ ğ‘–,whichgivesabenefitvalueğœ‡ ğ‘–(â„“)whenthenumberof
dataissummarizedinTable1inSectionDofthesupplement.(a) (b) (c) (d)
10 500 1.0
Î»,Î²h
0.6
8 400 0.8 (0.0,0.7)
(0.0,0.9) 6 300 0.6 0.4 (0.5,0.7)
4 200 0.4 (0.5,0.9)
0.2
(1.0,0.7)
2 100 0.2
(1.0,0.9)
0 0 0.0 0.0
0.0 0.5 1.0 0.00 0.25 0.50 0.75 1.00 0.00 0.25 0.50 0.75 1.00 0.00 0.25 0.50 0.75 1.00
Î´ Î´ Î´ Î´
Figure2:Panels(a)and(b)showstructuralpropertiesoftheresourcesâ€“needsgraphforthesyntheticdatasetswithrespecttoincreasing
wateravailability.InPanels(c)and(d),Y-axisgivesthetotalvalueğœ(Tâˆ—)andwelfare(Tâˆ—)correspondingtoanoptimalassignmentTâˆ—
respectively,normalizedbyğœ 0,thetotalvaluewhen100%ofwaterisavailable.Allresultsareforğ‘ = 10andthenumberofunitsper
agentğ‘˜ =5.Theresultsareshownfordifferentvaluesofğœ†andğ›½ â„.
havethesameprobabilityof0.5tobeassignedtothehigh-valued whodonothavewatercannotbuyfromtheformergroup.The
category.Inourexperiments,theğ›½valueforthehigh-valuedagent, correspondingsetofplotsforreal-worlddatasetsareinFigure3.
denotedbyğ›½ â„,isarealvaluebetween0.5and1,andforğ›½ â„“,theğ›½ Wenotethat,inthiscase,thenumberofsellersinPlot3(a)doesnot
forthelow-valuedagent,issetto1âˆ’ğ›½ â„. increaselinearlywithğ›¿,particularlyinthecaseoftheTouchetnet-
Real-worlddatasets.Weuseddatasetscontaining93usablewater works.Thecurveplateausataroundğ›¿ =0.2beforerisingatğ›¿ >0.5
rightsheldintheTouchetRiverWatershedand77usablewater inPlot3(a).Thereasonforthisistheexistenceofsenioragentsre-
rightsheldintheYakimaRiverWatershedinthestateofWashing- quiringverylargenumbersofwaterunits.Untilsufficientwateris
ton,alongwiththeirassociatedfarmattributes,includingacreage, available,theseagentswillbeclassifiedasbuyersinsteadofsellers,
croptypes,andvolumeofwaterneeded.Thevalueofawaterunit
causingtheaforementionedplateaus.Therefore,asğ›¿isincreased,
wascalculatedbasedonvalueofproductionperacrefortherel- thenumberofavailablewaterrightsfortradeincreasesabruptly.
evantcroptypes[25](ğ‘› ğ‘–)andthevolumeofwaterrequiredfor ThisalsoleadstotheplateauinginPlot3(b).Overall,weobserve
eachfield(ğ‘£ ğ‘–).Then,wecalculatedthevalueperacre-footğ‘ ğ‘– = thatheterogeneity(bothquantityandcropvalue)incropportfolios,
ğ´ ğ‘– Â·ğ‘› ğ‘–/ğ‘£ ğ‘–,whereğ´ ğ‘– isacreage,ğ‘› ğ‘– isthevalueofproductionper seniority,andgeographicconstraintscanleadtofewercompatible
acrebasedoncroptype.Buyersandsellersweredecidedbased seller-buyerunitpairs.Also,thenumberofsuchpairsisrelatively
on water availability and water right seniority. The aggregated lowinthecaseof Yakima.
volumesperfieldğ‘£ ğ‘– weredisaggregatedintoprioritizedunitsof Welfarefromtradeandwateravailability.Figures2(c)and(d)
water(withunitsizesbeing5,10,or20acre-feet).Forbuyers,units
showthebenefitoftradingforsyntheticdatasets.Thetotalvalue
wereprioritizedindescendingorderoftheirvalue,while,forthe
duetotradingissignificantlyhigherwhenwateravailabilityis
sellers,unitswereprioritizedinascendingorderoftheirvalue,thus
around50%.Weobservethatthecombinationofseniorityandcrop
satisfyingthemonotonicityconstraintsofAlgorithm1.Wecreated
value(highorlow)hasasignificanteffect.Ascenariocorresponding
theresourcesâ€“needsbipartitegraphusingthevaluefunctionsand to high-value buyers and low-value sellers (ğœ† = 0) offers more
geographiclocationsofthewaterrights.Thisisdescribedinmore opportunitiesformatchingthantheotherwayround(ğœ†=1).The
detailinthesupplement. welfarepeakswhenğ›¿ isintheinterval[0.25,0.35],whichisalso
6.2 Results theintervalwiththehighestnumberofedgesinthebipartitegraph.
Theparameterğ›½ â„ contributessignificantlytothevalueofwelfare.
Compatibilitygraphstructureandwateravailability.Here, Thelargertheğ›½ â„,thegreaterthetotalwelfareğœ(T).
weexaminethestructureofthebuyerâ€“sellerandresourcesâ€“needs However,inthecaseofreal-worlddatasets,weseeamuchricher
compatibilitygraphswithincreasingwateravailabilityğ›¿.Forthe behavior,whichispartlyexplainedbythestructureoftheresourcesâ€“
syntheticgraphs,Figure2(a)showsalinearincreaseinthenumber needsnetwork.TheYakimadatasetexhibitscharacteristicssimilar
ofsellers,whichisduetothefactthateachagentisassignedthe tothoseofsyntheticdatasetsaroundğ›¿ =0.5,butthenormalized
samenumberofresources.Notethatthebuyerâ€“sellercompatibil- totalvaluedropsclosetozeroevenwhenaround25%ofthewater
itygraphinthiscaseonlydifferswithrespecttoğ›¿,asallother isavailable(seeFigure3(c)).Thisisduetothesamereasonasthat
parametersonlydeterminethevalueofthewaterunits.However, fortheTouchetdataset:anagentwithalargenumberofwater
theresourcesâ€“needsbipartitegraph(definedinSection4.2)isin- units.Onlyforasufficientlylargevalueofğ›¿doesthisagentgetto
fluencedsignificantlybycombinationsofseniorityandvalue.In exerciseitswaterunitandbecomeaseller.FortheTouchetdata,
Plot2(b),weobservethatthenumberofedgesintheresourcesâ€“ weobservethesamephenomenonaswasobservedforthenumber
needsgraphsignificantlydecreasesasthenumberofseniorhigh- ofedgesat0.25â‰¤ğ›¿ â‰¤0.5.Wenotethatthewelfareinthecaseof
valueagents(ğœ†andğ›½ â„ beingbothhigh)increasesduetothefact theTouchetnetworksismuchlargerthanthatforYakima,where
thatmosthigh-valueagentshavewater,whilelow-valueagents seller-buyercompatibilityisrelativelylow.
srellesforebmuN
hpargsdeen-seRehtnisegdE
Ïƒ/)
(Ïƒ
0 âˆ—
T
Ïƒ/)
(eraflew
0
âˆ— T(a) (b) (c) (d)
100 100 Ã—104 1.0 4 Ã—106
80 0.8
75 Touchet5 3
60 0.6 Touchet10
50 Touchet20 2
40 0.4
Yakima5
20 25 0.2 Yakima10 1
Yakima20
0 0 0.0 0
0.0 0.5 1.0 0.00 0.25 0.50 0.75 1.00 0.00 0.25 0.50 0.75 1.00 0.00 0.25 0.50 0.75 1.00
Î´ Î´ Î´ Î´
Figure3:Panels(a)and(b)showstructuralpropertiesoftheresourcesâ€“needsgraphforreal-worlddatasetswithrespecttoincreasing
wateravailability.InPanels(c)and(d),Y-axisgivesthetotalvalueğœ(Tâˆ—)andwelfare(Tâˆ—)correspondingtoanoptimalassignmentTâˆ—
respectively,normalizedbyğœ 0,thetotalvaluewhen100%ofwaterisavailable.Allresultsareforvaryingsizesforwaterunits.
Î»=0,Î²h=0.7 Î»=0.5,Î²h=0.7 Î»=1,Î²h=0.7 sellersformostbuyers.Therefore,withtheadditionalconstraints
1.00
Î´ oflowerboundsasinSection5.1,thiswillmostlyleadtoinfeasible
0.75 0.2 instances.Next,wenotethatthemeanormedianbuyersatisfac-
0.50 0.4 tionneednotincreaseasğ›¿increases.Asğ›¿increases,thenumber
0.6
0.25 ofbuyersdecreases.Hence,itispossiblethatfortheremaining
0.8
0.00 buyers,thebuyersatisfactionislow.Thisexplainsthedecreasein
1 2 3 4 5 1 2 3 4 5 1 2 3 4 5
r( b ) r( b ) r( b ) buyersatisfactionforYakima10fromğ›¿ =0.3toğ›¿ =0.4.
{ } { } { }
Figure4:Thelossinwelfareasthelowerboundonthenumber
Touchet10 Yakima10
ofwaterunitsforeachindividualbuyerisincreased.Thewelfare- 1.0
fairnesstradeoffistheratiowelfare(Tğ‘Ÿâˆ—)/welfare(Tâˆ—),whereTğ‘Ÿâˆ— 0.8
isanoptimalsolutionwhichsatisfiesthefairnesscriteriathatevery 0.6
buyerismatchedwithatleastğ‘Ÿ({ğ‘}) =ğ‘Ÿ waterunitsandTâˆ— is 0.4
0.2
anoptimalsolutionwhennosuchconstraintsareimposed.The
0.0
resultsareforthesyntheticgraphsfordifferentvaluesofğœ†andğ›¿ 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9
Î´
over100replicates.
Figure 5: A boxplot of buyer satisfaction (water units
Buyersatisfaction.Forthesyntheticnetworks,wefindwelfare
matched/required water units) distribution with respect to
maximizing solutions with the constraint that every buyerğ‘ is
wateravailability.GiventheoptimalsolutionfromAlgorithm1,for
matchedtoatleastğ‘Ÿ({ğ‘}) = ğ‘Ÿ waterunits.Figure4showsthe
eachbuyer,thesatisfactioniscomputed.Insomecases,theboxes
decreaseinwelfareasğ‘Ÿ increases.Avalueofzeroonthey-axis
arenotvisible.Thesecorrespondtoamedianofeitherzeroorone.
correspondstoaninfeasibleinstancegiventheminimumsatisfac-
tionconstraints.Wenotethatforlowerğ›¿,themaximumwelfare
achievableissmallforevensmallğ‘Ÿ,indicatingthat,duringwater
Thesizeofwaterunits.Werecallthatallourproposedalgorithms
scarcity,thewelfareâ€“fairnesstradeoffishigh.Forahighğœ†,where runinpolynomialtimeinthenumberofwaterunits.Thisisunlike
theproblemsconsideredinLiuetal.[29],wherethecomplexity
mostbuyersarelow-valuedandmostsellersarehigh-valued,we
seeasharpdropinwelfarewithincreasingğ‘Ÿ. waswithrespecttothenumberofagents.Giventheheterogeneity
inthevaluationofeachwaterunit,thisisunavoidable.Onewayto
Forthereal-worldgraphs,wehaveplottedbuyersatisfactionin
mitigatethisproblemistoincreasethesizeofasinglewaterunit.
Figure5forwaterunitsizeof10,whentherearenolowerbound
Ouranalysisonthesizeofwaterunitsisinthesupplement.
constraints.Weobservethat,forbothdatasets,thegeneralsatis-
factionlevelsarelowforğ›¿ <0.5.Weseesomeoutlierswith100%
7 FUTUREWORK
satisfaction.Uponinspection,wefoundthatthesebuyerstypically
haveasingleunitrequirement.WenotethatforTouchet10,the Wepresentedresultsforaclassofresourcematchingproblems
averagebuyersatisfactionjumpstoâ‰ˆ 0.5atğ›¿ = 0.6.Thereare motivatedbyapplicationstowatertrading.Onedirectionforfu-
low-valuedagentswithwateravailableatğ›¿ â‰¥0.5whocanleadto tureworkistoconsideroptimalallocationproblemswithother
anincreaseintrade.Weobservethatwelfareisnotindicativeof welfarefunctionsandfairnesscriteria.Ourworkassumesthatthe
buyersatisfaction,asitonlydependsonthetotalvalueandtotal valuationsofresourcesarepublic.Ifthevaluationsarenotfully
quantity of trade. We observe that, in general, it is challenging revealed(amorepracticalsetting),interestingandricherproblems
toguaranteeaminimumnumberofwaterunitstomostbuyers involvingnegotiationsandpricediscoveryemerge.Ourworkisa
duetothefactthat,inmanyscenarios,therearenocompatible steptowardsmodelingandunderstandingtheseissues.
srellesforebmuN
)âˆ—T(eraflew/)âˆ—rT(eraflew
hpargsdeen-seRehtnisegdE
Ïƒ/)
(Ïƒ
0
âˆ—
T
noitcafsitasreyuB
)
(eraflew
âˆ—
T8 ACKNOWLEDGMENTS
[23] GiorgosKallis.2008.Droughts.AnnualReviewofEnvironmentandResources33
(2008),85â€“118.
Wethankthereviewersandeditorsfortheirvaluablesuggestions.Thisma-
[24] MohsenKhorasany,RezaRazzaghi,AliDorri,RajaJurdak,andPierluigiSiano.
terialisbaseduponworksupportedbytheAIResearchInstitutesprogram 2020.Pavingthepathfortwo-sidedenergymarkets:Anoverviewofdifferent
supportedbyUSDA-NIFAandNSFundertheAIInstitute:AgriculturalAI
approaches.IEEEAccess8(2020),223708â€“223722.
[25] DennisKoongandSteveAnderson.2022.2022WASHINGTONANNUALSTATIS-
forTransformingWorkforceandDecisionSupport(AgAID)awardNo.2021- TICALBULLETIN.https://www.nass.usda.gov/Statistics_by_State/Washington/
67021-35344,USDA-NIFAundertheNetworkModelsofFoodSystemsand Publications/Annual_Statistical_Bulletin/2022/WA_ANN_2022.pdf. [Accessed
08-Oct-2023].
theirApplicationtoInvasiveSpeciesSpread,grantno.2019-67021-29933,
[26] BryanLeonard,ChristopherCostello,andGaryDLibecap.2019. Expanding
USDANationalInstituteofFoodandAgricultureproject#1016467,andNSF watermarketsinthewesternUnitedStates:Barriersandlessonsfromother
awardNo.OAC-1916805(CINES).Opinions,findings,andconclusionsare
naturalresourcemarkets.ReviewofEnvironmentalEconomicsandPolicy13,1
(2019),43â€“61.
thoseoftheauthorsanddonotnecessarilyreflecttheviewofthefunding
[27] NixieSLesmana,XuanZhang,andXiaohuiBei.2019.Balancingefficiencyand
entities. fairnessinon-demandridesourcing.Advancesinneuralinformationprocessing
systems32(2019),5310â€“5320.
[28] ZhiyuanLi,YichengLiu,PingzhongTang,TingtingXu,andWeiZhan.2017.
REFERENCES Stabilityofgeneralizedtwo-sidedmarketswithtransactionthresholds.InPro-
ceedingsofthe16thConferenceonAutonomousAgentsandMultiAgentSystems.
[1] NogaAlon.2006.Splittingdigraphs.Combinatorics,ProbabilityandComputing IFAAMAS,Online,290â€“298.
15(2006),933â€“937. [29] YichengLiu,PingzhongTang,TingtingXu,andHangZheng.2016.Optimizing
[2] J.Bang-JensenanddN.CohenandF.Havet.2016. Findinggood2-partitions tradingassignmentsinwaterrightmarkets.InProc.AAAIConferenceonArtificial
ofdigraphsII.Enumerableproperties.TheoreticalComputerScience640(2016), Intelligence,Vol.30.AAAIPress,Online,551â€“557.
1â€“19. [30] L.LovÃ¡szandM.D.Plummer.1986.MatchingTheory.NorthHolland,Amsterdam,
[3] ReetwikaBasu.2023.ThreeEssaysonAgent-BasedModelsforWaterAllocation TheNetherlands.
underAppropriativeRights.PhDthesis.WashingtonStateUniversity. [31] WillMa,PanXu,andYifanXu.2022. Group-levelFairnessMaximizationin
[4] JamesFBookerandRobertAYoung.1994.Modelingintrastateandinterstate OnlineBipartiteMatching.InProceedingsofthe21stInternationalConferenceon
marketsforColoradoRiverwaterresources.JournalofEnvironmentalEconomics AutonomousAgentsandMultiagentSystems.IFAAMAS,Online,1687â€“1689.
andManagement26,1(1994),66â€“87. [32] WesternWaterMarket.2023.InformationonWaterMarketsinWesternUSA.
[5] VictorBrajer,ALChurch,RonaldCummings,andPhillipFarah.1989. The https://westernwatermarket.com/. [Accessed04-10-2023].
strengthsandweaknessesofwatermarketsastheyaffectwaterscarcityand [33] HerveMoulin.2004.FairDivisionandCollectiveWelfare.MITPress,Cambridge,
sovereigntyinterestsintheWest.Nat.ResourcesJ.29(1989),489. MA.
[6] SusanMBurke,RichardMAdams,andWesleyWWallender.2004.Waterbanks [34] S.Narang,A.Biswas,andY.Narahari.2022.OnAchievingFairnessandStability
andenvironmentalwaterdemands:CaseoftheKlamathProject.WaterResources inMany-to-OneMatchings.ArXivReport:2009.05823v4.
Research40,9(2004),1â€“9. [35] MahsaNoori,AlirezaEmadi,andRaminFazloula.2021.Anagent-basedmodelfor
[7] IoannisCaragiannisandShivikaNarang.2023.Repeatedlymatchingitemsto waterallocationoptimizationandcomparisonwiththegametheoryapproach.
agentsfairlyandefficiently.InInternationalSymposiumonAlgorithmicGame WaterSupply21,7(2021),3584â€“3601.
Theory.Springer,NewYork,NY,347â€“364. [36] AtasiPanda,AnandLouis,andPrajaktaNibhorkar.2022. Bipartitematch-
[8] XingyuChenandZijieLiu.2020. TheFairnessofLeximininAllocationof ingswithgroupfairnessandindividualfairnessconstraints. ArXivpreprint
IndivisibleChores.ArXivReport:2005.04864v1. arXiv:2208.09951.
[9] HowardChongandDavidSunding.2006.Watermarketsandtrading.Annu.Rev. [37] TroutUnlimitedWashingtonWaterProject.2019.Landownerâ€™sguidetoWashing-
Environ.Resour.31(2006),239â€“264. tonwaterrights.https://appswr.ecology.wa.gov/docs/WaterRights/wrwebpdf/
[10] JosephCookandSergeySRabotyagov.2014.Assessingirrigatorsâ€™preferences landownerguide-2019.pdf. [Accessed08-Apr-2023].
forwatermarketleaseattributeswithastatedpreferencesapproach. Water [38] JohnF.RaffenspergerandMarkW.Milke.2017.Participantsinandcomponents
ResourcesandEconomics7(2014),19â€“38. ofthesmartmarketinstitution.InSmartmarketsforwaterresources:amanual
[11] QianDang,MeganKonar,JeffreyJReimer,GiulianoDiBaldassarre,Xiaowen forimplementation.Springer,Heidelberg,Germany,95â€“136.
Lin,andRuijieZeng.2016.Atheoreticalmodelofwaterandtrade.Advancesin [39] JohnF.Raffensperger,MarkW.Milke,andE.GrantRead.2009.Adeterministic
WaterResources89(2016),32â€“41. smartmarketmodelforgroundwater. OperationsResearch57,6(2009),1333â€“
[12] XiaotieDeng,Li-ShaHuang,andMinmingLi.2007.OnWalrasianpriceofCPU 1346.
time.Algorithmica48(2007),159â€“172. [40] TuomasSandholmandSubhashSuri.2002.Optimalclearingofsupply/demand
[13] DepartmentofEcology,StateofWashington.[n.d.].Waterrights.https://appswr. curves.InInternationalSymposiumonAlgorithmsandComputation.Springer,
ecology.wa.gov/waterrighttrackingsystem/WaterRights/default.aspx. [Accessed NewYork,NY,600â€“611.
Apr-2023]. [41] MindySelman,EvanBranosky,CyJones,andJennyGuiling.2009.Waterquality
[14] RanDuanandHsin-HaoSu.2012. Ascalingalgorithmformaximumweight tradingprograms:Aninternationaloverview. Issuebrief,WorldResources
matchinginbipartitegraphs.InProceedingsofthetwenty-thirdannualACM-SIAM Institute(WRI),Washington,DC.
symposiumonDiscreteAlgorithms.SIAM,1413â€“1424. [42] SoroushSharghiandRezaKerachian.2022.Anuncertainty-basedsmartmarket
[15] J.EdmondsandR.M.Karp.1972. Theoreticalimprovementsinalgorithmic modelforgroundwatermanagement.WaterSupply22,3(2022),3352â€“3373.
efficiencyfornetworkflowproblems.J.ACM19,2(1972),248â€“264. [43] MichaelStiebitz.1996.DecomposingGraphsUnderDegreeConstraints.J.Graph
[16] SeyedEsmaeili,SharmilaDuppala,DavidsonCheng,VedantNanda,Aravind Theory23,3(1996),321â€“324.
Srinivasan,andJohnPDickerson.2023. Rawlsianfairnessinonlinebipartite [44] Yohai Trabelsi. 2024. Code and Data: Value-based Resource Match-
matching:Two-sided,group,andindividual.InProceedingsoftheAAAIConference ing with Fairness Criteria: Application to Agricultural Water Trading.
onArtificialIntelligence,Vol.37.AAAIPress,Online,5624â€“5632. https://github.com/yohayt/Value_based_Resource_Matching_with_Fairness_
[17] FoodandAgricultureOrganization.2022.TheStateoftheWorldâ€™sLandandWater Criteria_Application_to_Agricultural_Water_Trading.
ResourcesforFoodandAgricultureâ€“Systemsatbreakingpoint.Rome,Online. [45] YohaiTrabelsi,AbhijinAdiga,SaritKraus,S.S.Ravi,andDanielJRosenkrantz.
[18] H.N.Gabow.1983.AnEfficientReductionTechniqueforDegree-Constrained 2023. Resourcesharingthroughmulti-roundmatchings.InProceedingsofthe
SubgraphandBidirectedNetworkFlowProblems.InProceedingsofthe15th AAAIConferenceonArtificialIntelligence.AAAIPress,Online,11681â€“11690.
AnnualACMSymposiumonTheoryofComputing,25-27April,1983,Boston,Mas- [46] Washington State Department of Agriculture. [n.d.]. Agricultural
sachusetts,USA.ACM,NewYork,NY,448â€“456. Land Use. https://agr.wa.gov/departments/land-and-water/natural-
[19] RajivGandhi,SamirKhuller,SrinivasanParthasarathy,andAravindSrinivasan. resources/agricultural-land-use. [AccessedApr-2023].
2006.Dependentroundinganditsapplicationstoapproximationalgorithms.J. [47] NaftaliWaxman,NoamHazon,andSaritKraus.2021. Manipulationofğ‘˜-
JACM53,3(2006),324â€“360. CoalitionalGamesonSocialNetworks.ArXivReport:2105.09852v1.
[20] M.R.GareyandD.S.Johnson.1979.ComputersandIntractability:AGuidetothe [48] NaftaliWaxman,SaritKraus,andNoamHazon.2020.OnMaximizingEgalitarian
TheoryofNP-Completeness.W.H.FreemanandCo.,SanFrancisco,CA. Valueinğ¾-CoalitionalHedonicGames.ArXivReport:2001.10772v1.
[21] CharlesWHowe.2013.Interbasintransfersofwater:Economicissuesandimpacts. [49] D.B.West.2003.IntroductiontoGraphTheory.Prentice-Hall,Inc.,Englewood
Routledge,NewYork,NY. Cliffs,NJ.
[22] CharlesWHoweandChristopherGoemans.2003. Watertransfersandtheir [50] SarahAWheeler(Ed.).2021.WaterMarkets:AGlobalAssessment.EdwardElgar
impacts:LessonsfromthreeColoradowatermarkets1.JAWRAJournalofthe Publishing,Cheltenham,UK.
AmericanWaterResourcesAssociation39,5(2003),1055â€“1065.[51] TingtingXu,HangZheng,JianshiZhao,YichengLiu,PingzhongTang,YCEthan
Yang,andZhongjingWang.2018.Atwo-phasemodelfortradematchingand
pricesettingindoubleauctionwatermarkets. WaterResourcesResearch54,4
(2018),2999â€“3017.TechnicalSupplement
Papertitle:Value-basedResourceMatchingwithFairnessCriteria:ApplicationtoAgriculturalWaterTrading
A ADDITIONALMATERIALFORSECTION1
A.1 DefinitionsofSomeCombinatorialProblems
Thissubsectionprovidesformaldefinitionsofsomeproblemswhichareusedinvarioussectionsofthepaper.Thesedefinitionscanbefound
inseveralstandardtexts(e.g.,[20]).
(a)ExactCoverby3-Sets(X3C)
Instance:Auniversalsetğ‘ˆ ={ğ‘¢ 1,ğ‘¢ 2,...,ğ‘¢ ğ‘¡},whereğ‘¡ =3â„“forsomeintegerâ„“;acollectionğ¶ ={ğ¶ 1,ğ¶ 2,...,ğ¶ ğ‘Ÿ},whereeachğ¶ ğ‘— isasubsetof
ğ‘ˆ and|ğ¶ ğ‘—|=3,1â‰¤ ğ‘— â‰¤ğ‘Ÿ.
Question:Isthereasubcollectionğ¶â€²ofğ¶suchthat(i)thesetsinğ¶â€²arepairwisedisjointand(ii)theunionofallthesetsinğ¶â€²isequaltoğ‘ˆ?
ItiswellknownthatX3CisNP-complete[20].NotethatwhenthereisasolutiontoanX3Cinstance,thecollectionğ¶â€²musthaveexactly
â„“ =ğ‘¡/3setssinceeachsetinğ¶â€²hasthreeelementsandthesetsmustbepairwisedisjoint.
(b)MaximumWeightedMatchinginaBipartiteGraph
Werecallthatamatchingğ‘€inagraphğº(ğ‘‰,ğ¸)isasubsetofedgessuchthatnotwoedgesofğ‘€areincidentonthesamenode[49].
Whenthereareweightsonedges,theweightofamatchingğ‘€ isthesumoftheweightsoftheedgesinğ‘€.Aformaldefinitionofthe
maximumweightedmatchingproblemforbipartitegraphsisasfollows.
Instance:Abipartitegraphğº(ğ‘†,ğµ,ğ¸),aweightğ‘¤(ğ‘’)foreachedgeğ‘’ âˆˆğ¸.
Requirement:Amatchingğ‘€thathasthemaximumweightoverallthematchingsinğº.
Itiswellknownthatamaximumweightedmatchinginabipartitegraphğº(ğ‘†,ğµ,ğ¸)canbecomputedintimeğ‘‚((|ğ‘†|+|ğµ|)3)(seeTableII
of[?]forasummaryoftheavailablealgorithmsandtheirrunningtimes).
(c)DegreeConstrainedSubgraphorğ‘-Matching(DCS)
Instance:Abipartitegraphğº(ğ‘‹,ğ‘Œ,ğ¸),nonnegativeintegersğœ†(ğ‘£)andğœ‡(ğ‘£)foreachnodeğ‘£ âˆˆğ‘‹ âˆªğ‘Œ suchthatğœ†(ğ‘£) â‰¤ğœ‡(ğ‘£).
Requirement:Isthereasubgraphğºâ€²(ğ‘‹,ğ‘Œ,ğ¸â€²) ofğº suchthatforeachğ‘£ âˆˆ ğ‘‹ âˆªğ‘Œ,thedegreeğ‘‘(ğºâ€²,ğ‘£) ofğ‘£ inğºâ€² satisfiesthecondition
ğœ†(ğ‘£) â‰¤ğ‘‘(ğºâ€²,ğ‘£) â‰¤ğœ‡(ğ‘£)?
ItisknownthattheDCSproblemcanbesolvedefficientlyusingareductiontothematchingproblemonbipartitegraphs[18].Whena
solutionexists,acorrespondingsubgraphcanalsobeobtainedefficiently.
(d)MinimumVertexCover(MinVC)
Instance:Anundirectedgraphğº(ğ‘‰,ğ¸)andapositiveintegerğ‘˜ â‰¤ |ğ‘‰|.
Question:Isthereavertexcoverğ‘‰â€² âŠ†ğ‘‰ ofsizeatmostğ‘˜forğº (i.e.,asubsetğ‘‰â€²ofnodessuchthat|ğ‘‰â€²| â‰¤ğ‘˜andforeachedge{ğ‘¥,ğ‘¦}âˆˆğ¸,at
leastoneofğ‘¥ andğ‘¦isin|ğ‘‰â€²|)?
ItiswellknownthatMinVCisNP-complete[20].
B ADDITIONALMATERIALFORSECTION4
B.1 RunningtimeofAlgorithm1
TherunningtimeofthealgorithmisdominatedbythecomputationofamaximumweightedmatchinginStep2.Amaximumweighted
matchingofğºâ€²canbecomputedinğ‘‚((|ğ‘†â€²|+|ğµâ€²|)3)time(seeTableIIof[?]fortheavailablealgorithmsandtheirrunningtimes).B.2 StatementandProofofTheorem4.2
StatementofTheorem4.2:Supposewearegivenasetofsellersğ‘†,buyersğµ,theirwaterunits,compatibilitygraphğº(ğ‘†,ğµ,ğ¸),andvalue
functionssatisfyingthefollowingcondition:âˆ€ğ‘  âˆˆğ‘†,ğ‘“
ğ‘ 
isamonotonenon-decreasingfunction.Inthissetting,MaxWelfareisNP-hard.
Proof:Weuseadecisionversionof MaxWelfarewheretheinputincludesanadditionalintegerparameterğœ†andthegoalistodetermine
whetherthereisanassignmentforwhichthewelfarefunctionhasavalueofatleastğœ†.Ourproofof NP-hardnessisthroughareduction
fromtheExactCoverby3-Sets(X3C)problem(definedinSectionA.1).
Givenaninstanceğ¼ ofX3Cconsistingofauniversalsetğ‘ˆ = {ğ‘¢ 1,ğ‘¢ 2,...,ğ‘¢ ğ‘¡},whereğ‘¡ = 3â„“,andacollectionğ¶ = {ğ¶ 1,ğ¶ 2,...,ğ¶ ğ‘Ÿ}of
3-elementsubsetsofğ‘ˆ,weconstructaninstanceğ¼â€²of MaxWelfareasfollows.
(1) Thesetğ‘† ={ğ‘  1,ğ‘  2,...ğ‘  ğ‘¡}ofsellersisinone-to-onecorrespondencewiththesetğ‘ˆ.Eachsellerğ‘  ğ‘– hasonlyoneassociatedwaterunitğ‘¤ğ‘– ,
1â‰¤ğ‘– â‰¤ğ‘¡.(Thus,thesetofwaterunitsonthesellersideisinone-to-onecorrespondencewiththesetofsellers.)
(2) Thesetğµ={ğ‘ 1,ğ‘ 2,...ğ‘ ğ‘Ÿ}ofbuyersisinone-to-onecorrespondencewiththesetcollectionğ¶.
(3) Weassumethattheelementsofğ‘ˆ areorderedas{ğ‘¢ 1,ğ‘¢ 2,...,ğ‘¢ ğ‘¡}andthattheelementsineachsubsetğ¶ ğ‘— âˆˆğ¶arelistedintheorderin
whichtheyappearinğ‘ˆ.Foreachsetğ¶ ğ‘— ={ğ‘¢ ğ‘— ,ğ‘¢ ğ‘— ,ğ‘¢ ğ‘— }oftheX3Cinstanceğ¼,wecreatethreewaterunitsğ‘¤ğ‘— ,ğ‘¤ğ‘— andğ‘¤ğ‘— forbuyerğ‘ ğ‘—,
1 2 3 1 2 3
1â‰¤ ğ‘— â‰¤ğ‘Ÿ.Waterunitğ‘¤ ğ‘ğ‘— iscompatiblewithwaterunitğ‘¤ğ‘—ğ‘ (ofsellerğ‘  ğ‘—ğ‘),1â‰¤ğ‘ â‰¤3.(Forexample,supposeğ¶ ğ‘— ={ğ‘¢ 3,ğ‘¢ 4,ğ‘¢ 7}.Wehave
threewaterunitsforbuyerğ‘ ğ‘—,namelyğ‘¤ğ‘— ,ğ‘¤ğ‘— anğ‘¤ğ‘— ;further,ğ‘¤ğ‘— ,ğ‘¤ğ‘— anğ‘¤ğ‘— arecompatiblewiththesellerwaterunitsğ‘¤3,ğ‘¤4andğ‘¤7
1 2 3 1 2 3
respectively.)
(4) Foreachsellerğ‘  ğ‘–,thevaluefunctionğ‘“ ğ‘ ğ‘– isdefinedasfollows:ğ‘“ ğ‘ ğ‘–(ğ‘¤ğ‘–)=1,1â‰¤ğ‘– â‰¤ğ‘¡.(Thus,thefunctionğ‘“ ğ‘  associatedwitheachsellerğ‘ is
triviallymonotoneandnon-decreasing.)
(5) Foreachbuyerğ‘ ğ‘—,thevaluefunctionğ‘“ ğ‘ğ‘— isdefinedasfollows:ğ‘“ ğ‘ğ‘—(ğ‘¤ 1ğ‘— )=0,ğ‘“ ğ‘ğ‘—(ğ‘¤ 2ğ‘— )=0,andğ‘“ ğ‘ğ‘—(ğ‘¤ 3ğ‘— )=ğ‘„,whereğ‘„isanintegerâ‰¥4,
1â‰¤ ğ‘— â‰¤ğ‘Ÿ.(Thefunctionğ‘“ ğ‘ associatedwitheachbuyerğ‘ismonotonebutnon-decreasing;thatis,itfailstosatisfytheconditionneeded
forTheorem4.1.)
(6) Thelowerboundğœ†onthevalueofthewelfarefunctionissettoâ„“(ğ‘„âˆ’3).
ThiscompletestheconstructionoftheMaxWelfareinstanceğ¼â€².Clearly,theconstructioncanbedoneinpolynomialtime.Wenowshow
thatthereisasolutiontotheMaxWelfareinstanceğ¼â€²iffthereisasolutiontotheX3Cinstanceğ¼.
Supposethereisasolutionğ¶â€² totheX3Cinstanceğ¼.Recallthatsuchasolutionmusthaveexactlyâ„“ sets.Withoutlossofgenerality,
l re et spth ee cts ivo elu lytio ton tb he eg thiv re en eub ny iğ¶ tsâ€² ğ‘¤= ğ‘— ,{ ğ‘¤ğ¶ 1 ğ‘—,ğ¶ an2 d,. ğ‘¤.. ğ‘—,ğ¶ oâ„“ f} b. uIf yğ¶ erğ‘— ğ‘= ğ‘—,{ 1ğ‘¢ ğ‘— â‰¤1,ğ‘¢ ğ‘—ğ‘— â‰¤2,ğ‘¢ â„“ğ‘— .3 (} T, ha ess oig thn et rh ğ‘Ÿe âˆ’w â„“at be ur yu en rsit as rğ‘¤ enğ‘— 1 o, tğ‘¤ ağ‘— s2 sa ign nd eğ‘¤ dağ‘— 3 no yf wse al tl ee rrs uğ‘  nğ‘— i1 t, sğ‘  .)ğ‘— 2 Sia nn cd eğ‘  ğ¶ğ‘— 3 â€²
1 2 3
coversalltheelementsofğ‘ˆ,thisassignsalltheğ‘¡ =3â„“waterunitsofthesellers.Sincethesetsinğ¶â€²arepairwisedisjoint,eachwaterunitof
asellerisassignedtoexactlyonebuyer.Thus,foreachsellerğ‘  ğ‘–,thevalueğ‘“ ğ‘ ğ‘–(ğ‘¤ğ‘–) =1(1 â‰¤ğ‘– â‰¤ğ‘¡ =3â„“),andforeachbuyerğ‘ ğ‘—,thevalue
ğ‘“ ğ‘ğ‘—(ğ‘¤ 3ğ‘— )=ğ‘„.Hence,thevalueofthewelfarefunctionis(cid:205)â„“ ğ‘—=1ğ‘“ ğ‘ğ‘—(ğ‘¤ 3ğ½ )âˆ’(cid:205) ğ‘–3 =â„“ 1ğ‘“ ğ‘ ğ‘–(ğ‘¤ğ‘–)=ğ‘„â„“âˆ’3â„“=â„“(ğ‘„âˆ’3)=ğœ†.Thus,wehaveasolutionto
theMaxWelfareinstanceğ¼â€².
NowsupposethereisasolutiontotheMaxWelfareinstanceğ¼â€².Wehavethefollowingclaim.
Claim1:AnyvalidsolutiontotheMaxWelfareinstanceğ¼â€²mustincludethefollowingtwoproperties:(a)exactlyâ„“buyershaveavalueof
ğ‘„fortheirvaluefunctions;and(b)alltheğ‘¡ =3â„“sellershavethevalue1fortheirvaluefunctions.
ProofofClaim1:First,considerPart(a).Sincethetotalnumberofavailablewaterunitsfromthesellersisğ‘¡ =3â„“andeachbuyerneeds3
unitsfortheirvalue-functionstohaveavalueğ‘„,atmostâ„“buyerscanhavethevalueğ‘„fortheirvaluefunctions.Now,supposeforthesake
ofcontradiction,thenumberğ‘§ofbuyerswiththevalueğ‘„fortheirvalue-functionsislessthanâ„“.Suchanassignmentwoulduseatleast3ğ‘§
waterunitsofsellers(sinceeachbuyerwithvaluefunctionğ‘„needsthreewaterunits).Thenthevalueofthewelfarefunctionisatmost
ğ‘§ğ‘„âˆ’3ğ‘§=ğ‘§(ğ‘„âˆ’3).Sinceğ‘§ <â„“,thevalueofthewelfarefunctionis<ğœ†=â„“(ğ‘„âˆ’3).Thiscontradictstheassumptionthatthevalueofthe
welfarefunctionisatleastâ„“(ğ‘„âˆ’3),andcompletesourproofofPart(a).
ToprovePart(b),notethatfromPart(a),thenumberofbuyerswiththevalueğ‘„ fortheirvaluefunctionisâ„“.Sinceeachsuchbuyer
isassignedthreewaterunits,itfollowsthatthetotalnumberofwaterunitsassignedtoallthebuyersis3â„“.Thiscompletestheproofof
Claim1.â–¡
InviewofClaim1,anysolutiontoinstanceğ¼â€²hasexactlyâ„“buyers,eachofwhomhasbeenassignedthreewaterunits.Withoutlossof
generality,let{ğ‘ 1,ğ‘ 2,...,ğ‘ â„“}denotethissetofbuyers.Constructthefollowingcollectionğ¶â€²ofsubsets:foreachbuyerğ‘ ğ‘— inthesolution,
choosethecorrespondingsetğ¶
ğ‘—
inğ¶â€²,1â‰¤ ğ‘— â‰¤â„“.Sincethesetsofwaterunitsassignedtothebuyersarepairwisedisjointandthe3â„“water
unitsofthesellersareusedinthesolutiontoğ¼â€²,itcanbeseenthatğ¶â€²isasolutiontotheX3Cinstanceğ¼â€²,andthiscompletesourproofof
Theorem4.2.C ADDITIONALMATERIALFORSECTION5
C.1 AdditionalMaterialforSection5.1
InSection5.1,weconsideredthewelfaremaximizationproblemwhentherearelowerboundsonthenumberofwaterunitstobeassigned
tosubsetsofbuyers.Here,weshowthat,ingeneral,theproblemofdeterminingwhetherthereisasolutionthatsatisfiesallsuchlower
boundconstraintsisitself NP-complete.Itshouldbenotedthatthisdecisionproblemdoesnotinvolvewelfaremaximization.Aformal
statementoftheproblemisasfollows.
FeasibilityofDemographicConstraints(FeasDemog)
Instance:Asetğ‘†ofsellersandtheirwaterunits,asetğµofbuyers,aresourceâ€“needscompatibilitygraphğºâ€²,acollectionğ·ofconstraintsof
theform(ğ´,ğ‘)whereğ´âŠ†ğµisasubsetofbuyersandğ‘isapositiveintegerthatgivesalowerboundonthetotalnumberofwaterunitsto
beassignedtothebuyersinğ´.
Question:Isthereavalidassignmentthatsatisfiesalltheconstraintsinğ·?
ThefollowingresultestablishesthecomplexityoftheFeasDemogproblem.
PropositionC.1. TheFeasDemogproblemisNP-complete.
Proof:ItcanbeseenthattheFeasDemogproblemisinNPsincegivenanassignment,itiseasytoefficientlycheckwhetheritsatisfiesall
theconstraintsinğ·.ToproveNP-hardness,weuseareductionfromtheMinVCproblem(definedinSectionA.1).
Givenaninstanceğ¼ oftheMinVCproblemconsistingofagraphğº(ğ‘‰,ğ¸) andanintegerğ‘˜ â‰¤ |ğ‘‰|,weconstructaninstanceğ¼â€² ofthe
FeasDemogproblemasfollows.
(1) Thesetğ‘† ={ğ‘  1,ğ‘  2,...,ğ‘  ğ‘˜}consistsofğ‘˜sellers;eachsellerğ‘  ğ‘– hasexactlyonewaterunitğ‘¤ ğ‘–,1â‰¤ğ‘– â‰¤ğ‘˜.
(2) Let|ğ‘‰|={ğ‘£ 1,ğ‘£ 2,...,ğ‘£ ğ‘›}.Thesetğµ={ğ‘ 1,ğ‘ 2,...,ğ‘ ğ‘›}ofbuyersisinone-to-onecorrespondencewiththenodesetğ‘‰.
(3) Theresourceâ€“needsgraphğºâ€²isacompletebipartitegraphbetweenthewaterunitsofsellersandthebuyers.(Inotherwords,anywater
unitofthesellerscanbeassignedtoanybuyer.)
(4) Thesetğ·hasğ‘š=|ğ¸|constraints.Foreachedgeğ‘’ ={ğ‘£ ğ‘–,ğ‘£ ğ‘—}ofğº,wecreateaconstraint({ğ‘ ğ‘–,ğ‘ ğ‘—},1);thatis,thebuyerscorresponding
totheendpointsofedgeğ‘’mustbeassignedatotalofatleastonewaterunit.
Thiscompletestheconstruction.Itiseasytoverifythattheconstructioncanbecarriedoutinpolynomialtime.
SupposethereisasolutiontotheMinVCproblem.Withoutlossofgenerality,letğ‘‰â€² ={ğ‘£ 1,ğ‘£ 2,...,ğ‘£ ğ‘˜}denotethegivenvertexcoverof
sizeğ‘˜.ConsiderthematchingassignmentT givenbyT ={(ğ‘¤ ğ‘–,ğ‘ ğ‘–) : 1â‰¤ğ‘– â‰¤ğ‘˜}.(Recallthatbuyerğ‘ ğ‘– correspondstonodeğ‘£ ğ‘– ofğº.)Since
theresourceâ€“needsgraphisacompletebipartitegraph,thisassignmentsatisfiesthecompatibilityconditions.Toshowthatthisassignment
satisfiesalltheconstraintsinğ·,consideranyconstraint({ğ‘ ğ‘¥,ğ‘ ğ‘¦},1)inğ·.Thisconstraintwasaddedtoğ·duetotheedge{ğ‘£ ğ‘¥,ğ‘£ ğ‘¦}inğº.
Sinceğ‘‰â€²isavertexcoverforğº,atleastoneofğ‘£
ğ‘¥
andğ‘£
ğ‘¦
appearsinğ‘‰â€².Withoutlossofgenerality,letğ‘£
ğ‘¥
beinğ‘‰â€².Thus,theassignmentT
givesawaterunittobuyerğ‘ ğ‘¥,thussatisfyingtheconstraint({ğ‘ ğ‘¥,ğ‘ ğ‘¦},1).Thus,wehaveavalidsolutiontotheFeasDemoginstanceğ¼â€².
Now,supposethereisasolutionT totheFeasDemoginstanceğ¼â€².Withoutlossofgenerality,letthissolutionassignwaterunitstobuyers
{ğ‘ 1,ğ‘ 2,...,ğ‘ ğ‘Ÿ}forsomeğ‘Ÿ â‰¤ğ‘˜.(Sincethereareonlyğ‘˜waterunitsintotal,thenumberğ‘Ÿ ofbuyerstowhomwaterunitscanbeassignedis
atmostğ‘˜.)Letğ‘‰â€² ={ğ‘£ 1,ğ‘£ 2,...,ğ‘£ ğ‘Ÿ}bethenodescorrespondingtothebuyerstowhomwaterunitsareassignedbyT.Wenowshowthat
ğ‘‰â€²isavertexcoverforğº.Consideranyedgeğ‘’ ={ğ‘£ ğ‘¥,ğ‘£ ğ‘¦}ofğº.Notethatğ·hastheconstraint({ğ‘ ğ‘¥,ğ‘ ğ‘¦},1)correspondingtoğ‘’.Sincethis
constraintissatisfiedbyT,atleastoneofğ‘
ğ‘¥
andğ‘
ğ‘¦
mustbeassignedawaterunit.Thus,atleastoneofthesetwonodesappearsinğ‘‰â€².
Thus,ğ‘‰â€²isavertexcoverofsizeâ‰¤ğ‘˜forğº.ThiscompletesourproofofPropositionC.1.
C.2 AdditionalMaterialforSection5.2
ThepurposeofthissectionistoshowthattheMaxLeximinproblemcanbesolvedefficiently.Forthereaderâ€™sconvenience,werepeatthe
definitionoftheproblem.
DefinitionofMaxLeximinproblem:Givenasellerwithasetğ‘Š ofğ‘˜waterunits,asetofbuyersğµwiththesamecostforeverywater
unit,andacompatibilitygraphğº ğ‘¤(ğ‘Š,ğµ,ğ¸ ğ‘¤),findatradingassignmentTâˆ—withtheleximin-largestbuyersatisfactionvector.
AsmentionedinSection5.2,weobtainanefficientalgorithmfortheMaxLeximinproblembyreducingittoaproblemcalledMaxTB-MRM
fromTrabelsietal.[45].AdefinitionoftheMaxTB-MRMproblemisasfollows.
Instance:Abipartitegraphğº(ğ‘‹,ğ‘Œ,ğ¸â€²),whereğ‘‹ isasetofagentsandğ‘Œ isasetofresources,anumberofmatchingrounds,ğ‘˜.Foreach
agentğ‘¥ ğ‘—,permissiblesetofroundsğ¾ ğ‘— âŠ† [ğ‘˜],thedesirednumberofroundsğœŒ ğ‘—,andavalidbenefitfunctionğœ‡â€² ğ‘—(Â·).
Required:FindacollectionMâˆ—consistingofatmostğ‘˜matchingsofğº thatmaximizesthesum(cid:205) ğ‘¥ğ‘—âˆˆğ‘‹ ğœ‡â€² ğ‘—(Â·).TheefficientalgorithmforMaxTB-MRMpresentedin[45]requiresthatthebenefitfunctionsforagentsbevalid.Thedefinitionofa
validbenefitfunctionisasfollows.
Validbenefitfunction:Foreachagentğ‘¥ ğ‘—,letğœ‡ ğ‘—(â„“)denotethenon-negativebenefitthattheagentğ‘¥
ğ‘—
receivesifitappearsinâ„“matchings,
forâ„“ =0,1,2,...,ğœŒ ğ‘—.Letğ›¿ ğ‘—(â„“) =ğœ‡ ğ‘—(â„“)âˆ’ğœ‡ ğ‘—(â„“âˆ’1)forâ„“ =1,2,...,ğœŒ ğ‘—.Wesaythatthebenefitfunctionğœ‡
ğ‘—
isvalidifitsatisfiesallofthe
followingfourproperties:(P1)ğœ‡ ğ‘—(0) = 0;(P2)ğœ‡ ğ‘— ismonotonenon-decreasinginâ„“;(P3)ğœ‡ ğ‘— hasthediminishingreturnsproperty,thatis,
ğœ‡ ğ‘—(â„“)âˆ’ğœ‡ ğ‘–(â„“âˆ’1) â‰¤ğœ‡ ğ‘—(â„“âˆ’1)âˆ’ğœ‡ ğ‘–(â„“âˆ’2)for2â‰¤â„“ â‰¤ğœŒ ğ‘–;and(P4)ğ›¿ ğ‘—(â„“) â‰¤1,forâ„“ =1,2,...,ğœŒ ğ‘—.
Notethatğœ‡ ğ‘—(Â·)satisfiespropertyP3iffğ›¿ ğ‘—(Â·)ismonotonenon-increasinginâ„“.
Wenowshowthatthefollowingproblem,whichisrelatedtotheMaxLeximinproblem,canbeefficientlysolvedthroughareductionto
theMaxTB-MRMproblem.(ThisreductionwassketchedinSection5.2.)
FindingaTradingAssignmenttoMaximizetheTotalReward(Max-Reward-Trade)
Instance:Asetğ‘Š = {ğ‘¤ 1,ğ‘¤ 2,...,ğ‘¤ ğ‘¡} ofwaterunits,asetğµ = {ğ‘ 1,ğ‘ 2,...,ğ‘ ğ‘š} ofbuyers,abipartitecompatibilitygraphğº(ğ‘Š,ğµ,ğ¸),a
requirementğœŒ ğ‘— â‰¤ |ğ‘Š|andavalidbenefitfunctionğœ‡ ğ‘— foreachbuyerğ‘ ğ‘—.(Thebenefitfunctionğœ‡ ğ‘—(â„“)isdefinedforallâ„“,0â‰¤â„“ â‰¤ğœŒ ğ‘—.)
Required:FindatradingassignmentT suchthatthetotalrewardB(T)=(cid:205)ğ‘š ğ‘—=1ğœ‡ ğ‘—(Â·)duetotheassignmentismaximized.
LemmaC.2. TheMax-Reward-TradeproblemcanbesolvedinpolynomialtimethroughareductiontotheMaxTB-MRMproblem.
Proof:AreductionfromtheMax-Reward-TradeproblemtotheMaxTB-MRMproblemisasfollows.
(1) Thecompatibilitygraphğºâ€²(ğ‘‹,ğ‘Œ,ğ¸â€²)isagraphwithğ‘‹ =ğµ,ğ‘Œ = {ğ‘£}isasinglenodewhichrepresentsonedifferentwaterrightper
matchingroundandğ¸â€² ={{ğ‘¥,ğ‘¦}|ğ‘¥ âˆˆğ‘‹,ğ‘¦ âˆˆğ‘Œ}.(Thus,ğºâ€²isastargraphwithacenternodeand|ğµ|leaves).
(2) Thetotalnumberofroundsisğ‘˜ =|ğ‘Š|(i.e.,thenumberofwaterunits).
(3) Foreachbuyerğ‘ ğ‘—,ğ¾ ğ‘— ={ğ‘–|(ğ‘£ ğ‘–,ğ‘£ ğ‘—) âˆˆğ¸}(oneroundpercompatiblewaterunit).
(4) Foreachbuyerğ‘ ğ‘—,thedesirednumberofroundsisğœŒ ğ‘—.
(5) Foreachbuyerğ‘ ğ‘—,thebenefitfunctionisğœ‡ ğ‘—.
GivenasolutionMtoMaxTB-MRM,weconstructatradingassignmentT asfollows:eachmatchingedgeinMbecomesoneentry
(ğ‘¤ ğ‘–,ğ‘ ğ‘—)ofT;here,ğ‘¤ ğ‘–isdeterminedbythematchingroundandğ‘ ğ‘— bytheagent.ToseethatanoptimalsolutiontoMaxTB-MRMprovidesan
optimalsolutiontoMax-Reward-Trade,consideranoptimalsolutionMâˆ—toMaxTB-MRMandletthiscorrespondtoatradingassignment
T forMax-Reward-Trade.AssumeforthesakeofcontradictionthatthereisasolutionTâ€² suchthatB(Tâ€²) > B(T).GivenTâ€²,we
constructamatchingsolutionMâ€²suchthatforeachbuyerandassignedwaterrightinTâ€²,wematchthecorrespondingbuyertothewater
unitinthecorrespondinground.ItcanbeseenthattheresultingsolutionisvalidtoMaxTB-MRM.Furthermore,itsvalueisgreaterthan
thatofB(Mâˆ—),contradictingtheassumptionthatMâˆ—isanoptimalsolutiontotheMaxTB-MRMinstance.Toconclude,wehaveanoptimal
solutiontotheMax-Reward-Tradeinstance.â–¡
Whenthebenefitfunctionğœ‡ ğ‘— foreachbuyerğ‘ ğ‘— hastheformğœ‡ ğ‘—(â„“)=â„“,for0â‰¤â„“ â‰¤ğœŒ ğ‘—,thetotalrewardofallthebuyersrepresentsthe
totalnumberofwaterunitsassigned.Thus,theabovereductionshowsthattheproblemoffindingatradingassignmentthatmaximizesthe
totalnumberofwaterunitsassignedintheabovesettingcanbesolvedefficiently.
WenowaddressthemainresultwhichistoshowthatthealgorithmforMaxTB-MRMin[45]canbeusedtosolvetheMaxLeximin
problem.Thisisdonebyshowingthatavalidrewardfunctionforeachbuyercanbeconstructedsothatmaximizingthetotalreward
producesasolutiontotheMaxLeximinproblem.Westatethisresultbelow.
LemmaC.3. ConsideranyinstanceoftheMaxLeximinproblem.Thereexistsavalidbenefitfunctionğœ‡ ğ‘— foreachbuyerğ‘ ğ‘— suchthatmaximizing
thetotalbenefitunderthisfunctiongivesasolutiontotheMaxLeximinproblem.
WeproceedtoproveLemmaC.3inseveralstages.Wefirstgivetheprocedureforconstructingavalidbenefitfunctionforeachbuyer.The
stepsofthisprocedureareasfollows.(Thereadershouldbearinmindthatğµandğ‘Š denotethesetofbuyersandwaterunits,respectively,
oftheMaxLeximinproblem.Also,foreachbuyerğ‘ ğ‘—,ğœŒ ğ‘— givesthenumberofwaterunitsdesiredbyğ‘ ğ‘—.)
(1) Letğ¹ =(cid:8)ğ‘˜ ğ‘–/ğ‘˜ ğ‘— |ğ‘˜ ğ‘–,ğ‘˜ ğ‘— âˆˆ [ğ‘Š]}andğ‘˜ ğ‘– â‰¤ğ‘˜ ğ‘—(cid:9) âˆª{0}.
(2) Letğœ‹ :ğ¹ â†’{1,...,|ğ¹|}correspondtotheindexofeachelementinğ¹ whensortedindescendingorder.
(3) Foreachğ‘ âˆˆğ¹,letğœ‰(ğ‘)=(|ğµ|Â·|ğ‘Š|)ğœ‹(ğ‘)/(|ğµ|Â·|ğ‘Š|)|ğ¹|.Notethateachğœ‰(ğ‘) âˆˆ (0,1].
(4) Theincrementalbenefitğ›¿ ğ‘—(â„“)forabuyerğ‘ ğ‘— fortheâ„“thwaterunitisdefinedasğ›¿ ğ‘—(â„“)=ğœ‰(cid:0)(â„“âˆ’1)/ğœŒ ğ‘—)(cid:1) .Thus,thebenefitfunctionğœ‡ ğ‘— for
buyerğ‘£ ğ‘— isgivenbyğœ‡ ğ‘—(0)=0andğœ‡ ğ‘—(â„“)=ğœ‡ ğ‘—(â„“âˆ’1)+ğ›¿ ğ‘—(â„“)for1â‰¤â„“ â‰¤ğœŒ ğ‘—.
Itcanbeseenthatğœ‡ ğ‘— satisfiespropertiesP1,P2andP4ofavalidbenefitfunction.WenowshowthatitalsosatisfiesP3,thediminishing
returnsproperty.
LemmaC.4. Foreachbuyerğ‘ ğ‘—,theincrementalbenefitğ›¿ ğ‘—(â„“)ismonotonenon-increasinginâ„“.Therefore,ğœ‡ ğ‘—(Â·)satisfiesdiminishingreturns
property.Proof. Bydefinition,forâ„“ =1,...,ğœŒ ğ‘—âˆ’1,ğ›¿ ğ‘—(â„“)/ğ›¿ ğ‘—(â„“+1)=ğœ‰(cid:0)(â„“âˆ’1)/ğœŒ ğ‘—(cid:1)/ğœ‰(cid:0)â„“/ğœŒ ğ‘—(cid:1) â‰¥ |ğµ|Â·|ğ‘Š| >1,bynotingthatğœ‹(â„“/ğœŒ ğ‘—)âˆ’ğœ‹((â„“+1)/ğœŒ ğ‘—) â‰¥1.
Hence,thelemmaholds. â–¡
TocompletetheproofofLemmaC.3,wemustshowthatanysolutionthatmaximizesthebenefitfunctiondefinedaboveoptimizesthe
leximinorder.Westartwithsomedefinitionsandalemma.
Forabuyerğ‘
ğ‘—
andğ‘ âˆˆğ¹,letğ¹ ğ‘—>(ğ‘)={â„“ |0â‰¤â„“ â‰¤ğœŒ
ğ‘—
andâ„“/ğœŒ
ğ‘—
>ğ‘}.Wewillnowshowthattheincrementalbenefitğ›¿ ğ‘—(â„“)obtainedby
buyerğ‘ ğ‘— formatchingâ„“isgreaterthanthesumofallincrementalbenefitsğ›¿ ğ‘—â€²(â„“â€²),forallbuyersğ‘ ğ‘—â€² andforallâ„“â€²satisfyingâ„“â€²/ğœŒ ğ‘—â€²) >â„“/ğœŒ ğ‘—.
LemmaC.5. Foranybuyerğ‘ ğ‘— andnon-negativeintegerâ„“ â‰¤ğœŒ ğ‘—,wehaveğ›¿ ğ‘—(â„“) >(cid:205) ğ‘—â€²âˆˆğµ(cid:205) â„“â€²âˆˆğ¹ ğ‘—> â€²(â„“/ğœŒğ‘—)ğ›¿ ğ‘—â€²(â„“â€²).
Proof. Foranyâ„“â€² âˆˆ ğ¹ ğ‘—> â€²(â„“/ğœŒ ğ‘—),notethatâ„“/ğœŒ ğ‘— < â„“â€²/ğœŒ ğ‘—â€².Hence,ğœ‹(â„“/ğœŒ ğ‘—) âˆ’ğœ‹(â„“â€²/ğœŒ ğ‘—â€²) â‰¥ 1.Thisimpliesthatğ›¿ ğ‘—(â„“)/ğ›¿ ğ‘—â€²(â„“â€²) = ğœ‰(cid:0)(â„“ âˆ’
1)/ğœŒ ğ‘—(cid:1)/ğœ‰(cid:0)(â„“â€²âˆ’1)/ğœŒ ğ‘—â€²)(cid:1) â‰¥ |ğ‘Š|Â·|ğµ|.SinceğœŒğ‘—â€² â‰¤ |ğ‘Š|,thenumberofğ›¿ ğ‘—â€²(â„“â€²)termsperğ‘—â€²isatmost|ğ‘Š|.Sinceâ„“/ğœŒ ğ‘— âˆ‰ğ¹ ğ‘—> â€²(â„“/ğœŒ ğ‘—),thenumber
ofğ›¿ ğ‘—â€²(â„“)termsforğ‘—â€² =ğ‘–isatmost|ğ‘Š|âˆ’1.Sincethereare|ğµ|buyersğ‘
ğ‘—â€²
âˆˆğµ,itfollowsthatthereareatmost|ğµ|Â·|ğ‘Š|âˆ’1termsğ›¿ ğ‘—â€²(â„“â€²)in
total.Therefore,(cid:205) ğ‘—â€²=ğ‘–(cid:205)
â„“â€²âˆˆğ¹ ğ‘—> â€²(â„“/ğœŒğ‘—
ğ›¿ ğ›¿ğ‘—â€² ğ‘—(( â„“â„“â€² )) <1. â–¡
WearenowreadytocompletetheproofofLemmaC.3.
ProofofLemmaC.3.Theproofisbycontradiction.SupposeAâˆ—isanoptimalsolutiongiventhebenefitfunctiondefinedabove.Wewillshow
thatifthereexistsasolutionAwithleximinorderbetterthanthatofAâˆ—,thenthetotalbenefitB(A) >B(Aâˆ—),contradictingthefactthatAâˆ—
isanoptimalsolution.Letğ´=(ğ‘™ 1/ğœŒ 1,ğ‘™ 2/ğœŒ 2,...,ğ‘™ |ğµ|/ğœŒ |ğµ|)beasortedlistofsatisfactionratiosforAandletğ´âˆ—=(ğ‘™ 1âˆ—/ğœŒ 1,ğ‘™ 2âˆ—/ğœŒ 2,...,ğ‘™âˆ— |ğµ|/ğœŒ |ğµ|)
bealistdefinedsimilarlyforAâˆ—.Letğ‘˜denotethefirstindexforwhichğ‘™ ğ‘˜/ğœŒ ğ‘˜ â‰ ğ‘™ ğ‘˜âˆ—/ğœŒ ğ‘˜.
ForagivensolutionA,weuseğ›¾ ğ‘—(A)todenotethenumberofwaterrightsassignedtobuyerğ‘ ğ‘—,1â‰¤ ğ‘— â‰¤ |ğµ|.Werecallthatthebenefit
functionforAcanbewrittenasB(A)=(cid:205)| ğ‘—ğµ =| 1(cid:205)ğ›¾ â„“=ğ‘—( 1A)ğ›¿ ğ‘—(â„“).Foreachğ‘—,theğ›¿ ğ‘—(â„“)termscanbepartitionedintotwoblocksasfollows.
(i)ğ· 1(A)={(ğ‘—,â„“) |âˆ€ğ‘—, â„“/ğœŒ
ğ‘—
<ğ‘˜},and
(ii)ğ· 2(A)={(ğ‘—,â„“) |âˆ€ğ‘—, â„“/ğœŒ
ğ‘—
â‰¥ğ‘˜.
WecanpartitionthetermscorrespondingtoB(Aâˆ—)inthesameway,andtheseblocksaredenotedbyğ· 1(Aâˆ—)andğ· 2(Aâˆ—).Fromthedefinition
ofğ‘˜,itfollowsthatğ· 1(Aâˆ—)=ğ· 1(A).SinceAhasabetterleximinorder,and,fromdefinition,itfollowsthatâ„“ ğ‘˜âˆ—/ğœŒ ğ‘˜ <â„“ ğ‘˜/ğœŒ ğ‘˜.Inaddition,from
theorderoftheratiolists,itfollowsthatâ„“ ğ‘˜/ğœŒ ğ‘˜ >â„“ ğ‘—âˆ—/ğœŒ ğ‘— forallğ‘— >ğ‘˜.FromlemmaC.5,itfollowsthatğ›¿ ğ‘˜(â„“ ğ‘˜) >(cid:205) ğ‘—â€²âˆˆğµ(cid:205) â„“â€²âˆˆğ¹ ğ‘—> â€²(â„“/ğœŒğ‘—ğ›¿ ğ‘—â€²(â„“â€²),
and,therefore,ğ›¿ ğ‘˜(â„“ ğ‘˜) >(cid:205) (ğ‘—,â„“)âˆˆğ· (Aâˆ—)ğ›¿ ğ‘—(â„“).Finally,weget
2
B(A)âˆ’B(Aâˆ—)= âˆ‘ï¸ ğ›¿ ğ‘—(â„“)âˆ’ âˆ‘ï¸ ğ›¿ ğ‘—(â„“)
(ğ‘—,â„“)âˆˆğ· (A) (ğ‘—,â„“)âˆˆğ· (Aâˆ—)
2 2
âˆ‘ï¸
â‰¥ğ›¿ ğ‘˜(â„“ ğ‘˜)âˆ’ ğ›¿ ğ‘—(â„“) >0
(ğ‘—,â„“)âˆˆğ· (Aâˆ—)
2
Thus,B(A) >B(Aâˆ—),andthiscontradictstheoptimalityofAâˆ—.Thelemmafollows. â–¡
Thus,wehaveshownthatanygiveninstanceoftheMaxLeximinproblemcanbesolvedefficientlybyconstructingsuitablebenefit
functionsforeachbuyer,reducingtheproblemtotheMaxTB-MRMproblem,andthenusingtheefficientalgorithmfortheMaxTB-MRM
problemfrom[45].Wehavethuscompletedaproofofthefollowingtheorem(i.e.,Theorem5.3ofSection5.2):
Theorem5.3:AnoptimalsolutiontotheMaxLeximinproblemcanbeobtainedinpolynomialtime.
D ADDITIONALMATERIALFORSECTION6
Thereal-worldnetworkswereconstructedusingwaterrightsdata,acreage,typesofcropsgrown,andwaterdemandbycroptype[13,25,46].
Weidentified93waterrightsheldintheTouchetRiverWatershedand77waterrightsheldintheYakimaRiverBasin.Bothoftheserivers
areinWashingtonState.Thewaterrightswerecorrelatedwiththeirassociatedfarmfields,whichallowedthewaterrightstobemapped
totheircorrespondingcroptypes,acreage,andwaterdemand.UsingWashingtonStatecropproductiondatafromtheUSDANational
AgriculturalStatisticsService(NASS)[25],weestimatedthevalueofproductionperacreforeachcroptype,andmadeeducatedguesseson
thosecroptypeswhichwerenotincludedinNASSdata.Wethencalculatedthevolumeofwaterneededperwaterrightcroptype,and
assignedamonetaryvaluetoeachunitofwaterneeded.Toassignthevalueperunit,wefirstcalculatedthetotalvolumeğ‘£ ğ‘– neededper
fieldğ‘–inacre-feetasğ‘£ ğ‘– =round(ğ‘ ğ‘– Â·ğ‘šğ‘š ğ‘–/304.8),whereğ‘ ğ‘– andğ‘šğ‘š ğ‘– denoterespectivelytheacreageandthevolumerequiredperacre(in
acre-millimeters)offieldğ‘–.
Thetotal(baseline)watercapacityğ‘Š wascalculatedasthesumofdemandsacrossallofthewaterrightsperwatershed(Touchetand
Yakima)undernormalconditions.Thereducedwatercapacityğ‘…â€“toaccountfordroughtconditionsâ€“wascalculatedasğ‘…
ğ‘–
=ğ‘ ğ‘–/100*ğ‘Š
foreachpercentagecapacityğ‘in[10%..90%],calculatedin10%increments.Sortingthewaterrightsbyseniority(basedonprioritydate),Table1:Datasetsandtheirattributes.
Data Num. Totalwa- Totalvalue Max. Min.
agents terunits value value
Synthetic 10 50 variable variable variable
Touchet5 93 2704 8,533,475.94 57629.24 703.38
Touchet10 93 1389 8,778,037.64 115258.49 1406.77
Touchet20 93 741 9,400,712.72 230516.97 2813.54
Yakima5 77 3616 21,838,629.76 31606.52 264.33
Yakima10 77 1838 22,088,453.49 63213.04 528.66
Yakima20 77 952 22,698,607.80 126426.07 1057.31
moreseniorwaterrightsweredesignatedassellersuntilthesumofthesellersâ€™watervolumeswouldhaveexceededğ‘….Allother,more
junior,waterrightsweredesignatedasbuyers.Then,foreachsellerandbuyer,wedisaggregatedthetotalvolumeandvalueperunitinto
separaterowsbyunit.Fortheseller,itwasassumedthattheywouldprioritizesellingwaterfortheirlowervaluecropsfirst,sothearrayof
disaggregatedunitswouldbesortedbyvalueperunitinascendingorder.Similarly,buyerswouldprobablyprioritizebuyingwaterfortheir
high-valuecropsfirst,sotheirarrayofdisaggregatedunitswassortedbyvalueperunitindescendingorder.
Finally,abipartitegraphwascreated,mappingeachofthesellersâ€™unitsofwatertocompatiblebuyersâ€™units.Inordertobecompatible,(ğ‘–)
thebuyerhadtobeupstreamordownstreamoftheseller(e.g.,notindifferentstreamshedsorindifferentforksofthesameriver),and(ğ‘–ğ‘–)
thebuyerâ€™svalueforagivenunithadtobegreaterthanorequaltothesellerâ€™svalue(orprice)forthatunit.
AsummaryofvaluesforYakimaâ€“basedondifferentğ‘…valuesâ€“canbeseeninTable2.Afewobservationsareworthnoting.TheUnit
SizeinAcre-Feetindicatesthatunitsizewascalculatedbetweenrowsfor10and20acre-feetperunit,whichexplainswhythe20acre-feet
numberofunitswillalwaysbecloseto50%ofthe10acre-feetnumberofunits.Second,whendividingtheacre-feetperunitsize,anypartial
unitsareroundeduptothenextintegervalue,whichiswhytheTotalValueforthe20acre-feetunitsizewillalwaysbesomewhatlarger
thantheTotalValueforthecorresponding10acre-feetunitsize.Thereappearstobenodifferencebetweenthe10%watercapacityand
20%watercapacitystatisticsbecausethesecondmostseniorwaterrightincludedmorethan20%ofthetotalwaterunits,whichprevented
thenumberofsellerstoincreaseuntiltotalwatercapacityroseto30%.Finally,thesevaluesarebasedonlyonthestatisticsforthedataset
pre-experiment,orthenumberofunitsandtotalvaluethatcouldpossiblybetraded,butnottheactualtotalsfrommatchingdoneduring
trading.
%TotalWaterCapacity UnitSizeinAcre-Feet #Units TotalValue Sellers Buyers
10% 10 11 $27534.75 1 76
10% 20 6 $30037.91 1 76
20% 10 11 $27534.75 1 76
20% 20 6 $30037.91 1 76
30% 10 542 $10,664,614.78 8 69
30% 20 276 $10,795,007.24 8 69
40% 10 705 $14,590,442.54 26 51
40% 20 366 $14,872,635.68 26 51
50% 10 905 $14,980,581.61 37 40
50% 20 471 $15,287,062.66 37 40
60% 10 1060 $15,321,802.09 46 31
60% 20 551 $15,639,329.06 46 31
70% 10 1270 $19,918,785.39 57 20
70% 20 659 $20,363,049.477 57 20
80% 10 1435 $20,386,759.85 63 14
80% 20 745 $20,882,922.60 63 14
90% 10 1556 $20,630,547.56 68 9
90% 20 807 $21,134,945.99 68 9
Table2:Valuebreakdownandseller-buyerratiosfortheYakimadatasetforunit-sizes10and20acre-feetperunit.
Thesizeofwaterunits.Werecallthatallourproposedalgorithmsruninpolynomialtimeinthenumberofwaterunits.Thisisunlike
theproblemsconsideredinLiuetal.[29],wherethecomplexitywaswithrespecttothenumberofagents.Giventheheterogeneityinthe
valuationofeachwaterunit,thisisunavoidable.Onewaytomitigatethisproblemistoincreasethesizeofasinglewaterunit.OurresultsinFigure3comparenetworkswithdifferentwaterunitresolutionswithrespecttoboththestructuralpropertiesandthewelfarefrom
trade.WenotethatPlot(a)isnotaffectedbythecoarseningoftheresolution,i.e.,thenumberofsellersremainsthesameasafunction
ofğ›¿.However,wedoseeabenefitofcoarsening,asitgreatlyreducesthenumberofedgesintheresourcesâ€“needscompatibilitygraphsas
thesizeofawaterunitisincreased.However,weobservethatcoarseninghasverylittleeffectontotalvalue.Wedoobserveasignificant
differenceinthewelfarecurvesofTouchet10andTouchet20.Wenotethatforanyfixedvalueofğ›¿,thegreaterthesizeofthewaterunit,
thegreateristhewelfare.Thisismainlyduetoroundingeffectsthatleadtoanincreaseinthetotalnumberofwaterunits.However,the
trendremainsthesameacrossdifferentsizes.