TravelPlanner: A Benchmark for Real-World Planning with Language Agents
JianXie‚ô†* KaiZhang‚ô£* JiangjieChen‚ô† TinghuiZhu‚ô† RenzeLou‚ô°
YuandongTian‚ô¢ YanghuaXiao‚ô† YuSu‚ô£
‚ô†FudanUniversity‚ô£TheOhioStateUniversity
‚ô°ThePennsylvaniaStateUniversity‚ô¢MetaAI
jianxie22@m.fudan.edu.cn, shawyh@fudan.edu.cn, {zhang.13253, su.809}@osu.edu
https://osu-nlp-group.github.io/TravelPlanner
Abstract cisions,recordingintermediateplans(inworkingmemory
oronaphysicaldevice)fordeliberation,andexploringalter-
Planninghasbeenpartofthecorepursuitforarti-
nativeplansbyrunningsimulations,whichinturndepends
ficialintelligencesinceitsconception,butearlier
onaworldmodel(Mattar&Lengyel,2022;Hoetal.,2022).
AIagentsmostlyfocusedonconstrainedsettings
Fordecades,researchershavebeenattemptingtodevelop
becausemanyofthecognitivesubstratesneces-
AIagentstomimichumans‚Äôplanningcapability(Russell
sary for human-level planning have been lack-
& Norvig, 2010; Georgievski & Aiello, 2015; Karpas &
ing. Recently,languageagentspoweredbylarge Magazzeni,2020),butofteninconstrainedsettings(Camp-
language models (LLMs) have shown interest-
bell et al., 2002; Silver et al., 2016; 2017) because many
ing capabilities such as tool use and reasoning.
ofthecognitivesubstratesnecessaryforhuman-levelplan-
Aretheselanguageagentscapableofplanningin
ninghavebeenlacking. AIagentsthatcanworkrobustlyin
morecomplex settings thatareoutofthe reach
thelargelyunconstrainedsettingsinwhichhumansoperate
ofpriorAIagents? Toadvancethisinvestigation,
remainadistantgoal.
weproposeTravelPlanner,anewplanningbench-
markthatfocusesontravelplanning,acommon Theadventoflargelanguagemodels(LLMs;OpenAI(2022;
real-worldplanningscenario. Itprovidesarich 2023);Touvronetal.(2023a;b);Jiangetal.(2023))brings
sandbox environment, various tools for access- new light to this classic problem. A new generation of
ing nearly four million data records, and 1,225 languageagents(Su,2023;Sumersetal.,2023;Xieetal.,
meticulouslycuratedplanningintentsandrefer- 2023) powered by LLMs has emerged, characterized by
enceplans. Comprehensiveevaluationsshowthat theircapabilityofusinglanguageasavehicleforthought
the current language agents are not yet capable and communication. These agents have shown interest-
ofhandlingsuchcomplexplanningtasks‚Äîeven ingcapabilities,suchastooluse(Schicketal.,2023;Patil
GPT-4onlyachievesasuccessrateof0.6%. Lan- etal.,2023;Qinetal.,2024)andvariousformsofreason-
guageagentsstruggletostayontask,usetheright ing(Weietal.,2022;Yaoetal.,2022;Lewkowyczetal.,
toolstocollectinformation,orkeeptrackofmul- 2022),potentiallyfulfillingtheroleofsomeofthecogni-
tipleconstraints. However,wenotethatthemere tivesubstratesthatwerelackinginearlierAIagents. Re-
possibility for language agents to tackle such a searchershavethereforeinvestigatedtheirpotentialinanar-
complexproblemisinitselfnon-trivialprogress. rayofplanningtasksrangingfromclassicplanningsettings
TravelPlannerprovidesachallengingyetmean- like Blocksworld (Valmeekam et al., 2023) to embodied
ingfultestbedforfuturelanguageagents. agents(Huangetal.,2022;Ichteretal.,2022;Songetal.,
2023;Wangetal.,2023)andwebagents(Dengetal.,2023;
Zhouetal.,2024). However,theplanningsettingsinexist-
1.Introduction ingworkstilllargelyfollowtheconventionalsettingthat
focusesonsingle-objectiveoptimizationwithfixedground
Planningisahallmarkofhumanintelligence. Itisanevo- truths.Anagentistaskedwithpredictingfromapre-defined
lutionaryfeatbuiltuponnumerousothercapacities: using setofactions,justnowmadebyanLLM-poweredagent.
varioustoolstoiterativelycollectinformationandmakede-
Arelanguageagentscapableofplanninginmorecomplex
‚àóThefirsttwoauthorscontributedequally. Workdoneduring yetrealisticsettings,closertothoseinwhichhumansoper-
Jian‚ÄôsinternshipatOSUNLPGroup. ate? Toadvancethisinvestigation,weproposeTravelPlan-
ner,anewplanningbenchmarkthatfocusesonacommon
1
4202
beF
5
]LC.sc[
2v22610.2042:viXraTravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
I‚Äôm going from Seattle Planning Information Collection
to California from
November 6 to 10, The plan must adhere to [Tool] CitySearch[California]
2023. I have a budget of certain constraints, e.g., user [Result] San Francisco, Los
$6,000. For lodging, I needs and commonsense. It's Angeles,‚Ä¶, San Diego
User prefer an entire room also vital to ‚Ä¶ [Tool] FlightSearch[Seattle, San Francisco,
and the accommodations 2023-11-06]
must be pet-friendly. User Needs (Hard Constraints) [Result] No Flights.
1. Budget: $6000
2. Room Type: Entire Room [Tool] FlightSearch[Seattle, Los Angeles,
Let‚Äô me help! To solve 3. Room Rule: Pet-friendly 2023-11-06]
[Result] Flight Number: F123,
this problem, I need to Commonsense Constraints
13:40-16:12, Cost: $120
(1) analyze certain 1. Reasonable City Route
constraints, 2. Diverse Restaurants [Tool] DistanceMatrix[Los Angeles,
(2) collect information Agent 3. Diverse Attractions San Diego, taxi]
through reasonable use 4 5. . AN co cn o-c mo mnf oli dc atin tiog n T mra en es tp so Mrta inti io m2n 0u2 3m-11 -0N9ight [ DR ie ss tu al nt] c eD :u r 1a 9t 3i o kn m: , 1 C oh so tu :r $5 27 0 0m ins,
of necessary tools.
Delivery Plan [Tool] TransportationSearch[San
Toolbox 2023-11-06 2023-11-07 2023-11-08 2023-11-09 2023-11-10 Diego,Seattle, 2023-11-10]
1 2 3 4. . . .C A F Di t l it t i sy r g tS a h ae c t na t S cr i e ec o a Mh n r a( S c t¬∑ e h r) a ( i ¬∑r x)c ( ¬∑h )( ¬∑) ‚óè ‚óè ‚óèSeF(CALsDT1a tul hco iui3 ntg xc est d: nlh uo4 te i A: eot rm0 : y$ tr- - t:>F m1 r1 b a 1 26L uo c2 0:o id t1 l3 id s a o2 i t nnA ) i, og n n g :e les ‚óè ‚óè ‚óè ‚óè ‚óèBCLRDDASGALu ur ta ch aio rn te in xcrni j m fL c dn aa f uoc tio k he atick h rmn he ys tf ar : ioa M : mn on P A b‚Äôs snoi uaoMn t : sR n irP dg li : k din e a e ci z ia s tal ne z it or ga as P n u si :er ta ur;n d t i o ‚óè‚óè ‚óè ‚óè ‚óè ‚óèLos TBOLTDBACAE aA uhr ut cai ap n tek ne cn rr sbe n aea g oc tg rn L e c k e ih mSe lt o tlf ra rY: ol ia i: me os d x Ka s ts nMi er o t i nMdt: s - doo A:g> au n p S tgS u aia oh ma rn ntan me :l D nD eti nei e tg g oo ‚óè ‚óè ‚óè ‚óè ‚óèBBLHDDALCAEu ara t caair an te an crs sr lJn iaa r g oc fk toy o S e ck ohi mS'n lrtf rs la n: i na a i: mo d n R B is Wn a eS otoD a: s h da T Ab r :i o oa e yb pr wtg i aien oo e rss ntr m :P ea nrk t; ‚óèSF(Ca 7l oni:g5s hD 9t:t- i:e $1 Fg 307o 0:58 0- 69> ) , Seattle [ ( [ [ nR T R7 ioe e: gos s5 hu l u9 ] tl l- At ,t] ]1 c '0F Mc C:l o io5i m nz6g im y)h m , ot uR d moCN a oo tu ni ms om i t nb gf:e S ho r te r$: a : 3 r c U0F 8h '07 ,[ ,8 L 9 Eo $, ns 1 t A 3 in 0 rg / ee les]
5 6. .R Ae cs ct oa mu mr oa dn at tS ie oa nr Sc eh a( r¬∑ c) h (¬∑) üîç 2023-11-06 R 'o Lo um x, u rP ye t bs u ia ll dl io nw ge d s t udio', $150/
Interaction with Environment Seattle -> Los Angeles night, Minimum night: 1, Entire
‚Ä¢Flight: F123, (13:40-16:12), Cost: $120 Room, Pets allowed
‚Ä¢Accommodation: Luxury building studio
‚Ä¢Dinner: The Attraction [Tool] RestaurantSearch[Los Angeles]
[Result] The Attraction,Cuisine:French,‚Ä¶
Figure1.OverviewofTravelPlanner.Givenaquery,languageagentsaretaskedwithemployingvarioussearchtoolstogatherinformation.
Basedonthecollectedinformation,languageagentsareexpectedtodeliveraplanthatnotonlysatisfiestheuser‚Äôsneedsspecifiedinthe
querybutalsoadherestocommonsenseconstraints.
real-world planning scenario‚Äîtravel planning. This is a followingconstraints. Themainfindingsareasfollows:
challenging, time-consuming task even for humans (but
‚Ä¢State-of-the-artLLMscannothandlecomplexplanning
mostpeoplecandoitsuccessfully,withtherighttoolsand
taskslikethoseinTravelPlanner. GPT-4successfullypro-
enough time): 1) Planning a multi-day itinerary is inher-
ducesaplanthatmeetsalltheconstraintsforafewtasks
entlylong-horizon,involvingalargenumberofinterdepen-
(0.6%),whileallotherLLMsfailtocompleteanytasks.
dent decisions on places, lodging, transportation, dining,
etc. 2) Travel planning involves many constraints, rang- ‚Ä¢ Existing planning strategies such as ReAct and Reflex-
ing from explicit constraints such as budget and various ion,whichmaybeeffectiveforsimplerplanningsettings,
userneedstoimplicitcommonsenseconstraints,e.g.,peo- areinsufficientforthemulti-constrainttasksinTravelPlan-
plecannotteletransporttoanothercitywithoutusingsome ner. Theyoftenfailtoconverttheirreasoningintotheright
meansoftransportation. 3)Travelplanningrequiresstrong actionscorrectlyandkeeptrackofglobalormultiplecon-
agencytoproactivelyacquirenecessaryinformationusing straints. Languageagentsneedmoresophisticatedplanning
varioustools(e.g.,tosearchflightsandrestaurants)from strategiestoapproachhuman-levelplanning.
thepartiallyobservableenvironmentanddeliberateoverthe
‚Ä¢Furtheranalysesrevealmanycommonfailuremodesof
collectedinformationtofurthertheplanningwhilebeing
existinglanguageagents, suchasargumenterrorsintool
mindfulofalltheexplicitandimplicitconstraints. Planning
use,beingtrappedindeadloops,andhallucinations.
tasks of such complexity are out of the reach of prior AI
agents(Russell&Norvig,2010). Althoughmostofourfindingsleannegativelytowardthe
currentlanguageagents,weshouldnotethatthemerepos-
TravelPlanner provides a rich sandbox environment with
sibilityforanartificialagenttotacklesuchacomplextask
aroundfourmilliondataentriescrawledfromtheInternet
is non-trivial progress in itself. TravelPlanner provides a
that can be accessed via six tools. We also meticulously
challengingyetmeaningfultestbedforfutureagentstohill-
curate1,225diverseuserqueries(alongwiththeirreference
climbtowardhuman-levelplanningincomplexsettings.
plans),eachimposingadifferentcombinationofconstraints.
ArepresentativeexampleisillustratedinFigure1. Finally, a silver lining: while our well-trained human an-
notators averagely take 12 minutes to manually annotate
We comprehensively evaluate five LLMs, such as GPT-
a plan, a language agent can produce a plan in just 1‚Äì2
4(OpenAI,2023),Gemini(GTeametal.,2023),andMix-
minutesautomatically. Perhapsoneday,languageagents
tral(Jiangetal.,2024),andfourplanningstrategies,such
willbecomecapableenoughtohelpautomateawaymany
as ReAct (Yao et al., 2022) and Reflexion (Shinn et al.,
ofsuchtedioustasksforus.
2023),ontheircapabilityofdeliveringcompleteplansand
2TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
2.RelatedWork 2.3.EvaluationofLanguageAgents
2.1.LargeLanguageModelbasedAgents PreviousstudiestypicallyassessLLM-poweredlanguage
agentsinfocuseddomains: arithmeticreasoningtargeting
Empoweredbylargelanguagemodels(LLMs),language
correctsolutions(Roy&Roth,2015;Cobbeetal.,2021;
agentshavethecapabilitytodecomposecomplextasksand
Pateletal.,2021);tool-useevaluatingagents‚Äôproficiency
arrive at solutions through a series of reasoned actions.
inemployingtoolsandreportingresults(Lietal.,2023;Xu
Notable examples such as AutoGPT (AutoGPT, 2023),
etal.,2023;Zhuangetal.,2023);andwebnavigation,test-
BabyAGI(Nakajima,2023),andHuggingGPT(Shenetal.,
ingagents‚Äôabilitytolocatespecificwebsites(Dengetal.,
2023)haveilluminatedthecommunitywiththeirimpressive
2023; Zhou et al., 2024; Liu et al., 2024). However, the
abilities. CurrentLLM-poweredlanguageagents,equipped
complexity of the real-world implies that previous evalu-
withMemory,Tool-use,andPlanningmodules,haveseen
ationmethods, whichfocusonsingleobjectiveandfixed
asubstantialimprovementintheirgeneralabilities(Weng,
groundtruths,mayfallshortofcapturingthefullscopeof
2023). Memory in language agents refers to their ability
agents‚Äô capabilities. To address this, we introduce Trav-
toacquireandprocessinformation. Itisdividedintotwo
elPlannerforcomprehensiveevaluations,assessingwhether
types: long-termmemory,whichistheparametricmemory
languageagentscangeneratefeasiblesolutionsfacingvari-
inherentinLLMs,andshort-termmemory,alsoknownas
ousobjectives,referredtoasconstraintsinthispaper.
in-contextlearning(Brownetal.,2020)orworkingmemory.
Techniqueslikememorysummarization (Chenetal.,2023;
3.TravelPlanner
Zhou et al., 2023; Liang et al., 2023) and retrieval (An-
dreas,2022;Parketal.,2023;Zhongetal.,2023)arewidely
3.1.Overview
employedtoenhancethememorycapabilitiesoflanguage
agents. Moreover, byinteractingwithexternaltools, lan- WeintroduceTravelPlanner,abenchmarkcraftedforeval-
guageagentsexpandtheirpotentialcapabilitiessignificantly. uatinglanguageagentsintool-useandcomplexplanning
Thistool-augmentationparadigmhasbeenvalidatedasef- withinmultipleconstraints. Groundingtotravelplanning,
fective in previous work (Nakano et al., 2021; Lu et al., a real-world use-case that naturally includes diverse con-
2023;Geetal.,2023;Xieetal.,2023). Wefurtherdiscuss straintssuchasuserneedsandcommonsenseconstraints,
theplanningmoduleinSection2.2. TravelPlannerevaluateswhetheragentscandevelopflexible
travelplansbycollectinginformationviadiversetoolsand
2.2.Planning makingdecisionswhilesatisfyingtheconstraints.
Planning, a hallmark of human intelligence, entails a se- TravelPlannercomprises1,225queriesintotal. Thequeries
quenceofactionsthatinvolvedecomposingtasks,searching inTravelPlanneraredividedintoninegroups. Thisclassifi-
for solutions, and making final decisions (Hayes-Roth & cationisbasedontwocriteria: thedurationoftravelandthe
Hayes-Roth,1979;Grafmanetal.,2004;Su,2023). This numberofhardconstraints. Thedatasetisdividedintothe
skilliscrucialforachievinghuman-levelintelligenceand training,validation,andtestset. Thetrainingsetincludes5
has been widely studied in areas such as robotics (Mc- queriespergroupwithhuman-annotatedplans(45pairsin
Dermott,1992;Alterovitzetal.,2016)andtransportation total),thevalidationsetincludes20queriespergroup(180
scheduling (Cross & Estrada, 1994; Pinedo, 2005). The intotal),andthetestsetincludes1,000queries. Detailed
emergenceoflanguageagentspoweredbyLLMshasfur- distributionsareshowninTableA.1.
therintensifieddiscussionsaroundtheirplanningcapabili-
ties(Liuetal.,2023a;Valmeekametal.,2023). Previousre- 3.2.ConstraintIntroduction
searchhasdemonstratedthatlanguageagentscaneffectively
Inordertoassesswhetheragentscanperceive,understand,
decomposetasksandengageinstep-by-stepreasoning,lead-
andsatisfyvariousconstraintstoformulateafeasibleplan,
ingtosignificantimprovements(Weietal.,2022;Yuanetal.,
asoutlinedinTable1,weincludethreetypesofconstraints:
2023;Zhengetal.,2024).Furthermore,tooptimizesolution
searchesinfewersteps,classicaldatastructuresliketrees ‚Ä¢EnvironmentConstraints: Thereal-worldisdynamic,
andgraphshavebeenemployedinpriorstudies(Yaoetal., necessitatingagentstobeadaptable. Forinstance,flightsto
2023;Bestaetal.,2023),enhancingtheplanningcapabil- aparticulardestinationmaybeunavailableatcertaintimes
ities of language agents. In addition, methods involving (e.g.,noflightsfromSeattletoSanFranciscoinFigure
feedback from the environment (Yao et al., 2022; Shinn 1),possiblybecauseticketsaresoldout. Insuchcases,the
etal.,2023)havealsobeenshowntobebeneficial. How- agentmustdynamicallyseekanalternative,likechanging
ever,whiletheseplanningabilitieshaveshownpromisein thedestinationoftheflightorthewayoftransportation. To
specifictasks,theeffectivenessoftheseplanningstrategies simulatethis,weintroduceenvironmentconstraintswithin
inscenarioswithmultipleconstraintsremainsuncertain. TravelPlannertotesttheadaptabilityofagentsinplanning.
3TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Table1.Constraint description. The environment constraints are manifested through the feedback received from the environment,
assessingwhetherthelanguageagentcanadjustitsplanappropriately.Thecommonsenseconstraintsandhardconstraintsareevaluated
basedonhowwellthelanguageagent‚Äôsplanalignswiththesespecificcriteria.
Constraint Description
EnvironmentConstraint
UnavailableTransportation Thereisnoavailableflightordrivinginformationbetweenthetwocities.
UnavailableAttractions Thereisnoavailableattractioninformationinthequeriedcity.
CommonsenseConstraint
WithinSandbox Allinformationintheplanmustbewithintheclosedsandbox;otherwise,itwillbeconsideredahallucination.
CompleteInformation Nokeyinformationshouldbeleftoutoftheplan,suchasthelackofaccommodationduringtravel.
WithinCurrentCity Allscheduledactivitiesforthedaymustbelocatedwithinthatday‚Äôscity(s).
ReasonableCityRoute Changesincitiesduringthetripmustbereasonable.
DiverseRestaurants Restaurantchoicesshouldnotberepeatedthroughoutthetrip.
DiverseAttractions Attractionchoicesshouldnotberepeatedthroughoutthetrip.
Transportationchoiceswithinthetripmustbereasonable.Forexample,havingboth‚Äúself-driving‚Äùand‚Äúflight‚Äùwould
Non-conf.Transportation
beconsideredaconflict.
Thenumberofconsecutivedaysspentinaspecificaccommodationduringthetripmustmeetthecorresponding
MinimumNightsStay
requiredminimumnumberofnights‚Äôstay.
HardConstraint
Budget Thetotalbudgetofthetrip.
RoomRule Roomrulesinclude‚ÄúNoparties‚Äù,‚ÄúNosmoking‚Äù,‚ÄúNochildrenunder10‚Äù,‚ÄúNopets‚Äù,and‚ÄúNovisitors‚Äù.
RoomType Roomtypesinclude‚ÄúEntireRoom‚Äù,‚ÄúPrivateRoom‚Äù,‚ÄúSharedRoom‚Äù,and‚ÄúNoSharedRoom‚Äù.
Cuisine Cuisinesinclude‚ÄúChinese‚Äù,‚ÄúAmerican‚Äù,‚ÄúItalian‚Äù,‚ÄúMexican‚Äù,‚ÄúIndian‚Äù,‚ÄúMediterranean‚Äù,and‚ÄúFrench‚Äù.
Transportation Transportationoptionsinclude‚ÄúNoflight‚Äùand‚ÄúNoself-driving‚Äù.
Table2. Thenumberofdataentriesinthedatabase. evaluations. This setup ensures that all agents access the
Tool DataEntries(#) same unchanging information from our static databases,
CitySearch 312 avoidingthevariabilityandpotentialbiasesintroducedby
FlightSearch 3,827,361 dynamic data. To offer various travel options that align
DistanceMatrix 17,603 withthereal-world, weensurethedatabaseforeachtool
RestaurantSearch 9,552
inTravelPlannercontainsrichinformation. Thedatabase
AttractionSearch 5,303
sizeofeachtoolislistedinTable2. Formoretooldetails,
AccommodationSearch 5,064
pleaserefertoAppendixA.2andA.3. Additionally,agents
‚Ä¢CommonsenseConstraints: Agents,functioninginreal- are instructed to use the ‚ÄúNotebookWrite‚Äù tool to record
worldandservinghumans,shouldconsidercommonsense necessaryinformationforplanning.Thistoolisintegratedto
whendesigningplans. Forinstance,repeatedlyvisitingthe evaluateagents‚Äôworkingmemorymanagementandprevents
same attraction is not typical. To evaluate agents‚Äô under- maximumtokenlimitcausedbycontextaccumulation.
standingandutilizationofcommonsenseduringplanning,
weincludethecommonsenseconstraintinTravelPlanner.
QueryConstruction. TocreatediversequeriesforTrav-
‚Ä¢HardConstraints: Acrucialabilityforagentsistoeffec-
elPlanner,webeginwithseveralfundamentalelements,in-
tivelysatisfypersonalizeduserneeds.Toevaluatethis,Trav-
cludingdeparturecity,destination,andspecificdaterange,
elPlannerincorporatesvarioususerneeds,suchasbudget
randomlychosentoformtheskeletonofeachquery. Subse-
constraints. Theseuserneedsaretermedhardconstraints.
quently,weadjustthedurationoftravelandthenumberof
Thehardconstraintmeasurestheagent‚Äôsgeneralizationabil-
hardconstraintstocreatedifferentlevelsofcomplexity.
itywithregardtodifferentuserneeds.
Thedurationofthetravel‚Äî3,5,or7days‚Äîdeterminesthe
3.3.BenchmarkConstructionPipeline numberofcitiesincludedintheplan. Specifically, 3-day
plansfocusononecity,while5daysand7daysinvolvevis-
ThissectionoutlinestheconstructionpipelineofTravelPlan-
itingonerandomlychosenstate,withtripsto2citiesforthe
ner,whichinvolvesthefollowingsteps:1)Environmentand
5-dayplansand3citiesforthe7-dayplans,respectively. A
evaluationsetup. 2)Diversetravelquerydesign. 3)Refer-
greaternumberofdaysrequiresmorefrequenttoolusageby
enceplanannotation. 4)Qualitycheck.
languageagents,thusincreasingthedifficultyofmanaging
thelong-horizonaspectofplanning. Theuncertaindestina-
EnvironmentSetting. InTravelPlanner,wecreateastatic tionchallengesagentstodecideonmultiplecities,where
andclosedsandboxenvironmentforconsistentandunbiased theymustconsiderfactorssuchasinter-cityconnectivity.
4TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Furthermore,weintroducediverseuserneedsashardcon- whichwillbeevaluatedautomaticallythroughpre-defined
straintstoaddfurthercomplexityandrealism.Thedifficulty scripts. Theevaluationcriteriaincludethefollowing:
levelsarecategorizedasfollows:
‚Ä¢DeliveryRate: Thismetricassesseswhetheragentscan
‚Ä¢ Easy: Queries at this level are primarily budget- successfully deliver a final plan within a limited number
constrainedforasingleperson. Theinitialbudgetforeach ofsteps. Fallingintodeadloops, experiencingnumerous
queryisdeterminedusingasetofcraftedheuristicrules. failedattempts,orreachingthemaximumnumberofsteps
(30stepsinourexperimentalsetting)willresultinfailure.
‚Ä¢ Medium: In addition to budget constraints, medium
queriesintroduceanadditionalhardconstraint,randomly ‚Ä¢CommonsenseConstraintPassRate: Comprisingeight
selectedfromaconstraintpoolincludingcuisinetype,room commonsense dimensions, this metric evaluates whether
type, and room rule. Furthermore, the number of people alanguageagentcanincorporatecommonsenseintotheir
variesbetween2and8,whichinfluencesthecalculationof planwithoutexplicitinstructions.
costsforbothtransportationandaccommodation.
‚Ä¢ Hard Constraint Pass Rate: This metric measures
‚Ä¢Hard: Hardqueriesincludeadditionaltransportationpref- whetheraplansatisfiesallexplicitlygivenhardconstraints
erenceintotheconstraintpool,alongwithalltheconstraints inthequery,whichaimstotesttheagents‚Äôabilitytoadapt
in medium queries. Each hard query contains three hard theirplanstodiverseuserneeds.
constraintsrandomlyselectedfromtheconstraintpool.
‚Ä¢FinalPassRate: Thismetricrepresentstheproportion
Thismethodensuresthediversityofqueries.Minorchanges offeasibleplansthatmeetallaforementionedconstraints
intheseelementscanleadtosignificantlydifferentplans.Fi- amongalltestedplans. Itservesasanindicatorofagents‚Äô
nally,basedonelements,weutilizeGPT-4(OpenAI,2023) proficiencyinproducingplansthatmeetapracticalstandard.
togeneratenaturallanguagequeries.
Wedonotseparatelyassessenvironmentconstraintssince
their impact is inherently reflected in the ‚ÄúWithin Sand-
HumanAnnotation. Toensureeveryqueryhasatleast
box‚Äù and ‚ÄúComplete Information‚Äù metrics. For instance,
onefeasibleplan,weinvite20graduatestudentstometic-
whencitieslacktransportationorattractions, agentstypi-
ulouslyannotateplans forsynthesizedqueries. Oneplan
callyresorttohallucinationoroptnottoprovideananswer,
is deemed eligible only if it meets all the constraints out-
reflectingtheimpactofenvironmentconstraints.
linedinourevaluationscript,whichisdetailedinSection
3.4. Thisrigorousprocessresultedinthecreationof1,225 FortheCommonsenseConstraintPassRateandHardCon-
validatedquery-planpairs. Wepayannotatorsanaverageof straintPassRate,weutilizetwoevaluationstrategies: micro
$0.80foreachplantheyannotate. andmacro. Themicrostrategycalculatestheratioofpassed
constraintstothetotalnumberofconstraints. TheMicro
Quality Control. To ensure the quality of each natural PassRateisdefinedas:
languagequeryanditscorrespondingannotatedplan,the (cid:80) (cid:80) 1
authors performed a detailed review of every query and MicroPassRate= p‚ààP c‚ààCp passed(c,p) , (1)
(cid:80)
|C |
plan, rectifyinganyerrorsfound. Additionally, toensure p‚ààP p
thechallenges,were-calibrateeachquery‚Äôsbudgetusing
whereP representsthesetofallplansbeingevaluated,C
thecostsfromcorrespondinghuman-annotatedplans. This p
denotesthesetofconstraintsapplicabletoaspecificplanp
approach replaces the initial heuristic-generated budgets,
inP,andpassed(X,Y)isafunctiondeterminingwhether
whichmightbetoohigh,thusreducingthenumberoffeasi-
Y meetsconstraintsX.
bleplans. Throughmultiplestagesofhumanverification,
we ensure the high quality of each query in TravelPlan- The macro strategy calculates the ratio of plans that pass
nerandthepresenceofatleastonefeasiblesolution. allcommonsenseorhardconstraintsamongalltestedplans.
WedefinetheMacroPassRateas:
3.4.Evaluation (cid:80) 1
MacroPassRate= p‚ààP passed(Cp,p) . (2)
Toensureacomprehensiveevaluationoftheplansofferedby |P|
agents,weassessthemfrommultipledimensions. Specifi-
cally,wefirstextractkeycomponents1,includingtransporta- Thesetwometricsevaluateanagent‚Äôscapabilityoffollow-
tion,restaurants,attractions,andaccommodations,which ingindividualconstraintsvs.alltheconstraintsholistically.
areinitiallypresentedasnaturallanguage. Thesecompo-
nents are then organized into a formally structured plan, 3.5.Sole-PlanningSetting
1Inourexperiments,weuseGPT-4-Turboforthisextraction WhileTravelPlannerisdesignedtoassesstheoverallabil-
process.PleaserefertoAppendixB.3.5formoredetails. itiesofagentsintool-useandplanning(two-stagemode),
5TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Table3.MainresultsofdifferentLLMsandplanningstrategiesontheTravelPlannervalidationandtestset.Thebestresultsaremarked
inbold.Whenthecollectedinformationisinsufficient,GeminiProtendstodirectlyrefusetoprovidetheplan.Interviewswithannotators
revealthatmanuallyannotatingaplanaveragelytakesaround12minutes. However,languageagents,suchasGPT-3.5-Turbo,can
accomplishthistaskinjust1to2minutes,showcasingtheirefficiency.
Validation(#180) Test(#1,000)
Commonsense HardConstraint Commonsense HardConstraint
Delivery Final Delivery Final
PassRate PassRate PassRate PassRate
Rate PassRate Rate PassRate
Micro Macro Micro Macro Micro Macro Micro Macro
GreedySearch 100 74.4 0 60.8 37.8 0 100 72.0 0 52.4 31.8 0
Two-stage
Mistral-7B-32K(Jiangetal.,2023) 8.9 5.9 0 0 0 0 7.0 4.8 0 0 0 0
Mixtral-8√ó7B-MoE(Jiangetal.,2024) 49.4 30.0 0 1.2 0.6 0 51.2 32.2 0.2 0.7 0.4 0
GeminiPro(GTeametal.,2023) 28.9 18.9 0 0.5 0.6 0 39.1 24.9 0 0.6 0.1 0
GPT-3.5-Turbo(OpenAI,2022) 86.7 54.0 0 0 0 0 91.8 57.9 0 0.5 0.6 0
GPT-4-Turbo(OpenAI,2023) 89.4 61.1 2.8 15.2 10.6 0.6 93.1 63.3 2.0 10.5 5.5 0.6
Sole-planning
DirectGPT‚àí3.5‚àíTurbo 100 60.2 4.4 11.0 2.8 0 100 59.5 2.7 9.5 4.4 0.6
CoTGPT‚àí3.5‚àíTurbo 100 66.3 3.3 11.9 5.0 0 100 64.4 2.3 9.8 3.8 0.4
ReActGPT‚àí3.5‚àíTurbo 82.2 47.6 3.9 11.4 6.7 0.6 81.6 45.9 2.5 10.7 3.1 0.7
ReflexionGPT‚àí3.5‚àíTurbo 93.9 53.8 2.8 11.0 2.8 0 92.1 52.1 2.2 9.9 3.8 0.6
DirectMixtral‚àí8x7B‚àíMoE 100 68.1 5.0 3.3 1.1 0 99.3 67.0 3.7 3.9 1.6 0.7
DirectGeminiPro 93.9 65.0 8.3 9.3 4.4 0.6 93.7 64.7 7.9 10.6 4.7 2.1
DirectGPT‚àí4‚àíTurbo 100 80.4 17.2 47.1 22.2 4.4 100 80.6 15.2 44.3 23.1 4.4
wealsosetupasimplifiedmodesolelyevaluatingagents‚Äô LLMs. Duetothelongcontextwindowrequirementof
planning skills (sole-planning mode). In this setting, we ReActandthemassiveinformationastext,welimitourcon-
utilizehuman-annotatedplanstopre-determinethedestina- siderationtoLLMscapableofhandlinginputsexceeding8K
tioncities,andprovidedetailedandnecessaryinformation inlength. Asaresult,ourselectionincludesthreeclosed-
directlytoagents,suchasrestaurantsintheprovidedcities. source LLMs: GPT-3.5-Turbo (OpenAI, 2022), GPT-4-
Thiseliminatestheneedfortoolcallingasagentsdon‚Äôtneed Turbo (OpenAI, 2023), and Gemini Pro (G Team et al.,
tocollectinformationfromscratchviatoolsanymore. 2023), as well as two open-source LLMs: Mistral-7B-
32K (Jiang et al., 2023) and Mixtral-8x7B-MoE (Jiang
et al., 2024). For all these models, we adopt the official
4.Experiments
instructionformatswheneveravailable.
WeevaluatetheperformanceofvariousLLMsandplanning
strategiesonTravelPlanner. Inthetwo-stagemode,weuse
PlanningStrategies. Toexploretheeffectivenessofcur-
theReAct(Yaoetal.,2022)frameworkforinformationcol-
rent planning strategies, we evaluate four representative
lection,whichisrecognizedforitseffectiveiterationwith
ones: Direct,ZS-CoT(Weietal.,2022),ReAct(Yaoetal.,
tools (Zhuang et al., 2023) while varying the foundation
2022), andReflexion(Shinnetal.,2023). Fortheimple-
LLMs. This approach allows us to assess how different
mentationdetails,pleaserefertoAppendixB.1. Wedonot
LLMsperformunderauniformtool-useframework. The
includeToT(Yaoetal.,2023)andGoT(Bestaetal.,2023)
agents are required to give the plan directly based on the
because they require extensive exploration of the search
information collected by themselves, without employing
space,prohibitivelycostlyforproblemsascomplexasTrav-
anyotherplanningstrategies. Inthesole-planningmode,
elPlanner. Also,giventheirperformanceclosetoReActin
ourevaluationgoesbeyondvaryingLLMstoincludediffer-
complextasks(Zhuangetal.,2024),thepotentialbenefits
entplanningstrategies. Thisaimstoassessifthestrategies
ofthesemethodsmaybelimited.
proven effective in other planning benchmarks maintain
their efficacy in TravelPlanner. All experiments are con-
ductedinazero-shotsetting. 4.2.MainResults
Inthissection,wediscusstheperformanceofvariousLLMs
4.1.Baselines
andplanningstrategiesonTravelPlanner(Table3).Wehave
thefollowingobservations:
Greedy Search. To evaluate the effectiveness of tradi-
tionalrule-basedstrategieswithinTravelPlanner,weinclude TravelPlannerposesasignificantchallenge. Inthetwo-
greedysearchasabaselineandsetcostastheoptimization stagemode,GPT-4-TurbowithReActachievesonly0.6%in
objective. PleaserefertoAppendixB.1formoredetails. thefinalpassrate,andnoneoftheotherLLMscanpassany
6TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Max Step Limit Argument Error Invalid Action Dead Loop Same Action Dead Loop Table4.Constraint pass rate of GPT-4-Turbo on test set. The
12.8% 8.3%
20.3%
6.0% resultsofthesole-planningmodearebasedontheDirectstrategy.
Two-stage Sole-planning
30.4% 39.7% 2 4.0 9.1 %% 66.7% 5. 14 7% .6% 56.8% 37.3% 56.7% ConstraintType Easy Medium Hard Easy Medium Hard
17.1% CommonsenseConstraint
Mixtral-7√ó8B-MoE Gemini Pro GPT-3.5-Turbo GPT-4-Turbo WithinSandbox 37.4 31.2 33.9 76.4 71.5 79.3
CompleteInformation 53.4 52.9 58.0 94.5 96.4 96.2
Figure2.Tool-useerrordistributiononthetestset.Anearlystop WithinCurrentCity 69.3 67.3 68.3 89.1 80.8 82.4
willbetriggerediftheagenteithermakesthreeconsecutivefailed ReasonableCityRoute 44.5 45.6 54.9 99.4 99.7 99.1
attemptsorrepetitiveactions,indicatingadeadloop. DiverseRestaurants 85.1 81.4 86.8 91.1 89.8 87.8
DiverseAttractions 94.3 90.4 94.0 100.0 100.0 100.0
Non-conf.Transportation 70.1 73.3 83.1 60.1 56.5 87.5
ofthetasks. Evengivenallthenecessaryinformationinthe MinimumNightsStay 46.8 46.2 51.1 37.4 28.8 30.1
sole-planningmode,existingplanningstrategieslikeReAct HardConstraint
andReflexionstillstrugglewithplanninginTravelPlanner,
Budget 10.1 8.4 4.4 37.4 35.1 25.1
even though they have shown their effectiveness in more RoomRule - 5.6 11.3 - 31.5 43.6
conventionalplanningtasks. Itisnoteworthythatthebest- Cuisine - 10.8 11.4 - 57.5 46.7
RoomType - 12.4 13.8 - 45.7 56.7
performingagentstillfallsshortonhardconstraintseven
Transportation - - 18.6 - - 77.5
whencomparedtogreedysearch. Thispoorperformance
Final
underlines the difficulty of TravelPlanner and shows that
FinalPassRate 1.1 0.3 0.3 8.0 2.7 2.2
currentagentsstillstrugglewithcomplexplanning.
Table5.Comparisonofthenumbersofdifferenttoolusesbetween
Agentsshowasubstantialgapbetweenthetwomodes.
agent(GPT-4-Turbo)andreference.Theresultsofagentarebased
Thecomparisonofthetwomodesrevealstheagents‚Äôstrug-
onthenumberofentrieswrittenintothe‚ÄúNotebook‚Äù.
glesinfiddlingwithbothinformationcollectionandplan-
Agent Reference
ning. Across all metrics, the scores of any model in the Average
3-day5-day7-day3-day5-day7-day
two-stagemodearelowerthanthoseinthesole-planning
FlightSearch 0.7 1.2 0.8 2.0 3.0 4.0
mode,withthelargestgapreachingover30%. Similarto
DistanceMatrix 0.3 0.6 1.2 2.0 3.0 4.0
humans,languageagentsalsoseemtohavealimited‚Äúcog-
RestaurantSearch 0.9 1.5 2.4 1.0 2.0 3.0
nitive capacity‚Äù and their performance deteriorates when AttractionSearch 0.9 1.7 2.4 1.0 2.0 3.0
multitasking. WeprovideafurtheranalysisinSection5.2. AccommodationSearch 0.9 1.6 2.5 1.0 2.0 3.0
Agents struggle in obtaining a high macro pass rate.
1)Agentsincorrectlyusetools. ExceptforGPT-4-Turbo,
Whilesomeagentsachievehighmicroscores,theirmacro
otherLLMs-basedagentsallhaveargumenterrorproblems
scoresremainlow. Thispatternshowsthatalthoughagents
tovaryingdegrees. Itshedslightthattheuseofsimpletools
manage to satisfy some constraints, they often overlook
stillposesasignificantchallengeforagents. 2)Agentstrap
someotherconstraintsinthemeantime. Consequently,this
in dead loops. Even with GPT-4-Turbo, invalid actions
indicates the current agents fail to consider multiple con-
andrepetitiveactionloopscontributeto37.3%and6.0%of
straintsholistically,acriticalrequirementfornavigatingthe
errors,respectively. Despitereceivingfeedbackthatactions
complextasksinTravelPlanner.
areinvalidoryieldnullresults,agentspersistentlyrepeat
Insummary,TravelPlannerposesagreatchallengetocur- theseactions. Thissuggeststhatagentsfailtodynamically
rentagents.TheSoTALLMsandplanningstrategies,which adjusttheirplansbasedonenvironmentfeedback.
oftenshowequalorsuperiortohuman-levelperformance
on many traditional tasks, are still far from sufficient for 5.2.PlanningErrorAnalysis
complexplanningtasksthathumansarecapableof. Trav-
WedetaileachconstraintpassrateinTable4,fromwhich
elPlannerprovidesachallengingyetmeaningfulbenchmark
wehavethefollowingobservations:
forthedevelopmentofmorecapablelanguageagents.
Thenumberofhardconstraintsaffectstheperformance
5.In-DepthAnalysis ofagents. Agentsconsistentlyexhibitpassratesbelow10%
acrossalllevelsofdifficulty,andthisperformancedeterio-
5.1.Tool-UseErrorAnalysis ratesfurtherasmoreconstraintsareintroduced. Thistrend
highlightsthatcurrentagentsstrugglewithmulti-constraint
AsshowninTable3,evenbasedonGPT-4-Turbo,agents
tasks,akeyaspectofTravelPlanner.
stillmakemistakesintheprocessofinformationcollection
andthusfailtodeliveraplan. Thisproblemismoresevere Comprehensive information collection is essential for
in Gemini Pro and Mixtral. To delve into the underlying agentstoplaneffectively.Inthesole-planningmode,agent
causes,wecategorizeallerrortypesinFigure2. Wefind: performanceimprovesoverthetwo-stagemode. Toinvesti-
7TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Tool-use Direct Reflexion
Query: Please plan a travel itinerary for me. Query: Please create a travel itinerary for a Query: Can you help construct a travel plan
I'm departing from Cincinnati and heading to solo traveler departing from Jacksonville and that begins in Philadelphia and includes visits
Norfolk for three days. The dates of travel heading to Los Angeles for a period of 3 to 3 cities in Virginia? The trip duration is for
are from March 10th to March 12th, 2022. days, from March 25th to March 27th, 2022. 7 days, from March 15th to March 21st,
I have a budget of $1,400 for this trip. The budget for this trip is now set at $2,400. 2022, with a total budget of $1,800.
Trajectory: Plan: Trajectory:
Action 1: FlightSearch[Cincinnati, Norfolk, Day 1: ‚Ä¶
2023-03-10] transportation: Flight Number: F3765485, Observation 3: The cost of your current
Observation 1: There is no flight from from Jacksonville to Los Angeles plan is 316.0 dollars.
Cincinnati to Norfolk on 2023-03-10. ‚Ä¶
Action 2: FlightSearch[Cincinnati, Norfolk, accommodation: Midtown East 2 Bed/2 Bath Thought 4: I need to select a more
2023-03-09] Elevator Building Apt (7-day minimum night) budget-friendly accommodation to keep
Action 3: FlightSearch[Cincinnati, Norfolk, the overall trip within the $1,800 budget.
2023-03-11] Day 2: Action 4: CostEnquiry[{"transportation": "-",
Action 4: FlightSearch[Cincinnati, Richmond, ‚Ä¶ "breakfast": "-", "attraction": "Virginia
2023-03-10] accommodation: Midtown East 2 Bed/2 Bath Museum", "lunch": "Guang Zhou Chinese
‚Ä¶ Elevator Building Apt (7-day minimum night) Restaurant, Richmond", "dinner": "Sandpiper
Action 8: FlightSearch[Cincinnati, Charlotte, Restaurant & Lounge, Richmond",
2023-03-10] Day 3: "accommodation": "2 bd 2 bathroom
Action 9: I'm sorry, but as an AI transportation: Flight Number: F3765485, Apartment in Upper East Side, Richmond‚Äù}]
language model, I am unable to execute from Los Angeles to Jacksonville Observation 4: The cost of your plan is
actions or observe their outcomes. ‚Ä¶ 389.0 dollars.
Figure3.Casestudiesoffailures. Agentsfailtofinalizeplansduetorepeatederrorslikeincorrectdates,confusionwithinformation
detailsleadingtohallucinatoryanswers,anddisconnectsbetweenreasoningandactions.AllcasesaregainedfromGPT-4-Turbobased
agents.FordetailsofGPT-4-TurbowiththeReflexionstrategy,pleaserefertoAppendixB.2.WeprovidemorecasesinAppendixC.2.
gatethis,Table5showsagentsintwo-stagemodeusetools peatedfailureseventuallycausetheagentstostopplanning.
lesseffectivelycomparedtothereferenceplans. Thiscom- Thisindicatesasignificantlimitation: currentagentscannot
parisonindicatesthatagentsoftenfailtofinishcompleted self-correcttheirinitialandincorrectassumptions.
informationcollection. Consequently,theyeithergenerate
Agentsproducehallucinatoryanswersduetoinforma-
made-up information or omit specific details. This leads
tionconfusion. Tounderstandwhyagentsprovidehallu-
tolowpassratesforthe‚ÄúWithinSandbox‚Äùand‚ÄúComplete
cinatoryanswersevenwhensuppliedwithsufficientinfor-
Information‚Äùconstraints. Additionally,thisdiscrepancybe-
mation in the sole-planning mode, we conduct a detailed
comesmorepronouncedwithanincreaseinthedurationof
analysis. Weobserveatendencyforagentstoconfuseone
travel. Thisemphasizestheneedforagentstoimprovetheir
pieceofinformationwithanother. Asshowninthemiddle
capabilitiesinlong-horizontasks.
partofFigure3,agentsmistakenlyusethesameflightnum-
Agentsstrugglewithglobalplanningscenarios. Global berforbothdepartureandreturnflights. Sucherrorsresult
constraints‚ÄúMinimumNightsStay‚Äùand‚ÄúBudget‚Äùdemand inhallucinations, astheinformationprovidedintheplan
a holistic approach to planning, necessitating that agents doesnotalignwiththedatainthesandbox. Thissuggests
not only assess their current decisions but also anticipate thatagentsmightbelostwhenfacedwithmassinformation,
futureimplications. CurrentLLMs‚Äôauto-regressivenature knownas‚ÄúLostintheMiddle‚Äù(Liuetal.,2023b).
limitsthemtoindependentlyobtainoutcomesfrommultiple
Agentsstruggletoaligntheiractionswiththeirreason-
futurebranches. Thishighlightsthenecessityandurgent
ing. Tounderstandthereasonsbehindthelowerdelivery
needofnewstrategies,suchasbacktrackingforadjustingor
rateofReflexion(Shinnetal.,2023),weexaminespecific
employingheuristicmethodsforforward-lookingplanning.
examples. AsillustratedintherightpartofFigure3, we
observeadiscrepancybetweenwhatagentsthinkandwhat
5.3.CaseStudies
they do. Despite recognizing the necessity to minimize
Toinvestigatethedrawbacksofcurrentagentsin-depth,we costs, theytendtorandomlyselectitems, someofwhich
provideseveralfailurecasesinFigure3. Weconcludewith may be more expensive. This discrepancy demonstrates
thefollowingfeatures: thatagentsstruggletosynchronizetheiractionswiththeir
analyticalreasoning,severelyimpedingtheirdeliveryrate.
Agentsfailtocompleteaplanduetotheinabilitytorec-
tifypersistenterrors. Intool-usescenarios,agentsoften
6.Conclusion
failtodeliveraplanevenwhenallprecedingstepsareexe-
cutedcorrectly. Furtherinvestigationrevealsthatthisissue
WeintroduceTravelPlanner,abenchmarkgroundedinreal-
oftenstemsfromincorrectdateinputs. Asshownintheleft
world scenarios, designed to assess the multi-constraint
partofFigure3,despitecorrectexecution,agentsrepeatedly
planningandtool-useabilitiesofcurrentlanguageagents.
useincorrectdates. Thisleadstonullresults, asthedata
Ourbenchmarkpresentsasignificantchallenge: eventhe
in the TravelPlanner sandbox is based on 2022. Such re-
most advanced language agent frameworks only achieve
8TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
amere0.6%scoreinthefinalpassrate. Furtheranalysis Chen, H., Pasunuru, R., Weston, J., and Celikyilmaz,
shows that these agents are unable to take all constraints A. Walking down the memory maze: Beyond con-
intoconsiderationtodeliverfeasibleplans. text limit through interactive reading. arXiv preprint
arXiv:2310.05029,2023.
TravelPlanner‚Äôs intricate logic and general applicability
standasvitalcomponentsintheprogressivedevelopment
Cobbe,K.,Kosaraju,V.,Bavarian,M.,Chen,M.,Jun,H.,
oflanguageagents,thuscontributingtothebroaderquest
Kaiser,L.,Plappert,M.,Tworek,J.,Hilton,J.,Nakano,
for AI abilities. We envision TravelPlanner as a catalyst
R.,etal. Trainingverifierstosolvemathwordproblems.
forfutureresearch,aimingtoenhanceagents‚Äôperformance
arXivpreprintarXiv:2110.14168,2021.
in increasingly complex scenarios, hill-climbing towards
human-levelcognitivecapabilities. Cross,S.andEstrada,R. Dart: anexampleofaccelerated
evolutionarydevelopment. InProceedingsofWorkshop
7.ImpactStatements onRSP,1994.
TravelPlanneraimstoprovideaneffectivebenchmarkfor Deng,X.,Gu,Y.,Zheng,B.,Chen,S.,Stevens,S.,Wang,
complexplanninginfutureresearch.Someofthedatainthe B.,Sun,H.,andSu,Y. Mind2web: Towardsageneralist
TravelPlannerenvironmentisderivedfrompubliclyavail- agentfortheweb. InProceedingsofNeurIPS,2023.
abledataontheInternet,andthecontentinvolveddoesnot
represent the authors‚Äô viewpoints. We realize that every- GTeam,G.,Anil,R.,Borgeaud,S.,Wu,Y.,Alayrac,J.-B.,
one‚Äôs definition of commonsense may be different. Our Yu,J.,Soricut,R.,Schalkwyk,J.,Dai,A.M.,Hauth,A.,
current evaluation criteria are based on the authors‚Äô con- et al. Gemini: a family of highly capable multimodal
sensus,andweencourageadditionaldiscussionstoenrich models. arXivpreprintarXiv:2312.11805,2023.
ourcommonsensedimension,aimingforamorethorough
Ge,Y.,Hua,W.,Ji,J.,Tan,J.,Xu,S.,andZhang,Y. Ope-
evaluation. Wewillreleaseourevaluationscriptstofoster
nagi: Whenllmmeetsdomainexperts. InProceedingsof
innovationandaidthedevelopmentofnewmethods. We
NeurIPS,2023.
encourage the use of evaluation feedback in training set,
suchasimplementingreinforcementlearningtechniques,to
Georgievski, I. and Aiello, M. Htn planning: Overview,
enhancelearning. However,westrictlyprohibitanyformof
comparison,andbeyond. ArtificialIntelligence,2015.
cheatinginthevalidationandtestsetstoupholdthefairness
andreliabilityofthebenchmark‚Äôsevaluationprocess.
Grafman,J.,Spector,L.,andRattermann,M.J. Planning
andthebrain. InThecognitivepsychologyofplanning.
References 2004.
Alterovitz,R.,Koenig,S.,andLikhachev,M. Robotplan-
Hayes-Roth,B.andHayes-Roth,F. Acognitivemodelof
ningintherealworld: Researchchallengesandopportu-
planning. Cognitivescience,1979.
nities. AiMagazine,2016.
Ho,M.K.,Saxe,R.,andCushman,F. Planningwiththeory
Andreas,J. Languagemodelsasagentmodels. InFindings
ofmind. TrendsinCognitiveSciences,2022.
ofEMNLP,2022.
Huang,W.,Abbeel,P.,Pathak,D.,andMordatch,I. Lan-
AutoGPT. Autogpt, 2023. URL https://github.com/
guagemodelsaszero-shotplanners: Extractingaction-
Significant-Gravitas/AutoGPT.
ableknowledgeforembodiedagents. InProceedingsof
ICML,2022.
Besta,M.,Blach,N.,Kubicek,A.,Gerstenberger,R.,Gi-
aninazzi, L., Gajda, J., Lehmann, T., Podstawski, M.,
Ichter, B., Brohan, A., Chebotar, Y., Finn, C., Hausman,
Niewiadomski,H.,Nyczyk,P.,etal. Graphofthoughts:
K., Herzog, A., Ho, D., Ibarz, J., Irpan, A., Jang, E.,
Solvingelaborateproblemswithlargelanguagemodels.
Julian,R.,Kalashnikov,D.,Levine,S.,Lu,Y.,Parada,C.,
arXivpreprintarXiv:2308.09687,2023.
Rao,K.,Sermanet,P.,Toshev,A.,Vanhoucke,V.,Xia,F.,
Brown,T.,Mann,B.,Ryder,N.,Subbiah,M.,Kaplan,J.D., Xiao,T.,Xu, P., Yan, M.,Brown,N., Ahn,M., Cortes,
Dhariwal, P., Neelakantan, A., Shyam, P., Sastry, G., O.,Sievers,N.,Tan,C.,Xu,S.,Reyes,D.,Rettinghouse,
Askell,A.,etal. Languagemodelsarefew-shotlearners. J.,Quiambao,J.,Pastor,P.,Luu,L.,Lee,K.,Kuang,Y.,
InProceedingsofNeurIPS,2020. Jesmonth,S.,Joshi,N.J.,Jeffrey,K.,Ruano,R.J.,Hsu,
J.,Gopalakrishnan,K.,David,B.,Zeng,A.,andFu,C.K.
Campbell,M.,HoaneJr,A.J.,andHsu,F.-h. Deepblue. DoasIcan,notasIsay: Groundinglanguageinrobotic
Artificialintelligence,2002. affordances. InProceedingsofCoRL,2022.
9TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Jiang, A. Q., Sablayrolles, A., Mensch, A., Bamford, C., Nakajima,Y. Task-drivenautonomousagentutilizinggpt-4,
Chaplot,D.S.,Casas,D.d.l.,Bressand,F.,Lengyel,G., pinecone,andlangchainfordiverseapplications,2023.
Lample,G.,Saulnier,L.,etal. Mistral7b. arXivpreprint
Nakano,R.,Hilton,J.,Balaji,S.,Wu,J.,Ouyang,L.,Kim,
arXiv:2310.06825,2023.
C.,Hesse,C.,Jain,S.,Kosaraju,V.,Saunders,W.,etal.
Jiang, A. Q., Sablayrolles, A., Roux, A., Mensch, A., Webgpt: Browser-assistedquestion-answeringwithhu-
Savary, B., Bamford, C., Chaplot, D. S., de las Casas, manfeedback. arXivpreprintarXiv:2112.09332,2021.
D., Hanna, E. B., Bressand, F., Lengyel, G., Bour, G.,
OpenAI. Chatgpt, 2022. URL https://openai.com/
Lample, G., Lavaud, L. R., Saulnier, L., Lachaux, M.-
blog/chatgpt.
A., Stock, P., Subramanian, S., Yang, S., Antoniak, S.,
Scao,T.L.,Gervet,T.,Lavril,T.,Wang,T.,Lacroix,T.,
OpenAI. Gpt-4 technical report. arXiv preprint
and Sayed, W. E. Mixtral of experts. arXiv preprint
arXiv:2303.08774,2023.
arXiv:2401.04088,2024.
Park, J. S., O‚ÄôBrien, J., Cai, C. J., Morris, M. R., Liang,
Karpas, E. and Magazzeni, D. Automated planning for
P.,andBernstein,M.S. Generativeagents: Interactive
robotics. AnnualReviewofControl, Robotics, andAu-
simulacraofhumanbehavior. InProceedingsofUIST,
tonomousSystems,2020.
2023.
Lewkowycz, A., Andreassen, A., Dohan, D., Dyer, E.,
Patel,A.,Bhattamishra,S.,andGoyal,N. AreNLPmodels
Michalewski, H., Ramasesh, V.V., Slone, A., Anil, C.,
really able to solve simple math word problems? In
Schlag,I.,Gutman-Solo,T.,Wu,Y.,Neyshabur,B.,Gur-
ProceedingsofNAACL,2021.
Ari,G.,andMisra,V.Solvingquantitativereasoningprob-
lemswithlanguagemodels. InProceedingsofNeurIPS, Patil,S.G.,Zhang,T.,Wang,X.,andGonzalez,J.E.Gorilla:
2022. Largelanguagemodelconnectedwithmassiveapis.arXiv
preprintarXiv:2305.15334,2023.
Li, M., Zhao, Y., Yu, B., Song, F., Li, H., Yu, H., Li, Z.,
Huang,F.,andLi,Y. Api-bank: Acomprehensivebench- Pinedo,M. Planningandschedulinginmanufacturingand
markfortool-augmentedllms.InProceedingsofEMNLP, services. Springer,2005.
2023.
Qin,Y.,Liang,S.,Ye,Y.,Zhu,K.,Yan,L.,Lu,Y.,Lin,Y.,
Liang,X.,Wang,B.,Huang,H.,Wu,S.,Wu,P.,Lu,L.,Ma, Cong,X.,Tang,X.,Qian,B.,etal. Toolllm: Facilitating
Z.,andLi,Z.Unleashinginfinite-lengthinputcapacityfor largelanguagemodelstomaster16000+real-worldapis.
large-scalelanguagemodelswithself-controlledmemory InProceedingsofICLR,2024.
system. arXivpreprintarXiv:2304.13343,2023.
Roy, S. and Roth, D. Solving general arithmetic word
Liu, B., Jiang, Y., Zhang, X., Liu, Q., Zhang, S., Biswas, problems. InProceedingsofEMNLP,2015.
J., and Stone, P. Llm+ p: Empowering large language
Russell,S.J.andNorvig,P. Artificialintelligenceamodern
modelswithoptimalplanningproficiency. arXivpreprint
approach. 2010.
arXiv:2304.11477,2023a.
Schick,T.,Dwivedi-Yu,J.,Dessi,R.,Raileanu,R.,Lomeli,
Liu, N. F., Lin, K., Hewitt, J., Paranjape, A., Bevilac-
M., Hambro, E., Zettlemoyer, L., Cancedda, N., and
qua, M., Petroni, F., and Liang, P. Lost in the middle:
Scialom, T. Toolformer: Language models can teach
Howlanguagemodelsuselongcontexts. arXivpreprint
themselves to use tools. In Proceedings of NeurIPS,
arXiv:2307.03172,2023b.
2023.
Liu, X., Yu, H., Zhang, H., Xu, Y., Lei, X., Lai, H., Gu,
Shen, Y., Song, K., Tan, X., Li, D., Lu, W., and Zhuang,
Y., Ding, H., Men, K., Yang, K., et al. Agentbench:
Y. HuggingGPT: Solving AI tasks with chatGPT and
Evaluatingllmsasagents. InProceedingsofICLR,2024.
itsfriendsinhuggingface. InProceedingsofNeurIPS,
Lu,P.,Peng,B.,Cheng,H.,Galley,M.,Chang,K.-W.,Wu, 2023.
Y.N.,Zhu,S.-C.,andGao,J. Chameleon: Plug-and-play
Shinn, N., Cassano, F., Gopinath, A., Narasimhan, K.R.,
compositionalreasoningwithlargelanguagemodels. In
and Yao, S. Reflexion: Language agents with verbal
ProceedingsofNeurIPS,2023.
reinforcementlearning. InProceedingsofNeurIPS,2023.
Mattar,M.G.andLengyel,M. Planninginthebrain. Neu-
Silver,D.,Huang,A.,Maddison,C.J.,Guez,A.,Sifre,L.,
ron,2022.
VanDenDriessche,G.,Schrittwieser,J.,Antonoglou,I.,
McDermott,D. Robotplanning. AImagazine,1992. Panneershelvam, V., Lanctot, M., et al. Mastering the
10TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
gameofgo with deepneuralnetworksandtreesearch. Xu, Q., Hong, F., Li, B., Hu, C., Chen, Z., and Zhang,
nature,2016. J. On the tool manipulation capability of open-source
largelanguagemodels. arXivpreprintarXiv:2305.16504,
Silver, D., Hasselt, H., Hessel, M., Schaul, T., Guez, A., 2023.
Harley,T.,Dulac-Arnold,G.,Reichert,D.,Rabinowitz,
N.,Barreto,A.,etal.Thepredictron:End-to-endlearning Yao,S.,Zhao,J.,Yu,D.,Du,N.,Shafran,I.,Narasimhan,
andplanning. InProceedingsofICML,2017. K. R., and Cao, Y. React: Synergizing reasoning and
actinginlanguagemodels. InProceedingsofICLR,2022.
Song,C.H.,Wu,J.,Washington,C.,Sadler,B.M.,Chao,
Yao,S.,Yu,D.,Zhao,J.,Shafran,I.,Griffiths,T.L.,Cao,Y.,
W.-L.,andSu,Y. Llm-planner: Few-shotgroundedplan-
andNarasimhan,K.R. Treeofthoughts:Deliberateprob-
ningforembodiedagentswithlargelanguagemodels. In
lemsolvingwithlargelanguagemodels. InProceedings
ProceedingsofICCV,2023.
ofNeurIPS,2023.
Su,Y. Languageagents: acriticalevolutionarystepofartifi-
Yuan,S.,Chen,J.,Fu,Z.,Ge,X.,Shah,S.,Jankowski,C.,
cialintelligence. 2023. URLhttps://yusu.substack.
Xiao,Y.,andYang,D. Distillingscriptknowledgefrom
com/p/language-agents.
largelanguagemodelsforconstrainedlanguageplanning.
InProceedingsofACL,2023.
Sumers, T. R., Yao, S., Narasimhan, K., and Griffiths,
T.L. Cognitivearchitecturesforlanguageagents. arXiv
Zheng,B.,Gou,B.,Kil,J.,Sun,H.,andSu,Y.Gpt-4v(ision)
preprintarXiv:2309.02427,2023.
is a generalist web agent, if grounded. arXiv preprint
arXiv:2401.01614,2024.
Touvron,H.,Lavril,T.,Izacard,G.,Martinet,X.,Lachaux,
M.-A.,Lacroix,T.,Rozi√®re,B.,Goyal,N.,Hambro,E., Zhong,W.,Guo,L.,Gao,Q.,andWang,Y. Memorybank:
Azhar,F.,etal. Llama:Openandefficientfoundationlan- Enhancinglargelanguagemodelswithlong-termmem-
guagemodels. arXivpreprintarXiv:2302.13971,2023a. ory. arXivpreprintarXiv:2305.10250,2023.
Touvron, H., Martin, L., Stone, K., Albert, P., Almahairi, Zhou,S.,Xu,F.F.,Zhu,H.,Zhou,X.,Lo,R.,Sridhar,A.,
A., Babaei, Y., Bashlykov, N., Batra, S., Bhargava, P., Cheng,X.,Bisk,Y.,Fried,D.,Alon,U.,etal. Webarena:
Bhosale,S.,etal. Llama2: Openfoundationandfine- A realistic web environment for building autonomous
tuned chat models. arXiv preprint arXiv:2307.09288, agents. InProceedingsofICLR,2024.
2023b.
Zhou, W., Jiang, Y. E., Cui, P., Wang, T., Xiao, Z., Hou,
Y.,Cotterell,R.,andSachan,M. Recurrentgpt: Interac-
Valmeekam,K.,Olmo,A.,Sreedharan,S.,andKambham-
tivegenerationof(arbitrarily)longtext. arXivpreprint
pati,S. Planbench: Anextensiblebenchmarkforevalu-
arXiv:2305.13304,2023.
atinglargelanguagemodelsonplanningandreasoning
aboutchange. InProceedingsofNeurIPS,2023.
Zhuang, Y., Yu, Y., Wang, K., Sun, H., and Zhang, C.
ToolQA: A dataset for LLM question answering with
Wang,G.,Xie,Y.,Jiang,Y.,Mandlekar,A.,Xiao,C.,Zhu,
externaltools. InProceedingsofNeurIPS,2023.
Y., Fan, L., and Anandkumar, A. Voyager: An open-
endedembodiedagentwithlargelanguagemodels. arXiv Zhuang,Y.,Chen,X.,Yu,T.,Mitra,S.,Bursztyn,V.,Rossi,
preprintarXiv:2305.16291,2023. R.A.,Sarkhel,S.,andZhang,C. Toolchain*: Efficient
actionspacenavigationinlargelanguagemodelswitha*
Wei, J., Wang, X., Schuurmans, D., Bosma, M., Xia, F.,
search. InProceedingsofICLR,2024.
Chi, E., Le, Q. V., Zhou, D., et al. Chain-of-thought
promptingelicitsreasoninginlargelanguagemodels. In
ProceedingsofNeurIPS,2022.
Weng, L. Llm-powered autonomous agents. lilian-
weng.github.io,Jun2023. URLhttps://lilianweng.
github.io/posts/2023-06-23-agent/.
Xie,T.,Zhou,F.,Cheng,Z.,Shi,P.,Weng,L.,Liu,Y.,Hua,
T.J.,Zhao,J.,Liu,Q.,Liu,C.,Liu,L.Z.,Xu,Y.,Su,H.,
Shin, D., Xiong, C., and Yu, T. Openagents: An open
platformforlanguageagentsinthewild. arXivpreprint
arXiv:2310.10634,2023.
11TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Appendices
Withinthissupplementarymaterial,weelaborateonthefollowingaspects:
‚Ä¢ AppendixA:BenchmarkDetails
‚Ä¢ AppendixB:ExperimentDetails
‚Ä¢ AppendixC:CasePresentation
A.BenchmarkDetails
A.1.DatasetDistribution
InTableA.1,welistthedetailedgroupdistributionontraining,validationandtestset.
TableA.1. Datasetdistribution.
Days Easy Medium Hard
3-day 5 5 5
Training(#45) 5-day 5 5 5
7-day 5 5 5
3-day 20 20 20
Validation(#180) 5-day 20 20 20
7-day 20 20 20
3-day 122 104 82
Test(#1,000) 5-day 116 114 121
7-day 110 115 116
A.2.ToolDescription
InTableA.2,welistthedetailedtooldescription. TheoriginaldataforeachtoolissourcedfrompubliclyavailableInternet
data. Wethenmodifythisdata,whichincludesadding,deleting,andalteringcertainkeysandvaluestosuitourrequirements.
Inthisway,weeffectivelyavoidtheproblemofdatacontamination. Formoredetails,pleaserefertoAppendixA.3.
TableA.2. Tooldescriptionandthenumberofdataentriesinthedatabase.
Tool DataEntries(#) Description
CitySearch 312 Searchcitiesinthegivenstate.
FlightSearch 3,827,361 Searchflightinformationforaspecificdatebetweentwocities.
DistanceMatrix 17,603 Searchthedrivingdistance,time,andpossiblecostbetweentwocities.
RestaurantSearch 9,552 Searchrestaurantsinthegivencity.
AttractionSearch 5,303 Searchattractionsinthegivencity.
AccommodationSearch 5,064 Searchaccommodationsinthegivencity.
NotebookWrite - WritetheselecteddataentryintotheNotebooktoolwithashortdescription.
A.3.EnvironmentDatabaseConstruction
FlightSearch ForFlightSearch,wesourceoriginaldatafromtheKaggleFlightStatusPredictiondataset2. Fromthis
dataset, we extract data spanning from 2022-03-01 to 2022-04-01. We specifically included fields like ‚ÄúFlightDate‚Äù,
‚ÄúDepTime‚Äù,‚ÄúArrTime‚Äù,‚ÄúActualElapsedTime‚Äù,‚ÄúDistance‚Äù,‚ÄúOriginCityName‚Äù,and‚ÄúDestCityName‚Äùwhilediscardingother
values. Toincorporate‚ÄúPrice‚Äùintoourdataset,wegeneratethisvaluebymultiplyingthe‚ÄúDistance‚Äùbyarandomfactor
2https://www.kaggle.com/datasets/robikscube/flight-delay-dataset-20182022?select=Combined_Flights_2022.
csv
12TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
rangingfrom0.2to0.5.
DistanceMatrix WeutilizetheGoogleDistanceMatrixAPI3tocalculatethedrivingdistanceandestimatedtraveltime
betweentwocities. Forthe‚Äúself-driving‚Äùand‚Äútaxi‚Äùmodesoftransportation,wecalculatethe‚ÄôPrice‚Äôbymultiplyingthe
‚ÄôDistance‚Äôbyfactorsof1and0.15,respectively. Toensureconsistencyandreliabilityofdata,westorethesearchresultsin
ourdatabase,therebycreatingafixeddatasetforourevaluations.
RestaurantSearch Our restaurant data is sourced from the Kaggle Zomato Restaurants Dataset4. From this dataset,
weextractthe‚ÄúRestaurantName‚Äùand‚ÄúAverageCost‚Äùforeachestablishment. Subsequently,werandomlyassignthese
restaurantstovariouscities. ToalignwiththeconstraintrequirementsofTravelPlanner,wealsorandomlycategorizeeach
restaurantunderthefollowingcuisines: ‚ÄúChinese‚Äù,‚ÄúAmerican‚Äù,‚ÄúItalian‚Äù,‚ÄúMexican‚Äù,‚ÄúIndian‚Äù,‚ÄúMediterranean‚Äù,‚ÄúMiddle
Eastern‚Äù,‚ÄúKorean‚Äù,‚ÄúAsian‚Äù,‚ÄúFrench‚Äù.
AttractionSearch ForAttractionSearch,weemploytheGooglePlacesAPI5 togatherinformationaboutattractionsin
eachcity. InTravelPlanner,weretainessentialdetailssuchas‚ÄúName‚Äù,‚ÄúAddress‚Äù,‚ÄúPhone‚Äù,‚ÄúWebsite‚Äù,‚ÄúLatitude‚Äù,and
‚ÄúLongtitue‚Äùforeachattraction. Tomaintaindataconsistencyandreliability,westorethesesearchresultsinourdatabase,
creatingastandardizeddatasetforouranalyses.
AccommodationSearch OuraccommodationdataisobtainedfromtheKaggleAirbnbOpenDataDataset6. Fromthis
dataset,weextractkeydetails‚ÄúNAME‚Äù,‚Äúroomtype‚Äù,‚Äúprice‚Äù,‚Äúminimumnights‚Äù,‚Äúreviewratenumber‚Äù,and‚Äúmaximum
occupancy‚Äù.Itemsarethenrandomlyassignedtovariouscities.TomeetthespecificconstraintrequirementsofTravelPlanner,
wealsoassigneachitemrandomroomrules,including‚ÄúNoparties‚Äù,‚ÄúNosmoking‚Äù,‚ÄúNochildrenunder10‚Äù,‚ÄúNopets‚Äù,
and‚ÄúNovisitors‚Äù.
B.ExperimentDetails
B.1.Baselines
GreedySearch ToassesstheeffectivenessoftraditionalsearchalgorithmsinTravelPlanner,weintegrateagreedysearch
approach,focusingonminimizingcosts. For5or7-daytravelplans,thefirstoneortwocitiesinthereturnedcitysearch
resultareselectedasdestinations. Thetransportationchoiceisbasedonthelowestcostoptionamongflights,taxis,and
self-driving.Thedietcomponentinvolvesselectingtherestaurantwiththelowestaveragecost.Thecheapestaccommodation
ischosenforlodging. Forattractions,weoptforarandomselectionforeachdayoftheitinerary.
PlanningStrategy Currentplanningstrategieshaveshowneffectivenessintraditionaltaskslikemathematicalproblem-
solving,buttheircapabilitytohandlethemorecomplexandconstrainedscenarioslikeTravelPlannerremainstobeseen.
Toexplorethis, weevaluatefourdistinctplanningstrategiesonTravelPlanner: 1)Direct: Inthismethod, thequeryis
inputdirectlyintothemodelalongwithinstructionsdetailingthetaskandrelevantinformationgathered. 2)ZS-CoT(Wei
etal.,2022): Thisstrategyenhancesthereasoningprocessbyrequiringintermediatesteps. BuildingontheDirectmethod,
weaddtheprompt‚ÄúLet‚Äôsthinkstepbystep‚Äùtoelicitreasoning. 3)ReAct(Yaoetal.,2022): Thisstrategyincorporates
environmentalfeedbackintothereasoningprocess. Thus,itenhancesthelanguageagent‚Äôsreasoningabilitybyoffering
additional information. In TravelPlanner, we provide the cost associated with each entire day‚Äôs plan as environmental
feedback. 4)Reflexion(Shinnetal.,2023): Thisapproachutilizesareflectionmodeltoprovidehigh-levelinsightson
previouserroneousattempts. Suchreflectiveguidanceaidslanguageagentsinidentifyingandcorrectingflawedreasoning.
Inordertocontrolthecost,weconducttestsonDirectusingfourdifferentmodels,whiletheotherstrategiesareevaluated
usingGPT-3.5-Turbo. DetailedinstructionsforeachstrategyareavailableinAppendixB.3.
B.2.GPT-4-TurbowithReflexionstrategyinsole-planningmode.
WeprovidetheresultsofGPT-4-TurbowithReflexionstrategyonvalidationsetinTableB.3.
3https://developers.google.com/maps/documentation/distance-matrix/overview?hl=en
4https://www.kaggle.com/datasets/shrutimehta/zomato-restaurants-data
5https://developers.google.com/maps/documentation/places/web-service/overview?hl=en
6https://www.kaggle.com/datasets/arianazmoudeh/airbnbopendata
13TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
TableB.3. GPT-4-TurbowithReflexionstrategyonvalidationset.
Commonsense HardConstraint
Delivery Final
PassRate PassRate
Rate PassRate
Micro Macro Micro Macro
Reflexion 80.6 62.9 6.1 52.4 40.0 3.3
GPT‚àí4‚àíTurbo
B.3.PromptList
B.3.1.TOOL-USEPROMPT
WetailortheReAct(Yaoetal.,2022)frameworktosuitourspecificrequirementsinTravelPlanner. Anexampleofthe
instructionpromptforourneedsisasfollows:
(cid:7) (cid:4)
Collect information for a query plan using interleaving 'Thought', 'Action', and '
Observation' steps. Ensure you gather valid information related to transportation, dining,
attractions, and accommodation. All information should be written in Notebook, which
will then be input into the Planner tool. Note that the nested use of tools is prohibited
. 'Thought' can reason about the current situation, and 'Action' can have 8 different
types:
(1) FlightSearch[Departure City, Destination City, Date]:
Description:
A flight information retrieval tool.
Parameters:
Departure City: The city you'll be flying out from.
Destination City: The city you aim to reach.
Date: The date of your travel in YYYY-MM-DD format.
Example: FlightSearch[New York, London, 2022-10-01] would fetch flights from New York to
London on October 1, 2022.
(2) DistanceMatrix[Origin, Destination, Mode]:
Description: Estimate the distance, time and cost between two cities.
Parameters:
Origin: The departure city of your journey.
Destination: The destination city of your journey.
Mode: The method of transportation. Choices include 'self-driving' and 'taxi'.
Example: DistanceMatrix[Paris, Lyon, self-driving] would provide driving distance, time
and cost between Paris and Lyon.
(3) AccommodationSearch[City]:
Description: Discover accommodations in your desired city.
Parameter: City - The name of the city where you're seeking accommodation.
Example: AccommodationSearch[Rome] would present a list of hotel rooms in Rome.
(4) RestaurantSearch[City]:
Description: Explore dining options in a city of your choice.
Parameter: City - The name of the city where you're seeking restaurant.
Example: RestaurantSearch[Tokyo] would show a curated list of restaurants in Tokyo.
(5) AttractionSearch[City]:
Description: Find attractions in a city of your choice.
Parameter: City - The name of the city where you're seeking attractions.
Example: AttractionSearch[London] would return attractions in London.
(6) CitySearch[State]
Description: Find cities in a state of your choice.
Parameter: State - The name of the city where you're seeking cities.
Example: CitySearch[California] would return cities in California.
(7) NotebookWrite[Short Description]
Description: Writes a new data entry into the Notebook tool with a short description. This
tool should be used immediately after FlightSearch, AccommodationSearch, AttractionSearch
14TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
, RestaurantSearch or DistanceMatrix. Only the data stored in Notebook can be seen by
Planner. So you should write all the information you need into Notebook.
Parameters: Short Description - A brief description or label for the stored data.
You don't need to write all the information in the description.
The data you've searched for will be automatically stored in the Notebook.
Example: NotebookWrite[Flights from Rome to Paris in 2022-02-01] would store the
informatrion of flights from Rome to Paris in 2022-02-01 in the Notebook.
(8) Planner[Query]
Description: A smart planning tool that crafts detailed plans based on user input and the
information stroed in Notebook.
Parameters:
Query: The query from user.
Example: Planner[Give me a 3-day trip plan from Seattle to New York] would return a
detailed 3-day trip plan.
You should use as many as possible steps to collect engough information to input to the
Planner tool.
Each action only calls one function once. Do not add any description in the action.
Query: {query}
(cid:6) (cid:5)
B.3.2.DIRECTPLANNINGPROMPT
WeprovidetheinstructionpromptofDirectstrategyasfollows:
(cid:7) (cid:4)
You are a proficient planner. Based on the provided information and query, please give me
a detailed plan, including specifics such as flight numbers (e.g., F0123456), restaurant
names, and accommodation names. Note that all the information in your plan should be
derived from the provided data. You must adhere to the format given in the example.
Additionally, all details should align with commonsense. The symbol '-' indicates that
information is unnecessary. For example, in the provided sample, you do not need to plan
after returning to the departure city. When you travel to two cities in one day, you
should note it in the 'Current City' section as in the example (i.e., from A to B).
***** Example *****
Query: Could you create a challenging travel plan for 7 people from Roanoke to Illinois
spanning a week, from March 8th to March 14th, 2022, with a budget of $30,200? The
preference is for an entire room, and we would not be taking any flights. In terms of
cuisine, we are interested in sampling some Italian and Chinese food.
Travel Plan:
Day 1:
Current City: from Ithaca to Charlotte
Transportation: Flight Number: F3633413, from Ithaca to Charlotte, Departure Time: 05:38,
Arrival Time: 07:46
Breakfast: Nagaland's Kitchen, Charlotte
Attraction: The Charlotte Museum of History, Charlotte
Lunch: Cafe Maple Street, Charlotte
Dinner: Bombay Vada Pav, Charlotte
Accommodation: Affordable Spacious Refurbished Room in Bushwick!, Charlotte
Day 2:
Current City: Charlotte
Transportation: -
Breakfast: Olive Tree Cafe, Charlotte
Attraction: The Mint Museum, Charlotte;Romare Bearden Park, Charlotte.
Lunch: Birbal Ji Dhaba, Charlotte
Dinner: Pind Balluchi, Charlotte
Accommodation: Affordable Spacious Refurbished Room in Bushwick!, Charlotte
Day 3:
Current City: Charlotte
Transportation: Flight Number: F3786167, from Charlotte to Ithaca,
Departure Time: 21:42, Arrival Time: 23:26
15TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Breakfast: Subway, Charlotte
Attraction: Books Monument, Charlotte.
Lunch: Olive Tree Cafe, Charlotte
Dinner: Kylin Skybar, Charlotte
Accommodation: -
***** Example Ends *****
Given information: {text}
Query: {query}
Travel Plan:
(cid:6) (cid:5)
B.3.3.REACT&REFLEXIONPLANNINGPROMPT
TheinstructionpromptsfortheReactandReflexionplanningstrategiesareprovidedasfollows:
(cid:7) (cid:4)
You are a proficient planner. Based on the provided information and query, please give me
a detailed plan, including specifics such as flight numbers (e.g., F0123456), restaurant
names, and hotel names. Note that all the information in your plan should be derived from
the provided data. You must adhere to the format given in the example. Additionally, all
details should align with common sense. Attraction visits and meals are expected to be
diverse. The symbol '-' indicates that information is unnecessary. For example, in the
provided sample, you do not need to plan after returning to the departure city. When you
travel to two cities in one day, you should note it in the 'Current City' section as in
the example (i.e., from A to B). Solve this task by alternating between Thought, Action,
and Observation steps. The 'Thought' phase involves reasoning about the current situation.
The 'Action' phase can be of two types:
(1) CostEnquiry[Sub Plan]: This function calculates the cost of a detailed sub plan, which
you need to input the people number and plan in JSON format. The sub plan should
encompass a complete one-day plan. An example will be provided for reference.
(2) Finish[Final Plan]: Use this function to indicate the completion of the task.
You must submit a final, complete plan as an argument.
***** Example *****
Query: Could you create a challenging travel plan for 7 people from Roanoke to Illinois
spanning a week, from March 8th to March 14th, 2022, with a budget of $30,200? The
preference is for an entire room, and we would not be taking any flights. In terms of
cuisine, we are interested in sampling some Italian and Chinese food.You can call
CostEuquiry like CostEuquiry[{{"people_number": 7,"day": 1,"current_city": "from Ithaca to
Charlotte","transportation": "Flight Number: F3633413, from Ithaca to Charlotte,
Departure Time: 05:38, Arrival Time: 07:46","breakfast": "Nagaland's Kitchen, Charlotte","
attraction": "The Charlotte Museum of History, Charlotte","lunch": "Cafe Maple Street,
Charlotte","dinner": "Bombay Vada Pav, Charlotte","accommodation": "Affordable Spacious
Refurbished Room in Bushwick!, Charlotte"}}]
You can call Finish like Finish[
Day: 1
Current City: from Ithaca to Charlotte
Transportation: Flight Number: F3633413, from Ithaca to Charlotte, Departure Time: 05:38,
Arrival Time: 07:46
Breakfast: Nagaland's Kitchen, Charlotte
Attraction: The Charlotte Museum of History, Charlotte
Lunch: Cafe Maple Street, Charlotte
Dinner: Bombay Vada Pav, Charlotte
Accommodation: Affordable Spacious Refurbished Room in Bushwick!, Charlotte
Day 2:
Current City: Charlotte
Transportation: -
Breakfast: Olive Tree Cafe, Charlotte
Attraction: The Mint Museum, Charlotte;Romare Bearden Park, Charlotte.
Lunch: Birbal Ji Dhaba, Charlotte
Dinner: Pind Balluchi, Charlotte
Accommodation: Affordable Spacious Refurbished Room in Bushwick!, Charlotte
16TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Day 3:
Current City: Charlotte
Transportation: Flight Number: F3786167, from Charlotte to Ithaca, Departure Time: 21:42,
Arrival Time: 23:26
Breakfast: Subway, Charlotte
Attraction: Books Monument, Charlotte.
Lunch: Olive Tree Cafe, Charlotte
Dinner: Kylin Skybar, Charlotte
Accommodation: -]
***** Example Ends *****
You must use Finish to indict you have finished the task. And each action only calls one
function once.
Given information: {text}
Query: {query}
(cid:6) (cid:5)
B.3.4.QUERYGENERATIONPROMPT
Theinstructionpromptforquerygenerationisprovidedasfollows:
(cid:7) (cid:4)
Given a JSON, please help me generate a natural language query. In the JSON, 'org' denotes
the departure city. When 'days' exceeds 3, 'visiting_city_number' specifies the number of
cities to be covered in the destination state. Here are three examples.
-----EXAMPLE 1-----
JSON:
{"org": "Gulfport", "dest": "Charlotte", "days": 3, "visiting_city_number": 1, "date":
["2022-03-05", "2022-03-06", "2022-03-07"], "people_number": 1, "constraint": {"room rule
": null, "cuisine": null, "room type": null}, "budget": 1800}
QUERY:
Please design a travel plan departing Gulfport and heading to Charlotte for 3 days,
spanning March 5th to March 7th, 2022, with a budget of $1800.
-----EXAMPLE 2-----
JSON:
{"org": "Omaha", "dest": "Colorado", "days": 5, "visiting_city_number": 2, "date":
["2022-03-14", "2022-03-15", "2022-03-16", "2022-03-17", "2022-03-18"], "people_number":
7, "constraint": {"room rule": "pets", "cuisine": null, "room type": null}, "budget":
35300}
QUERY:
Could you provide a 5-day travel itinerary for a group of 7, starting in Omaha and
exploring 2 cities in Colorado between March 14th and March 18th, 2022? Our budget is set
at $35,300, and it's essential that our accommodations be pet-friendly since we're
bringing our pets.
-----EXAMPLE 3-----
JSON:
{"org": "Indianapolis", "dest": "Georgia", "days": 7, "visiting_city_number": 3, "date":
["2022-03-01", "2022-03-02", "2022-03-03", "2022-03-04", "2022-03-05", "2022-03-06",
"2022-03-07"], "people_number": 2, "constraint": {"room rule": null, "cuisine": ["Bakery",
"Indian"], "room type": "entire room", "transportation": "self driving"}, "budget": 6200}
QUERY:
I'm looking for a week-long travel itinerary for 2 individuals. Our journey starts in
Indianapolis, and we intend to explore 3 distinct cities in Georgia from March 1st to
March 7th, 2022. Our budget is capped at $6,200. For our accommodations, we'd prefer an
entire room. We plan to navigate our journey via self-driving. In terms of food, we're
enthusiasts of bakery items, and we'd also appreciate indulging in genuine Indian cuisine.
-----EXAMPLES END-----
JSON: {json}
QUERY:
(cid:6) (cid:5)
B.3.5.KEYCOMPONENTSEXTRACTIONPROMPT
Theinstructionpromptforplankeycomponentsextractionisprovidedasfollows:
17TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
(cid:7) (cid:4)
Please assist me in extracting valid information from a given natural language text and
reconstructing it in JSON format, as demonstrated in the following example. Use a ';' to
separate different attractions, with each attraction formatted as 'Name, City'. If there's
information about transportation, ensure that the 'current_city' aligns with the
destination mentioned in the transportation details (i.e., the current city should follow
the format 'from A to B'). Also, ensure that all flight numbers and costs are followed by
a colon (i.e., 'Flight Number:' and 'Cost:'), consistent with the provided example. Each
item should include ['day', 'current_city', 'transportation', 'breakfast', 'attraction', '
lunch', 'dinner', 'accommodation']. Replace non-specific information like 'eat at home/on
the road' with '-'. Additionally, delete any '$' symbols.
-----EXAMPLE-----
[{{
"days": 1,
"current_city": "from Dallas to Peoria",
"transportation": "Flight Number: 4044830, from Dallas to Peoria, Departure Time:
13:10, Arrival Time: 15:01",
"breakfast": "-",
"attraction": "Peoria Historical Society, Peoria;Peoria Holocaust Memorial, Peoria
;",
"lunch": "-",
"dinner": "Tandoor Ka Zaika, Peoria",
"accommodation": "Bushwick Music Mansion, Peoria"
}},
{{
"days": 2,
"current_city": "Peoria",
"transportation": "-",
"breakfast": "Tandoor Ka Zaika, Peoria",
"attraction": "Peoria Riverfront Park, Peoria;The Peoria PlayHouse, Peoria;Glen
Oak Park, Peoria;",
"lunch": "Cafe Hashtag LoL, Peoria",
"dinner": "The Curzon Room - Maidens Hotel, Peoria",
"accommodation": "Bushwick Music Mansion, Peoria"
}},
{{
"days": 3,
"current_city": "from Peoria to Dallas",
"transportation": "Flight Number: 4045904, from Peoria to Dallas, Departure Time:
07:09, Arrival Time: 09:20",
"breakfast": "-",
"attraction": "-",
"lunch": "-",
"dinner": "-",
"accommodation": "-"
}}]
-----EXAMPLE ENDS-----
Text: {text}
JSON:
(cid:6) (cid:5)
C.CasePresentation
C.1.ExampleofQueryandReferencePlan
wepresentanexampleofaqueryanditscorrespondingreferenceplaninourtrainsetasfollows:
(cid:7) (cid:4)
{
"org": "Indianapolis",
"dest": "Colorado",
"days": 7,
"visiting_city_number": 3,
"date": [
"2022-03-11",
"2022-03-12",
18TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
"2022-03-13",
"2022-03-14",
"2022-03-15",
"2022-03-16",
"2022-03-17"
],
"people_number": 5,
"room rule": "pets",
"cuisine": [
"Mexican",
"Italian",
"Mediterranean",
"Indian"
],
"room type": "entire room",
"transportation": null,
"budget": 15100,
"query": "Can you help with generating a 7-day travel plan for a party of 5? We're
setting off from Indianapolis and planning to explore 3 cities in Colorado from March
11th to March 17th, 2022. We have a budget of $15,100 for this trip. We'll be bringing
our pets, so pet-friendly accommodations are a must. We're also hoping to find places
that offer Mexican, Italian, Mediterranean, and Indian cuisines. Entire rooms for
accommodations would be ideal.",
"level": "hard",
"annotated plan": [
{
"days": 1,
"current_city": "from Indianapolis to Grand Junction(Colorado)",
"transportation": "Self-driving, from Indianapolis to Grand Junction(Colorado)
, duration: 19 hours 21 mins, distance: 2,132 km, cost: 106",
"breakfast": "-",
"attraction": "-",
"lunch": "-",
"dinner": "Nukkadwala, Grand Junction(Colorado)",
"accommodation": "Lovely 1 BD on the Upper West Side, Grand Junction(Colorado)
"
},
{
"days": 2,
"current_city": "Grand Junction(Colorado)",
"transportation": "-",
"breakfast": "Om Ji Bhature Wale, Grand Junction(Colorado)",
"attraction": "Museum of the West, Museums of Western Colorado, Grand Junction
(Colorado);Eureka! McConnell Science Museum, Grand Junction(Colorado);",
"lunch": "Penta Cafe, Grand Junction(Colorado)",
"dinner": "Kings Kulfi, Grand Junction(Colorado)",
"accommodation": "Lovely 1 BD on the Upper West Side, Grand Junction(Colorado)
"
},
{
"days": 3,
"current_city": "from Grand Junction(Colorado) to Alamosa(Colorado)",
"transportation": "Self-driving, from Grand Junction(Colorado) to Alamosa(
Colorado), duration: 4 hours 37 mins, distance: 397 km, cost: 19",
"breakfast": "Punjab Da Pind, Grand Junction(Colorado)",
"attraction": "Alamosa Colorado Welcome Center, Alamosa(Colorado);Toivo Malm
Trail System, Alamosa(Colorado);",
"lunch": "Emperor's Lounge - The Taj Mahal Hotel, Alamosa(Colorado)",
"dinner": "Cafe Dalal Street, Alamosa(Colorado)",
"accommodation": "Sunny Chelsea Studio, Alamosa(Colorado)"
},
{
"days": 4,
"current_city": "Alamosa(Colorado)",
"transportation": "-",
19TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
"breakfast": "Good Luck Cafe, Alamosa(Colorado)",
"attraction": "Alamosa Archery Range, Alamosa(Colorado);Alamosa Riparian Park,
Alamosa(Colorado);Alamosa Sub, Alamosa(Colorado);",
"lunch": "Shri Durga Dosa Corner, Alamosa(Colorado)",
"dinner": "Lahore, Alamosa(Colorado)",
"accommodation": "Sunny Chelsea Studio, Alamosa(Colorado)"
},
{
"days": 5,
"current_city": "from Alamosa(Colorado) to Denver(Colorado)",
"transportation": "Self-driving, from Alamosa(Colorado) to Denver(Colorado),
duration: 3 hours 38 mins, distance: 377 km, cost: 18",
"breakfast": "Hamburg To Hyderabad, Alamosa(Colorado)",
"attraction": "Denver Zoo, Denver(Colorado);",
"lunch": "The Fatty Bao - Asian Gastro Bar, Denver(Colorado)",
"dinner": "Woods Spice, Denver(Colorado)",
"accommodation": "Peaceful, beautiful home away , Denver(Colorado)"
},
{
"days": 6,
"current_city": "Denver(Colorado)",
"transportation": "-",
"breakfast": "The Urban Socialite, Denver(Colorado)",
"attraction": "Denver Art Museum, Denver(Colorado);Denver Museum of Nature &
Science, Denver(Colorado);",
"lunch": "Breaktym, Denver(Colorado)",
"dinner": "Chawla's\u5b8a, Denver(Colorado)",
"accommodation": "Peaceful, beautiful home away , Denver(Colorado)"
},
{
"days": 7,
"current_city": "from Denver(Colorado) to Indianapolis",
"transportation": "Self-driving, from Denver(Colorado) to Indianapolis,
duration: 15 hours 37 mins, distance: 1,747 km, cost: 87",
"breakfast": "Starve Stalkers, Denver(Colorado)",
"attraction": "-",
"lunch": "-",
"dinner": "-",
"accommodation": "-"
}
]
}
(cid:6) (cid:5)
C.2.AdditionalCaseStudy
20TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Query: Please draw up a 3-day travel itinerary for
one person, beginning in Oakland and heading to
Tucson from March 15th to March 17th, 2022, with a
budget of $1,400.
Plan:
{
‚Äùday‚Äù: 3,
"current_city": ‚ÄúTucson",
"transportation": ‚Äú-",
"breakfast": "Bakers Oven, Tucson‚Äù,
"attraction": "San Xavier del Bac Mission, Tucson;
Tucson Museum Of Art, Tucson‚Äù,
"lunch": "Pizza Street, Tucson",
"dinner": "-",
"accommodation": ‚Äú-"
}
Analysis:
In this instance, the planned trip did not form a
closed-loop trip, ending in Tucson on the third day.
Additionally, despite the trip including a stay in
Tucson, the language agent failed to schedule dinner
or accommodation for that day.
FigureC.1. Case4(Two-stageMode).
Query: Can you create a 5-day travel plan for 2
people departing from Syracuse to visit 2 cities in
Georgia? We are planning to travel from March 16th
to March 20th, 2022. Our budget is approximately
$2,000. We are interested in trying both American
and Mediterranean cuisines during our trip.
Trajectory:
‚Ä¶
Action 13: FlightSearch[Syracuse, Atlanta,
2023-03-20]
Thought 14: Since I have exhausted the options
for finding flights from Syracuse to any city in
Georgia on the desired dates, and I am unable to
search for alternative transportation methods due to
the nested use of tools restriction, the only
remaining step is to use the Planner tool with the
information that has been gathered so far.
Action 14: Planner[Create a 5-day travel plan from
Syracuse to Georgia]
Plan:
Day 1:
transportation: Flight Number: F1234567,
from Syracuse toAtlanta
‚Ä¶
Analysis:
In this example, the language agent's persistent
date errors and fixation on airplane travel lead it to
bypass valid information search. Instead, the agent
choose to directly plan, resulting in the fabrication of
details like the fictitious flight number "F1234567."
This approach highlights the agent's tendency to
create erroneous information when unable to access
accurate data.
FigureC.2. Case5(Two-stagemode).
21TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Query: Please curate a 3-day travel plan for a solo
traveler from Tulsa to Houston from March 23rd to
March 25th, 2022, with a total travel budget of
$1,000.
Plan:
{
"day": 3,
"current_city": "from Houston to Tulsa",
"transportation": "Flight Number: F4013298, from
Houston to Tulsa, Departure Time: 08:20, Arrival
Time: 09:43",
"breakfast": "Earthen Spices, Houston",
"attraction": "The Museum of Fine Arts,
Houston; Hermann Park, Houston;",
"lunch": "Chawla, Houston",
"dinner": "-",
"accommodation": "-"
}
Analysis:
In this example, the language agent scheduled an
8:20 AM flight departure from Houston but still
planned a subsequent trip and lunch in Houston.
This plan is illogical, as it overlooks the fact that the
agent would no longer be in the city post-flight.
FigureC.3. Case6(Two-stagemode).
Query: Could you help develop a week-long travel
itinerary suitable for a group of 6 people, departing
from Baton Rouge and planning to visit 3 different
cities in Texas? The travel dates are set from March
17th to March 23rd, 2022. Our travel budget has
been adjusted to $14,600. Bearing in mind that we
have children under ten years old, our
accommodations need to allow young children and
we prefer to occupy entire rooms. We also prefer not
to self-drive during this trip.
Plan:
{
"days": 1,‚Äù
current_city": "from Baton Rouge to Texarkana",
"breakfast": "-",
"lunch": "Big City Bread Cafe, Texarkana",
"dinner": "Poets Cafe, Texarkana",
},
{
days": 2,
"current_city": "Texarkana",
"transportation": "-",
"breakfast": "Big City Bread Cafe, Texarkana‚Äù,
‚Ä¶}
Analysis:
In this scenario, the language agents select the
same restaurant for both lunch on the first day and
breakfast on the second day, a choice that seems to
defy commonsense.
FigureC.4. Case7(Directstrategyinsole-planningmode).
22TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Query: Can you help put together a 3-day travel
plan for a group of 3, leaving from Daytona Beach
and heading to Atlanta from March 2nd to March
4th, 2022? We have a budget of $2,100. We require
accommodations that allow children under 10
years of age, and we prefer having entire rooms to
ourselves. Please note, we cannot utilize flights for
transportation on this trip.
Plan:
{
"day": 1,
"current_city": "from Daytona Beach to Atlanta‚Äù,
‚Ä¶
"accommodation": "Bright, Modern, Clean,
Spacious, Brooklyn Home, Atlanta"
},
{
"day": 2,
‚Ä¶
"accommodation": "Bright, Modern, Clean,
Spacious, Brooklyn Home, Atlanta"
}
Analysis:
In this example, the language agent makes an error
in their accommodation planning. Agent selects a
property that prohibits children under 10 and
requires a minimum stay of three nights. However,
the agents only plan a two-day stay, leading to a
violation of the property's minimum stay
requirement.
FigureC.5. Case8(Directstrategyinsole-planningmode).
Query: Please create a travel plan for a 3-day trip from Missoula to
Dallas scheduled from March 23rd to March 25th, 2022. The budget for
this trip is set at $1,900.
Plan:
[
{
"day": 1,
"current_city": "from Missoula to Dallas",
"transportation": "Flight Number: F3604254, from Missoula to Dallas,
Departure Time: 14:27, Arrival Time: 18:26",
"breakfast": "-",
"attraction": "-",
"lunch": "-",
"dinner": "Coconuts Fish Cafe, Dallas",
‚Äúaccommodation": "1BR, elevator, kitchen, doorman!, Dallas"
},
{
"day": 2,
"current_city": "Dallas",
"transportation": "-",
"breakfast": "Cafe Gatherings, Dallas",
"attraction": "The Dallas World Aquarium, Dallas;
The Sixth Floor Museum at Dealey Plaza, Dallas;",
"lunch": "1918 Bistro & Grill, Dallas",
"dinner": "Yanki Sizzlers, Dallas",
"accommodation": "1BR, elevator, kitchen, doorman!, Dallas"
},
{
"day": 3,
"current_city": "from Dallas to Missoula",
"transportation": "Flight Number: F3604227,
from Dallas to Missoula, Departure Time: 11:28, Arrival Time: 13:48",
"breakfast": "MONKS, Dallas",
"attraction": "Reunion Tower, Dallas",
"lunch": "-",
"dinner": "-",
"accommodation": "-"
}
]
Analysis:
A feasible plan that meets all constraints.
FigureC.6. Case9(Directstrategyinsole-planningmode).
23TravelPlanner:ABenchmarkforReal-WorldPlanningwithLanguageAgents
Query:Please assist in crafting a travel plan for a solo traveller,
journeying from Detroit to San Diego for 3 days, from March 5th to
March 7th, 2022. The travel plan should accommodate a total budget of
$3,000.
Trajectory:
Action 1: CostEnquiry[{"people_number": 1, "day": 1,‚Ä¶‚Äù}]
Observation 1: Cost: The cost of your plan is 1412.0 dollars.
Thought 2: The cost for the first day is $1412, which includes the flight
and activities in San Diego. The remaining budget is $1588‚Ä¶
Action 2: CostEnquiry[{"people_number": 1, "day": 2,‚Ä¶}]
Observation 2: Cost: The cost of your plan is 721.0 dollars.
Thought 3: The cost for the second day is $721, which includes meals,
attractions, and the same accommodation as the first day. The total spent
so far is $2133, leaving a remaining budget of $867.
Action 3: CostEnquiry[{"people_number": 1, "day": 3,‚Ä¶}]
Observation 3: Cost: The cost of your plan is 1114 dollars.
Thought 4: The cost for the third day is $1114, which includes the return
flight and activities in San Diego before departure. The total cost for all
three days is now $3247, which exceeds the budget of $3000. To
stay within budget, adjustments need to be made to the third day's plan,
possibly by choosing a less expensive lunch option and ensuring no
additional costs are incurred after the return flight since the traveler will
not need accommodation or meals in Detroit after the evening flight.
Action 4: CostEnquiry[{"people_number": 1, "day": 3,‚Ä¶}]
Observation 4: Cost: The cost of your plan is 1105 dollars.
Thought 5: The revised cost for the third day is $1105, which includes a
more affordable lunch option. The total cost for all three days is now
$3238, which is still slightly over the budget of $3000. To further
reduce costs, I can look for a less expensive breakfast option on the third
day‚Ä¶
Action 5: CostEnquiry[{"people_number": 1, "day": 3,..}]
Observation 5: Cost: The cost of your plan is 1083 dollars.
Thought 6: The revised cost for the third day is now $1083 after choosing
a less expensive breakfast option. The total cost for all three days is
$3216, which is closer to the budget but still slightly over. Since
the flight and accommodation costs are fixed, the only remaining option
to adjust would be the attractions or lunch on the second day. However,
given the small amount by which the budget is exceeded, it may be
acceptable to slightly exceed the budget due to the variability of
daily expenses and the possibility of finding deals on-site. The
traveler should be prepared for a small buffer in their budget.
Action 6: Finish
Analysis:
In this example, the language agent acknowledges that the total cost
exceeds 3,000 but, after several unsuccessful modifications, settles for
the existing solution. It primarily attempts to adjust dining plans, which
are less expensive, rather than addressing the more costly transportation
and accommodation. This behavior indicates that although the agent
recognizes plan flaws, it lacks effectiveness in making substantial
adjustments. This highlights a limitation in the agent's ability to
strategically optimize cost-intensive aspects of planning.
FigureC.7. Case10(Reflexionstrategyinsole-planningmode).
24