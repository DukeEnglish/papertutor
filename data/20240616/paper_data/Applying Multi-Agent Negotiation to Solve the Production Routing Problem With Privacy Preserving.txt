Applying Multi-Agent Negotiation to Solve the Production
Routing Problem With Privacy Preserving
LuizaPellinBiasoto ViniciusRenandeCarvalho JaimeSimÃ£oSichman
EscolaPolitÃ©cnica EscolaPolitÃ©cnica EscolaPolitÃ©cnica
UniversidadedeSÃ£oPaulo(USP) UniversidadedeSÃ£oPaulo(USP) UniversidadedeSÃ£oPaulo(USP)
SÃ£oPaulo,Brazil SÃ£oPaulo,Brazil SÃ£oPaulo,Brazil
luizapb@usp.br vrcarvalho@usp.br jaime.sichman@usp.br
ABSTRACT Thoughsolvingstepsseparatelymayyieldoptimalorsuboptimal,
ThispaperpresentsanovelapproachtoaddresstheProduction yeteffective,solutions,integratedplanningoffersfinancialbenefits.
RoutingProblemwithPrivacyPreserving(PRPPP)insupplychain Studiesshowoperationalcostreductionsrangingfrom3%to20%
optimization.Theintegratedoptimizationofproduction,inventory, [4],andasystematicreviewestimatesan11.08%[9]costreduction
distribution,androutingdecisionsinreal-worldindustryappli- comparedtosequentialsolutions.
cationsposesseveralchallenges,includingincreasedcomplexity, Severalchallengesmaketheintegratedoptimizationofthese
discrepancies between planning and execution, and constraints decisionsdifficultinreal-worldindustryapplications:a)Increased
oninformationsharing.Tomitigatethesechallenges,thispaper complexityofdecisions:Unifyingbusinessrulesmakesproblems
proposestheuseofintelligentagentnegotiationwithinahybrid toolargeforcommercialsolutions,increasingthecomplexityof
Multi-AgentSystem(MAS)integratedwithoptimizationalgorithms. addedvariablesandconstraintssignificantly;b)Discrepancybe-
TheMASfacilitatescommunicationandcoordinationamongen- tweenplanningandexecution:Operationalrealitycomplexities,
tities,encapsulatesprivateinformation,andenablesnegotiation. likeunforeseeneventsorlackofconfidenceintheprovidedsolution,
This,alongwithoptimizationalgorithms,makesitacompelling mayleadtodeviationsbetweenexecutionandplanningstrategies,
frameworkforestablishingoptimalsolutions.Theapproachissup- necessitating real-time replanning. When these replannings do
portedbyreal-worldapplicationsandsynergiesbetweenMASand notoccurthroughanoptimizationmethod,thedecisionsmade
optimizationmethods,demonstratingitseffectivenessinaddressing canbesuboptimal,resultinginfinanciallosses;c)Constraints
complexsupplychainoptimizationproblems. on information sharing: Privacy and information protection
playanimportantroleinreal-worldapplications.Organizational
constraintsandprivacy-preservingmaylimitaccesstoessential
KEYWORDS
information for decision-making. This can result in suboptimal
Production Routing Problem, multi-agent systems, heuristic al-
plansorincreasedoperational-levelreplanningduetoalackofa
gorithms,supplychainoptimization,intelligentagents,privacy
faithfulrepresentationofreality.
preserving
Theincreasedcomplexityofdecisionsresultingfromtheintegra-
tioncanbemitigatedbyapplyingadvancedoptimizationmethods,
ACMReferenceFormat:
LuizaPellinBiasoto,ViniciusRenandeCarvalho,andJaimeSimÃ£oSichman. suchasdecompositions,meta-heuristics,matheuristics,andhybrid
2024.ApplyingMulti-AgentNegotiationtoSolvetheProductionRouting optimizationalgorithms.
ProblemWithPrivacyPreserving.InProc.ofthe23rdInternationalConfer- Anautomatedsystemcanbeimplementedtotacklethediscrep-
enceonAutonomousAgentsandMultiagentSystems(AAMAS2024),Auckland, ancybetweenplanningandexecution.Thissystemreadsreal-time
NewZealand,May6â€“10,2024,IFAAMAS,8pages. dataasinput,identifiesdeviations,andre-executesoptimizational-
gorithmstoreconstructtheoptimalplanforimmediateadherence.
1 INTRODUCTION However, conventional optimization methods may not effec-
tivelyaddressconstraintsoninformationsharing,suchasprivacy
Supplychaindecisionsproceedsequentially,withstepsthattyp-
preservationorinformationprotectionbetweendepartments.If
icallyoperateinisolationwithfixedparameterssetbyadjacent
crucialinformationiswithheldfromtheoptimizationalgorithm,
ones.Forinstance,inthedistributionofpaperproduction,asupply
it cannot incorporate it into its search for the optimal solution,
teamidentifiesadistributioncenterthatneedsaspecificproduct
potentiallyleadingtosuboptimaloutcomes.
quantity,requestingitfromadesignatedfactory.Subsequently,the
Thispaperaddressesthethreeaforementionedchallenges,cre-
factoryinitiatesproductiontomeetthepredetermineddemands.
atinga hybridMulti-AgentSystem (MAS)integratedwithopti-
Usuallyaimingtooptimizeoperationalcosts,theyareframedas
mizationalgorithmstosolvetheProductionRoutingProblemwith
combinatorial optimization problems. Methods like Mixed-
PrivacyPreserving(PRPPP).Inshort,weforeseethatagentsrep-
IntegerProgrammingorheuristicsarethenemployedforeffective
resentingdifferentclientscanproposealternativesolutionsusing
planning.
exclusivelylocaldata,thereforeenhancingprivacy-preserving.
A MAS automates plan generation and decision negotiation
Proc.ofthe23rdInternationalConferenceonAutonomousAgentsandMultiagentSystems amongentities,allowingdiverseformsofreasoningtocollaborate
(AAMAS2024),N.Alechina,V.Dignum,M.Dastani,J.S.Sichman(eds.),May6â€“10,2024, forsolutions.Intelligentagentsintegratewithoptimizationalgo-
Auckland,NewZealand.Â©2024InternationalFoundationforAutonomousAgents
andMultiagentSystems(www.ifaamas.org).ThisworkislicencedundertheCreative rithmstoaddresscomplexoptimizationproblemsbydecomposing
CommonsAttribution4.0International(CC-BY4.0)licence.
4202
nuJ
31
]IA.sc[
1v41290.6042:viXrathemintosimplersubproblems.Additionally,agentsencapsulate asetofidenticalvehiclesğ¾ ={1,...,ğ‘š}overadiscreteandfinite
privateinformation,enablingnegotiationwithoutrevealingstrate- setofperiodsğ‘‡ ={1,...,ğ‘™},aimingtosatisfytheirdemandsineach
giesyetincorporatingthemintofinalplanningsolutions. period.Figure1depictsthegraphGwithitsnodesN andarcsA.
In[13],applicationsandsynergiesbetweenagentsandautoma- TheobjectiveofthePRPistoprovidetheplanningofdeliveries
tionareexplored.Additionallyin[12],collaborativecontrolmech- andproductionforadeterminedtimehorizonwhileminimizing
anismsareintroducedtoaddressreal-timeoptimizationchallenges productioncosts,inventorycosts(bothatthesupplierâ€™sandretail-
intheplanningandresourceallocationofsmalltomedium-sized ersâ€™levels),andtransportationcosts:
enterprises.
Furthermore, an application case of intelligent agents is pre-
âˆ‘ï¸ âˆ‘ï¸ âˆ‘ï¸ âˆ‘ï¸
sentedin[11],wheretheyhandledecisionsrelatedtoproduction ğ‘šğ‘–ğ‘› (ğ‘¢ğ‘ ğ‘¡ +ğ‘“ğ‘¦ ğ‘¡ + (â„ ğ‘–ğ¼ ğ‘–ğ‘¡)+ (ğ‘ ğ‘–ğ‘— ğ‘¥ ğ‘–ğ‘—ğ‘˜ğ‘¡)) (1)
andtransportation.Additionally,agentscanbeusedtoreformu- ğ‘¡âˆˆğ‘‡ ğ‘–âˆˆğ‘ (ğ‘–,ğ‘—)âˆˆğ´ ğ‘˜âˆˆğ¾
late problems as Distributed Constraint Optimization Problems ğ‘
ğ‘¡
-productionquantityinperiodt;ğ‘¦
ğ‘¡
-equalto1ifthereis
(DCOP)whentheproblemissocomplexorrequiresinformation productionatthefactoryinperiodt,0otherwise;ğ¼
ğ‘–ğ‘¡
-inventoryat
privacythatitsintegratedresolutionbecomesunfeasible[8].Agents nodeiattheendofperiodt;ğ‘¥
ğ‘–ğ‘—ğ‘˜ğ‘¡
-equalto1ifavehiclektravels
canalsocoordinatesolutionsfromdifferentmeta-heuristicstoad- directlyfromnodeitonodejinperiodt(seefullPRPâ€™sformulation,
dressProductionandDistributionPlanningProblems(PDPP)[10] decisionvariablesandparametersdescriptioninAppendix).
andevennegotiateamongthemselvestodeterminethebestmeta- Areviewofitsmathematicalformulationscanbefoundin[2].
heuristicforsolvingaspecificmulti-objectiveproblem[6].Other The PRP holds practical significance within a Vendor Managed
synergiesbetweenEvolutionaryComputation(EC)andMASare Inventory (VMI) approach [2]. In this context, the supplier not
discussedin[7]. onlymonitorsretailersâ€™inventorylevelsbutalsomakesdecisions
regardingthereplenishmentpolicyforeachretailer.
2 THEPRODUCTIONROUTINGPROBLEM Itfunctionseffectivelywhenassumingthesupplierhascomplete
(PRP) controloverretailersâ€™decisions.However,letâ€™sconsiderascenario
Backtothepaperindustryexample,thesupplychaincanbeseg- wherethesupplierlackscrucialinformationaboutretailers,suchas
mentedintofourdistinctsteps,eachinvolvingspecificdecisions:a) theirinventorycosts,andretailershavetheabilitytonegotiatewith
Production:determiningthechoiceofproduct,sizeanditstiming thesuppliertoexpediteordefercertaindeliveries.Inthisscenario,
formanufacturing;b)Inventory:decidingtheoptimalsizeand thePRPmaynolongerbeentirelyapplicable,andthemethods
durationforaproducttoremaininwarehouses;c)Distribution: previouslystudiedforitsresolutionmaynotbeentirelysuitable.
assigningproductstospecificdistributioncentersandscheduling ThemodelthatrepresentsthisspecificscenarioistheProduction
theirarrivaltimes;andd)Routing:identifyingthemostefficient RoutingProblemwithPrivacyPreserving(PRPPP).Dueto
routingoptionbasedonadistributionplan. the privacy preservation, the term (cid:205) ğ‘–âˆˆğ‘(â„ ğ‘–ğ¼ ğ‘–ğ‘¡) from the PRPâ€™s
TheProductionRoutingProblem(PRP)includesallfoursteps objectivefunction,regardingtheinventorycostsofeverynode(i.e.,
integratedwithinitsdecision-makingframework.Classicalmath- supplierandretailersâ€™),isaffectedandbecomesâ„0ğ¼0ğ‘¡,keepingonly
ematicalmodelscomposethePRP,suchastheVehicleRouting theinventorycostsfromthesupplier,whichtheyhaveaccess.
Problem(VRP)[5],awell-knownNP-hardproblem,andtheLot-
SizingProblem(LSP)[14]. 3 THEPRODUCTIONROUTINGPROBLEM
WITHPRIVACYPRESERVING(PRPPP)
AssumingaPRPPPinstancewitha6-monthhorizon,thesolution
outputmustcontemplatethesupplierâ€™sdeliveryplantoeachre-
tailerforthewholesixmonths.Notably,noteveryretailerwill
receivedeliverieseverymonth;theymaybeconcentratedinspe-
cificmonthstomeettheirdemand.Thevariabletransportationand
productioncostsassociatedwitheachdeliveryperiodarereflected
bythesupplierintheformofshippingandproductpricescharged
toretailers.Inordertofulfilleachretailerâ€™sdemandplanwithover-
allcostreduction,thesupplierwillreceivethedeliverypreferences
fromretailersandproposeoptimalagendasfornegotiation.These
negotiationswillbeinfluencedbythechangingshippingandprod-
uctcostsateachproposeddeliveryperiod,aswellastheinventory
Figure1:ProductionRoutingProblem(PRP)[1]
costsuniquetoeachretailer,whichonlytheyareawareof.The
optimalnegotiationagendascontinueuntilastoppingcriterionis
ThedomainofthePRPisdefinedbyacompletegraphG=(N,
met.
A),whereN representsthesetofthesupplierandretailersindexed
byğ‘– âˆˆ {0,...,ğ‘›}andğ´ = {(ğ‘–,ğ‘—) :ğ‘–,ğ‘— âˆˆ ğ‘,ğ‘– â‰  ğ‘—}isthesetofarcs
connectingthesupplierandretailer.Thesupplierisrepresentedby 3.1 InputData
node0,andthesetofretailersisdefinedasğ‘
ğ¶
=ğ‘\{0}.Asingle ThemodeltakesasinputdatatheparametersdescribedinSection
productismanufacturedinthefactoryanddeliveredtoretailersby 2,including:â€¢ Demandplan(ğ‘‘ ğ‘–ğ‘¡):Eachretailer(indexğ‘–)mustfulfillaspe- i.e.,selectingthechangethatwouldmostsatisfytheagentâ€™s
cificdemandplan;forexample,requiringeightproductunits preferencesorgoals.
inmonths3,4,and5withina6-monthhorizon(indexğ‘¡), â€¢ vote:Changesinneighborhooddeliveryplansmayimpact
totaling24units. shippingandproductpricesfromtheirretailers.Retailers
â€¢ Supplierandretailersinventorycosts(â„ ğ‘–):Distinctinventory arethenselectedtovoteontheproposedchanges;ifthe
costsinfluenceretailerpreferenceswhendecidingondeliv- majorityagrees,changesareimplemented.
erynegotiations.Supplierinventorycostsaretranslatedinto
productpriceschargedtoretailers.Thesecostsarefixedand 3.3 OtherComponents
knownonlytotherespectivesupplierorretailer.
â€¢ Neighborhood:Retailersaccessinformationabouttheirneigh-
â€¢ Unitproductioncost(u)andsetupcost(f):Theseimpact borhood,i.e.,otherretailerswithdeliveriesinthesamepe-
thesupplierâ€™sproductionexpenses,translatedintoproduct
riodandcorrespondingEuclideandistances.Thesupplier
prices charged to retailers. Setup costs are fixed charges
updatestheneighborhoodwithanysolutionplanchanges.
duringproduction.Unitproductioncostsfluctuatewiththe
â€¢ Planningboard:Carriesinitialandcurrentsolutions,updated
quantityproduced;e.g.,ifthesupplierproduces140unitsin
aftereachsuccessfulnegotiation.Thesupplierhasaccessto
month2and200unitsinmonth4,withvariableproduction
allinformation,whileretailersonlyseewhatdirectlyaffects
costs of 8 and setup costs of 1500, the total cost for the
them.
horizonis(140*8+1500)+(200*8+1500)=5720.
â€¢ Transactionpool:Containsinformationaboutthecurrent
â€¢ Coordinatesofthesupplierandretailers:Geographicallo- transaction,includingnegotiatingretailers,affectedretailers
cationsusedtogenerateroutesandcomputetransportation
selectedtovoteonproposedchangesoftheirneighborhoods,
costs.
andresultingoutcomes.
â€¢ Transportationcosts(ğ‘ ğ‘–ğ‘—):Calculatedproportionaltothe
Euclideandistancebetweenthesupplierandaretaileror
4 NEGOTIATIONPROTOCOL
betweenretailers.Thetotalcostofarouteisthesumofcosts
foreachsegment. 4.1 Utility
â€¢ Maximumcapacities:Maximumproduction(C),vehicle(Q) Letğ‘ğ‘ ğ‘¡ âˆˆ ğ‘\{0}thesetoftheretailersintheneighborhoodof
andinventory(ğ¿ ğ‘–)capacitiesmaylimitoveralldecisions. eachperiodt,ğ‘›ğ‘
ğ‘¡
thetotalquantityofretailersinğ‘ğ‘
ğ‘¡
andnthe
â€¢ Initialinventorylevels(ğ¼ ğ‘–0):Initiallevelsforbothsuppliers totalquantityofretailersinğ‘ ğ¶.Theutilityofeachretailerc is
andretailersattheplanninghorizonâ€™sstart. definedbythefollowingequation:
A3. s2 seenA ig ne Fn igt us
re1,thesuppliersandretailersarethetwoagent ğ‘ˆ ğ‘
=âˆ’(âˆ‘ï¸
(â„ ğ‘ğ¼ ğ‘ğ‘¡+
âˆ‘ï¸ (ğ‘ ğ‘–ğ‘—(cid:205) ğ‘˜âˆˆğ¾ğ‘¥ ğ‘–ğ‘—ğ‘˜ğ‘¡) +(ğ‘¢ğ‘ ğ‘¡ +ğ‘“ğ‘¦ ğ‘¡ +â„0ğ¼0ğ‘¡)
))
ğ‘›ğ‘ ğ‘›
ğ‘¡
types. ğ‘¡âˆˆğ‘‡ (ğ‘–,ğ‘—)âˆˆğ´
(2)
a)Supplieragent(Node0insetN):aimstodeterminedeliver-
iesforeachperiodtoretailerswhileminimizingproductionand
Thefirsttermexplainsretailercâ€™sspecificinventorycosts.The
second term is the shipping price from the supplier, translated
transportationcosts.Thesupplieragentisacoordinatoragent,
responsibleforcoordinatingretailerpreferences,proposingoptimal
intotransportationcostsforneighborhoodswherechasdeliveries
andnormalizedbytotalretailersinthoseareas.Thelasttermis
negotiationagendas,andmediatingnegotiations.Thecoordinator
thesupplierâ€™sproductprice,translatedintoproduction,setup,and
hastotalsystemknowledge,exceptforspecificretailersâ€™inventory
inventorycostsfortheentirehorizonandnormalizedbythetotal
costs.Theiractionsinclude:
quantityofretailersintheplan.
â€¢ initialsol:Generatesaninitialsolutionbasedoninputdata Retailersnegotiateorvoteinfavorofatransactiononlyiftheir
andretailersâ€™ordereddeliverypreferences,consideringthe delta utility is positive, indicating lower costs and prices after
firstdeliverypreferenceofeachretailerwhilerespecting changes. Notably, alterationsto another retailerâ€™sdelivery plan
production,vehicleandinventorycapacitiesconstraints. canaffecttheoverallutilityofthatretailer.
â€¢ optagenda:Generatesanoptimalnegotiationagenda,propos-
inginsertions,removalsandsubstitutionsofretailersâ€™
4.2 AgendaTransactions
deliveries.
Fromretailersâ€™deliverypreferences,thesuppliergeneratesanopti-
b)Retaileragents(ğ‘ ğ¶ =ğ‘\{0}):theyhaveademandplanand malnegotiationagendaandproposeschangestodeliveryplans,as
communicate delivery preferences to the supplier. Represented following:
byagentswithpartialknowledge,theyareawareofspecific
â€¢ Removal: The supplier identifies a chance to eliminate a
inventorycostsbutlackinformationaboutshippingandproduct
retailerâ€™s delivery in a specific period, reducing shipping
pricesuntilproposedduringnegotiations.Retailersknowwhich
pricesforthatneighborhood.Notethatifaremovalhappens,
retailersarepartoftheirneighborhoodsandtheirproximity.Their
thesamequantitymustbeaddedtoanotherperiodwhere
actionsinclude:
theretaileralreadyhasadelivery,adheringtodemandand
â€¢ negotiate:Participateinanegotiationagendatransaction, inventoryconstraints.Thisshouldnâ€™ttriggervotinginthe
decidingonthesuggestedchangebasedontheirdeltautility, otherneighborhood,asshippingpricesarenâ€™tunit-specific.â€¢ Insertion:Thishappenswhenthesuppliersuggestsadding
adeliveryforaretailerinaneighborhoodwheretheyhad
nonebefore,increasingshippingpricesforthatareaand
reducingapprovalchances.Theinsertedquantityshouldbe
takenfromanotherneighborhoodwithacurrentdelivery
toavoidtriggeringitsvotingphase.Insertionsareaccepted
only if they significantly reduce product prices or when
proposedalongwithremovals.
â€¢ Substitution:Thesupplieridentifiesanopportunityforan Figure4:Transaction2-Substitutionbetweentworetailersâ€™
insertionandremovalaffectingtwodifferentneighborhoods. deliveries.Retailer4hasadeliveryof5unitsanticipatedto
Votinginthefirstneighborhoodismostlyagainstthechange, period1,whileretailer2hasadeliveryof15unitspostponed
whilethesecondneighborhoodisinfavor.Sincethefirst toperiod2.
neighborhoodoutnumbersthesecond,theoverallvoting
fails.Toaddressthis,thesupplierproposesasubstitution
withanotherretailerâ€™sdeliveryinthoseneighborhoodsto
enhanceacceptancechances.
Eachproposalundergoesatransaction,negotiatedamongthere-
tailers directly affected by changes to their delivery plans, and
issubsequentlyvotedonbyretailerswhoareindirectlyaffected
(experiencinganincreaseordecreaseinshipping/productprices).
Figure5:Transaction2-Negotiationandvotingphases.Re-
tailers2and4negotiateanddecidetoapplychangesonlyfor
retailer2(Y,N).Subsequently,thevotingphaseistriggered,
with3votesinfavorand2against.Then,thetransaction
succeedsonlyforthechangeinthedeliveryplanofretailer
Figure2:Transaction1-Insertioncombinedwitharemoval 2.(SeecompletecalculationrecordinAppendix)
foradeliveryof10unitsofproductfromretailer3,antici-
patingitfromperiod2to1.
Algorithm1PRPPP
1: deliveryprefs:retailerssendsuppliertheirdeliverypreferences
2: initialsol:suppliergeneratesainitialsolution
3: procedureImprovePRPPP(initialsol.,deliveryprefs.)
4: Calculatestoppingcriterion
5: whilestoppingcriterionnotmetdo
6: optagenda:suppliergeneratesoptimalagenda
7: fortransactioninagendado
8: negotiate:asktheaffectedretailerstonegotiate
9: vote:asktheaffectedneighborhoodstovote
10: ifnegotiatereturnstrueandvotereturnstruethen
11: Supplierupdatesthecurrentdeliveryplan
12: else
13: Donotupdatethecurrentdeliveryplan
14: endif
15: endfor
16: Calculatestoppingcriterion
17: endwhile
18: returnFinaldeliveryplan
19: endprocedure
Figure3:Transaction1-Negotiationandvotingphases.As
thedeltautilityfromretailer3ispositivefortheproposed 5 CONCLUSIONSANDFUTUREWORK
change,thevotingphaseistriggered.Theresultisatie-2 ThestudyhighlightsMASbenefitsinaddressingcriticalchallenges
infavorand2againstthechange,sothesuppliervotein inapplyingoptimizationtosupplychainplanning,especiallyin
favorinordertobreakthetie.Thisresultsinasuccessful thecontextofprivacypreservation.ThePRP,aknownliterature
transaction.(SeecompletecalculationrecordinAppendix) problem,isadaptedtoconsiderinformationconstraints(PRPPP).
ThisworkproposesahybridMASandoptimizationframeworkto
solveit.
4.3 Pseudo-Algorithm Futureworkinvolvesdefiningalgorithmsforoptimalagendaand
ThefullsystemflowisrepresentedbytheAlgorithm1. initialsolutiongeneration,integratingheuristicalgorithms.Theestablishmentofastoppingcriterionisnecessary,consideringthat EvolutionaryComputingandArtificialIntelligence.CommunicationsinComputer
itshouldnotbebasedonlyonapercentageofinitialcostreduction, andInformationScience999,27â€“41. https://doi.org/10.1007/978-981-13-6936-0_4
[8] F.N.T.Furukita,F.J.M.Marcellino,andJ.Sichman.2022.CombiningDCOPand
sincetheoptimalsolutionisunknown.Furthermore,discrepancies
MILPforComplexLocalOptimizationProblems. LectureNotesinComputer
betweenplanningandexecutionmaybeaddressedbyadaptingand Science(includingsubseriesLectureNotesinArtificialIntelligenceandLecture
automatingtheproposedframeworkforreal-timeoptimization. NotesinBioinformatics)13196LNAI(2022),61â€“76. https://doi.org/10.1007/978-
3-031-08421-8_5
[9] D.Hrabec,L.M.Hvattum,andA.Hoff.2022.Thevalueofintegratedplanning
REFERENCES forproduction,inventory,androutingdecisions:Asystematicreviewandmeta-
[1] Y.Adulyasak,J.-F.Cordeau,andR.Jans.2014.Optimization-basedadaptivelarge
analysis.InternationalJournalofProductionEconomics248(2022),108468. https:
//doi.org/10.1016/j.ijpe.2022.108468
neighborhoodsearchfortheproductionroutingproblem.TransportationScience
[10] AbolfazlKazemi,MohammadHossein,FazelZarandi,andMahdiAzizmoham-
48(2014),20â€“45.Issue1. https://doi.org/10.1287/trsc.1120.0443
madi.2017.Ahybridsearchapproachinproduction-distributionplanningprob-
[2] Y.Adulyasak,J.-F.Cordeau,andR.Jans.2015.Theproductionroutingproblem:
Areviewofformulationsandsolutionalgorithms. ComputersandOperations
(l 2em 017in ),s 5u 0p 6â€“p 5ly 27c .h Ia si sn ueus 4i .ngmulti-agentsystems.Int.J.OperationalResearch28
Research55(2015),141â€“152. https://doi.org/10.1016/j.cor.2014.01.011
[11] A.Kazemi,M.H.FazelZarandi,andS.M.MoattarHusseini.2009.Amulti-agent
[3] M.Boudia,M.A.O.Louly,andC.Prins.2007.AreactiveGRASPandpathrelinking
systemtosolvetheproduction-distributionplanningproblemforasupplychain:
[4]
f R Po .er s Cea har ac c no h dm 3 rab 4i a(n 2 ne 0 dd 07 Mp ),r .Lo 3 .4d 0 Fu 2 ic sâ€“t hi 3o e4 rn 1 .- 9 1d . 9is I 9st 4sr .uib Ceu o1t o1io . rn dh inp tt ar po ts ib : o/l n/e dm oo fi. .o pC r rg oo / dm 1 u0p c.1u ti0t oe 1 nr 6s / aja . ncn dod r d.2O i0 sp t0 re 6 ir . b0a u2t ti .0o io0n n5s A Tecg he nn oe lt oic gyal 4g 4or (i 9th 2m 00a 9p ),p 1r 8o 0a â€“ch 1. 93In .t Ie sr sn ua eti 1o -n 2a .l hJo ttu pr sn :a //l do of i.A od rgv /a 1n 0c .e 1d 00M 7a /sn 0u 0f 1a 7c 0tu -0ri 0n 8g -
1826-5
planning.EuropeanJournalofOperationalResearch72(1994),503â€“517.Issue3.
[12] MohsenMoghaddamandShimonY.Nof.2016. Real-timeoptimizationand
https://doi.org/10.1016/0377-2217(94)90419-7
[5] GeorgeB.DantzigandJohnHubertRamser.1959.TheTruckDispatchingProblem.
controlmechanismsforcollaborativedemandandcapacitysharing.International
ManagementScience6(1959),80â€“91. https://api.semanticscholar.org/CorpusID: J ijo pu er .n 20a 1l 5o .f 0P 7r .0o 3d 8uctionEconomics171(12016),495â€“506. https://doi.org/10.1016/j.
154381552
[6] ViniciusRenandeCarvalho.2022.UsingMulti-AgentSystemsandSocialChoice [13] S Hh ei im deo ln beY r. gN .o hf. tt2 p0 s2 :3 //. dS op ir .oin rg ge /r 10H .1a 0n 0d 7b /o 9o 7k 8-o 3f -A 0u 3t 0o -m 96a 7ti 2o 9n -1(2nded.).SpringerBerlin,
TheoryToDesignHyper-HeuristicsforMulti-ObjectiveOptimizationProblems.
[14] HarveyM.WagnerandThomsonM.Whitin.1958. Dynamicversionofthe
Ph.D.Dissertation.EscolaPolitÃ©cnica,UniversityofSaoPaulo.
[7] ViniciusRenandeCarvalhoandJaimeSimÃ£oSichman.2019.EvolutionaryCom-
economiclotsizemodel.ManagementScience50(121958),1770â€“1777.Issue12
SUPPL.. https://doi.org/10.1287/mnsc.1040.0262
putationMeetsMultiagentSystemsforBetterSolvingOptimizationProblems,InA APPENDIX-PRPFORMULATION
Formulationby[3]: âˆ‘ï¸âˆ‘ï¸ ğ‘¥ ğ‘—ğ‘–ğ‘˜ğ‘¡ â‰¤ |ğ‘†|âˆ’1 âˆ€ğ‘† âŠ†ğ‘ ğ¶ :|ğ‘†| â‰¥2,âˆ€ğ‘˜ âˆˆğ¾,âˆ€ğ‘¡ âˆˆğ‘‡ (13)
Parameters: ğ‘–âˆˆğ‘†ğ‘—âˆˆğ‘†
â€¢ uunitproductioncost;
â€¢ f fixedproductionsetupcost;
ğ‘ ğ‘¡,ğ¼ ğ‘–ğ‘¡,ğ‘
ğ‘–ğ‘˜ğ‘¡
â‰¥0 âˆ€ğ‘– âˆˆğ‘,âˆ€ğ‘˜ âˆˆğ¾,âˆ€ğ‘¡ âˆˆğ‘‡ (14)
â€¢ â„ ğ‘– unitinventorycostatnodei(supplierandretailers);
â€¢ ğ‘ ğ‘–ğ‘— transportationcostfromnodeitonodej; ğ‘¦ ğ‘¡,ğ‘§ ğ‘–ğ‘˜ğ‘¡,ğ‘¥ ğ‘–ğ‘—ğ‘˜ğ‘¡ âˆˆ0,1 âˆ€ğ‘–,ğ‘— âˆˆğ‘,âˆ€ğ‘˜ âˆˆğ¾,âˆ€ğ‘¡ âˆˆğ‘‡ (15)
Theobjectivefunction(3)minimizesthetotalcostsofproduction,
â€¢ ğ‘‘ ğ‘–ğ‘¡ demandfromretaileriinperiodt;
productionsetup,factoryandcustomerinventories,anddelivery
â€¢ ğ¶productioncapacity;
routing.Constraints(4)-(8)representthelot-sizingproblem.Con-
â€¢ ğ‘„vehiclecapacity;
straints(4)and(5)enforcethestockflowbalanceatthefactoryand
â€¢ ğ¿ ğ‘– maximumortargetinventorylevelatnodei;
customers,respectively.Constraint(6)ensuresthattheproduction
â€¢ ğ¼ ğ‘–0initialinventoryavailabeatnodei.
setupvariable(ğ‘¦ )equalsoneifproductionoccursinaspecific
ğ‘¡
Decisionvariables:
periodandlimitstheproductionquantitytotheminimumbetween
â€¢ ğ‘ ğ‘¡ productionquantityinperiodt; theproductioncapacityandthetotaldemandintheremainingpe-
â€¢ ğ¼ ğ‘–ğ‘¡ inventoryatnodeiattheendofperiodt; riods(ğ‘€ ğ‘¡).Constraints(7)and(8)restrictthemaximuminventory
â€¢ ğ‘¦ ğ‘¡ equalto1ifthereisproductionatthefactoryinperiodt, atthefactoryandcustomers,respectively.
0otherwise; Theremainingconstraints,i.e.,(9)-(13),arethevehicleloadand
â€¢ ğ‘§ 0ğ‘˜ğ‘¡ equalto1ifvehiclekleftthefactory(node0)inperiod routingconstraints.Constraints(9)allowapositivedeliveryquan-
t,0otherwise; tityonlyifcustomeriisvisitedinperiodt,andeachcustomercan
â€¢ ğ‘§ ğ‘–ğ‘˜ğ‘¡ equalto1ifcustomeriwasvisitedbyvehiclekinperiod bevisitedbyatmostonevehicle(10).Constraints(11)ensurethe
t,0otherwise; flowconservationofvehicles.Constraints(12)limitthequantityof
â€¢ ğ‘¥ ğ‘–ğ‘—ğ‘˜ğ‘¡ equalto1ifavehicletravelsdirectlyfromnodeito productthatcanbetransportedbyeachvehicle.Constraints(13)
nodejinperiodt; aretheSubtourEliminationConstraints(SECs),similartothosein
â€¢ ğ‘ ğ‘–ğ‘˜ğ‘¡ quantitydeliveredtocustomeriinperiodt. theTravelingSalesmanProblem(TSP).Constraints(14)and(15)
representthedomainsofnon-negativecontinuousvariablesand
ğ‘šğ‘–ğ‘›âˆ‘ï¸ (ğ‘¢ğ‘ ğ‘¡ +ğ‘“ğ‘¦ ğ‘¡ +âˆ‘ï¸ (â„ ğ‘–ğ¼ ğ‘–ğ‘¡)+ âˆ‘ï¸ (ğ‘ ğ‘–ğ‘— âˆ‘ï¸ ğ‘¥ ğ‘–ğ‘—ğ‘˜ğ‘¡)) (3) binaryvariables,respectively.
ğ‘¡âˆˆğ‘‡ ğ‘–âˆˆğ‘ (ğ‘–,ğ‘—)âˆˆğ´ ğ‘˜âˆˆğ¾
B TRANSACTIONSâ€™CALCULATIONRECORD
âˆ‘ï¸ âˆ‘ï¸
ğ‘ .ğ‘¡. ğ¼0,ğ‘¡âˆ’1+ğ‘ ğ‘¡ = ğ‘ ğ‘–ğ‘˜ğ‘¡ +ğ¼0ğ‘¡ âˆ€ğ‘¡ âˆˆğ‘‡ (4) Assumingnochangewasmadeintheproductionplan,theretailerâ€™s
ğ‘–âˆˆğ‘ğ¶ğ‘˜âˆˆğ¾ utilityeveryperiodtiscalculatedasfollowing:
âˆ‘ï¸
ğ¼ ğ‘–,ğ‘¡âˆ’1+ ğ‘˜âˆˆğ¾ğ‘ ğ‘–ğ‘˜ğ‘¡ =ğ‘‘ ğ‘–ğ‘¡ +ğ¼ ğ‘–ğ‘¡ âˆ€ğ‘– âˆˆğ‘ ğ¶,âˆ€ğ‘¡ âˆˆğ‘‡ (5) ğ‘ˆ ğ‘ğ‘¡ =(â„ ğ‘ğ¼ ğ‘ğ‘¡)+ âˆ‘ï¸ (ğ‘ ğ‘–ğ‘— âˆ‘ï¸ ğ‘¥ ğ‘–ğ‘—ğ‘˜ğ‘¡)/ğ‘›ğ‘ ğ‘¡ (16)
(ğ‘–,ğ‘—)âˆˆğ´ ğ‘˜âˆˆğ¾
ğ‘
ğ‘¡
â‰¤ğ‘€ ğ‘¡ğ‘¦
ğ‘¡
âˆ€ğ‘¡ âˆˆğ‘‡ (6)
Thedeltautilitybetweentwostatesofthesameperiodtcanbe
calculatedbysubtractingtheutilityoftheinitialstatefromthatof
ğ¼0ğ‘¡ â‰¤ğ¿0 âˆ€ğ‘¡ âˆˆğ‘‡ (7)
thefinalstate:
âˆ‘ï¸
ğ¼ ğ‘–,ğ‘¡âˆ’1+ ğ‘ ğ‘–ğ‘˜ğ‘¡ â‰¤ğ¿ ğ‘– âˆ€ğ‘– âˆˆğ‘ ğ¶,âˆ€ğ‘¡ âˆˆğ‘‡ (8) Î”ğ‘ˆ ğ‘ğ‘¡ =ğ‘ˆ ğ‘ğ‘¡ ,ğ‘“ âˆ’ğ‘ˆ ğ‘ğ‘¡ ,0 (17)
ğ‘˜âˆˆğ¾ Then,thetotaldeltautilityfortwoperiods,e.g.t=1andt=2,
ğ‘ ğ‘–ğ‘˜ğ‘¡ â‰¤ğ‘€ ğ‘–ğ‘¡ğ‘§ ğ‘–ğ‘˜ğ‘¡ âˆ€ğ‘˜ âˆˆğ¾,âˆ€ğ‘– âˆˆğ‘ ğ¶,âˆ€ğ‘¡ âˆˆğ‘‡ (9) canbecalculatedasfollows:
âˆ‘ï¸ ğ‘§
ğ‘–ğ‘˜ğ‘¡
â‰¤1 âˆ€ğ‘– âˆˆğ‘ ğ¶,âˆ€ğ‘¡ âˆˆğ‘‡ (10) âˆ‘ï¸ Î”ğ‘ˆ ğ‘ğ‘¡ =Î”ğ‘ˆ ğ‘1 +Î”ğ‘ˆ ğ‘2 (18)
ğ‘˜âˆˆğ¾ ğ‘¡âˆˆ[1,2]
Theinventorycostâ„ isanintrinsicparameterfromeveryre-
âˆ‘ï¸ âˆ‘ï¸ ğ‘
ğ‘¥ ğ‘—ğ‘–ğ‘˜ğ‘¡ + ğ‘¥ ğ‘–ğ‘—ğ‘˜ğ‘¡ =2ğ‘§ ğ‘–ğ‘˜ğ‘¡ âˆ€ğ‘˜ âˆˆğ¾,âˆ€ğ‘– âˆˆğ‘,âˆ€ğ‘¡ âˆˆğ‘‡ (11) tailer.Thetermğ¼ ğ‘ğ‘¡representsthedecisionvariablesofaretailerâ€™sde-
ğ‘—âˆˆğ‘ ğ‘—âˆˆğ‘ mandplan.Theshippingcost,denotedby(cid:205) (ğ‘–,ğ‘—)âˆˆğ´(ğ‘ ğ‘–ğ‘—(cid:205) ğ‘˜âˆˆğ¾ğ‘¥ ğ‘–ğ‘—ğ‘˜ğ‘¡)/ğ‘›ğ‘ ğ‘¡,
âˆ‘ï¸ illustratestheaggregatecostsofeachroutesegmenthighlightedin
ğ‘
ğ‘–ğ‘˜ğ‘¡
â‰¤ğ‘„ğ‘§
0ğ‘˜ğ‘¡
âˆ€ğ‘˜ âˆˆğ¾,âˆ€ğ‘¡ âˆˆğ‘‡ (12)
greeninFigures2and4-thenumericalvaluesingreenrepresent
ğ‘–âˆˆğ‘ğ¶
theircalculatedcosts.B.1 Transaction1
Î”ğ‘ˆ 31 =ğ‘ˆ 31 ,ğ‘“âˆ’ğ‘ˆ 31 ,0= [âˆ’(2âˆ—0+(200+320+200+200+300)/4)]âˆ’(0)=âˆ’325 Î”ğ‘ˆ 21 =ğ‘ˆ 21 ,ğ‘“âˆ’ğ‘ˆ 21 ,0=0âˆ’[âˆ’(2âˆ—15+(200+400+350+300)/3)] =446.7
(19) (27)
Î”ğ‘ˆ 32 =ğ‘ˆ 32 ,ğ‘“âˆ’ğ‘ˆ 32 ,0=(0)âˆ’[âˆ’(2âˆ—10+(200+320+200+300)/3)] =+340 Î”ğ‘ˆ 22 =ğ‘ˆ 22 ,ğ‘“âˆ’ğ‘ˆ 22 ,0= [âˆ’(2âˆ—0+(200+320+200+300)/3)]âˆ’(0)=âˆ’340
(20) (28)
Î”ğ‘ˆ 11 ,2,4=âˆ’(200+320+200+200+300)/4)
(21)
Î”ğ‘ˆ 41 =âˆ’(3âˆ—5+(450+200+200+300)/3)âˆ’(0)=âˆ’398.3 (29)
âˆ’[âˆ’(200+500+200+300)/3] =95
Î”ğ‘ˆ 12 ,2=âˆ’(200+400+300)/2)âˆ’[âˆ’(200+320+200+300)/3] =âˆ’110
Î”ğ‘ˆ 42 =0âˆ’[âˆ’(3âˆ—0+(400+150+200+300)/3)] =350 (30)
(22) Thus,
Î”ğ‘ˆ 42 =0 (23) âˆ‘ï¸ Î”ğ‘ˆ 2ğ‘¡ =Î”ğ‘ˆ 21 +Î”ğ‘ˆ 22 =446.7âˆ’340=106.7 (31)
Thus, ğ‘¡âˆˆ[1,2]
âˆ‘ï¸ Î”ğ‘ˆ 3ğ‘¡ =Î”ğ‘ˆ 31 +Î”ğ‘ˆ 32 =âˆ’325+340=15 (24)
ğ‘¡âˆˆâˆ‘ï¸ [1,2]Î”ğ‘ˆ 4ğ‘¡ =Î”ğ‘ˆ 41 +Î”ğ‘ˆ 42 =âˆ’398.3+350=âˆ’48.3 (32)
ğ‘¡âˆˆ[1,2] Forthe(Y,N)outcome:
âˆ‘ï¸ Î”ğ‘ˆ 1ğ‘¡ ,2=Î”ğ‘ˆ 11 ,2+Î”ğ‘ˆ 12 ,2=95+(âˆ’110)=âˆ’15 (25)
ğ‘¡âˆˆ[1,2] Î”ğ‘ˆ 21 =0âˆ’[âˆ’(2âˆ—15+(200+400+350+300)/3)] =446.7 (33)
âˆ‘ï¸ Î”ğ‘ˆ 4ğ‘¡ =Î”ğ‘ˆ 41 +Î”ğ‘ˆ 42 =95+0=95 (26)
ğ‘¡âˆˆ[1,2] Î”ğ‘ˆ 22 =âˆ’(2âˆ—0+(200+320+150+200+300)/4)]âˆ’(0)=âˆ’292.5 (34)
B.2 Transaction2
Î”ğ‘ˆ 41 =0 (35)
Î”ğ‘ˆ 42 =âˆ’(3âˆ—0+(200+320+150+200+300))/4
(36)
âˆ’[âˆ’(3âˆ—0+(400+150+200+300)/3)] =57.5
Thus,
âˆ‘ï¸ Î”ğ‘ˆ 2ğ‘¡ =Î”ğ‘ˆ 21 +Î”ğ‘ˆ 22 =446.7âˆ’292.5=154.2 (37)
ğ‘¡âˆˆ[1,2]
Figure6:Transaction2-Substitutionbetweentworetailersâ€™
âˆ‘ï¸ Î”ğ‘ˆ 4ğ‘¡ =Î”ğ‘ˆ 41 +Î”ğ‘ˆ 42 =0+57.8=57.5 (38)
deliveries.Negotiationoutcome(Y,N). ğ‘¡âˆˆ[1,2]
Forthe(N,Y)outcome:
Î”ğ‘ˆ 21 =âˆ’[2âˆ—15+(200+400+200+200+300)/4]
(39)
âˆ’[âˆ’(2âˆ—15+(200+400+350+300)/3] =91.7
Î”ğ‘ˆ 22 =0 (40)
Î”ğ‘ˆ 41 =âˆ’(3âˆ—5+(200+400+200+200+300)/4)âˆ’(0)=âˆ’340 (41)
Figure7:Transaction2-Substitutionbetweentworetailersâ€™
Î”ğ‘ˆ 42 =0âˆ’[âˆ’(3âˆ—0+(400+150+200+300)/3)] =350 (42)
deliveries.Negotiationoutcome(N,Y). Thus,
AlongwithFigure4,Figure6and7illustratestheTransaction
âˆ‘ï¸ Î”ğ‘ˆ 2ğ‘¡ =Î”ğ‘ˆ 21 +Î”ğ‘ˆ 22 =91.7+0=91.7 (43)
2outcomes(Y,N)and(N,Y)respectively.Theirupdatedshipping ğ‘¡âˆˆ[1,2]
costsarerepresentedingreen.Thetotaldeltautilityiscalculated âˆ‘ï¸ Î”ğ‘ˆ 4ğ‘¡ =Î”ğ‘ˆ 41 +Î”ğ‘ˆ 42 =âˆ’340+350=10 (44)
foreveryoutcome.Forthe(Y,Y)outcome:
ğ‘¡âˆˆ[1,2]Sincethe(Y,N)transactionoutcomewaschosenbyretailers2
and4inthenegotiation,retailers1,3and5areaskedtovotein Î”ğ‘ˆ 52 =0 (48)
favororagainstit.Thus,theirdeltautilityforthevotingphaseis Thus,
calculatedas:
âˆ‘ï¸ Î”ğ‘ˆ 1ğ‘¡ =Î”ğ‘ˆ 11 +Î”ğ‘ˆ 12 =âˆ’133.3+57.5=âˆ’75.8 (49)
Î”ğ‘ˆ 11 ,5=âˆ’(450+350+300)/2)âˆ’[âˆ’(200+400+350+300)/3] =âˆ’133.3 ğ‘¡âˆˆ[1,2]
(45) âˆ‘ï¸ Î”ğ‘ˆ 3ğ‘¡ =Î”ğ‘ˆ 31 +Î”ğ‘ˆ 32 =0+57.5=57.5 (50)
Î”ğ‘ˆ 31 =0 (46) âˆ‘ï¸ğ‘¡âˆˆ[1, Î”2 ğ‘ˆ]
5ğ‘¡ =Î”ğ‘ˆ 51 +Î”ğ‘ˆ 52 =âˆ’133.3+0=âˆ’133.3 (51)
Î”ğ‘ˆ 12 ,3=âˆ’(200+320+150+200+300)/4)
(47)
ğ‘¡âˆˆ[1,2]
âˆ’[âˆ’(400+150+200+300)/3] =57.5