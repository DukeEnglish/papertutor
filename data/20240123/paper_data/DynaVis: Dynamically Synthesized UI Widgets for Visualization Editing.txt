DynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing
PRIYANVAITHILINGAM,
HarvardUniversity,USA
ELENAL.GLASSMAN,
HarvardUniversity,USA
JEEVANAPRIYAINALA,
Microsoft,USA
CHENGLONGWANG,
Microsoft,USA
Fig.1. ScreenshotofDynaVistool.(a)Importeddataisshownontheleftasatable.(b)Userscanprovidenaturallanguagecommand
toeditthechartusingthecommandbar.(c)Thevisualizationisdisplayedonthecenter.(d)Thewidgetspanelshowstheautomatically
synthesizeddynamicwidgetsbasedonuser‚Äônaturallanguagecommands,inreversechronologicalorder(recentlyaddedwidgetsat
thetop).
UsersoftenrelyonGUIstoeditandinteractwithvisualizations‚Äîadauntingtaskduetothelargespaceofeditingoptions.Asaresult,
usersareeitheroverwhelmedbyacomplexUIorconstrainedbyacustomUIwithatailored,fixedsubsetofoptionswithlimited
editingflexibility.NaturalLanguageInterfaces(NLIs)areemergingasafeasiblealternativeforuserstospecifyedits.However,NLIs
forgotheadvantagesoftraditionalGUI:theabilitytoexploreandrepeateditsandseeinstantvisualfeedback.
WeintroduceDynaVis,whichblendsnaturallanguageanddynamicallysynthesizedUIwidgets.Astheuserdescribesanediting
taskinnaturallanguage,DynaVisperformstheeditandsynthesizesapersistentwidgetthattheusercaninteractwithtomake
furthermodifications.Studyparticipants(n=24)preferredDynaVisovertheNLI-onlyinterfacecitingeaseoffurthereditsandediting
confidenceduetoimmediatevisualfeedback.
Authors‚Äôaddresses:PriyanVaithilingam,pvaithilingam@g.harvard.edu,HarvardUniversity,Boston,USA;ElenaL.Glassman,glassman@seas.harvard.edu,
HarvardUniversity,Boston,USA;JeevanaPriyaInala,jinala@microsoft.com,Microsoft,Redmond,USA;ChenglongWang,chenwang@microsoft.com,
Microsoft,Redmond,USA.
1
4202
naJ
91
]CH.sc[
1v08801.1042:viXra2 Vaithilingam,etal.
Fig.2. DynaVisdynamicallysynthesizeswidgetsbasedonnaturallanguagecommandsforvisualizationediting.Theusercandescribe
anedittothevisualization,andDynaVismodifiesthevisualizationandsynthesizesadynamicwidgetwhichtheusercanusefor
furtheredits(shownasùëé‚Üíùëè).Alternatively,theusercandirectlyaskforadynamicwidgettoperformedits(shownasùëé‚Üíùëê).
1 INTRODUCTION
Moderninteractivevisualizationauthoringtools(e.g.,Tableau[10],PowerBI[6],Lyra[46],Charticulator[45])have
greatlyreducedtheefforttocreateinitialvisualizationsfromdata.Withthesetools,authorsonlyneedtospecify
high-levelmappingsfromdatafieldstovisualproperties,andbehindthescenes,thesetoolsautomaticallyprovide
‚Äúsmartdefaults‚Äù[47,56]tofillinhundredsofchartparameters‚Äîhidinglow-leveldetails.
Whilethesesmartdefaultsareoftensufficientforexploratoryanalysis,authorswhowanttorefinethevisualization
tobettercommunicatetheirinsightsandreaderswhowanttocustomizethevisualizationtoanswertheiranalysis
objectivesoftenfindthemselvesinneedofeditingthesedefaultvisualizations.Forexample,topreventlongerlabels
fromoverlappinginalinechart,theuserhastorotatethelabelsintheùë•-axis.Or,theuserwillhavetoaddafilterto
onlyincludedatawithinagivendaterange(seeFigure2).
Theseeditsareoftenconsidered‚Äúsmalltweaks‚Äùofthevisualization,buttheselong-tailededitscanbeverychallenging.
First,theuserneedstodistinguishwhichoptionswillleadtothedesirededitingeffect(e.g.,understandthatthey
needthe‚Äútick‚Äùoptionasopposedto‚Äúscale‚Äùor‚Äúlegend‚Äùtoeditlabelangle),whichrequiresexpertiseonlow-level
visualizationgrammar.Then,theuserneedstodiscovertheeditoptioninthetoolwhichmaybeburiedintiersof
menusandpanelsamongallothersinatoolGUI(e.g.,theuserneedstoright-clicktheùë•-axistoopenitsproperty
editor,locatethesub-panelonticks,findtherotationoptiontochangethelabelangle),whichcanbechallengingto
achievewithoutdecenttoolexpertise.Asaresult,usersareeitherpresentedwithacomplexUIwheretheyareswamped
withoptions,oratailoredinterfacedesignedtosimplifynavigationwheretheyoftenfindthemselvestoorestrictedto
performthedesiredcustomization.
Anemergingapproachtoaddressthisvisualizationeditingandrefinementchallengeistodesignnaturallanguage
interfaces(NLIs)thatallowuserstodescribeeditingeffectsinnaturallanguage.Then,basedontheuser‚Äôsinstructions,
thetoolsautomaticallyinfernecessaryoptionsandcorrespondingvaluestoapplytheedits.Forexample,theuser
cangivethenaturallanguagecommandto‚Äúmovetheùë•-axistitletotheleftsideoftheaxis‚Äù,whichwilltranslatetoDynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 3
changingthe‚ÄútitleAnchor‚Äùpropertyofthe‚Äúùë•‚Äùencodingtothevalue‚Äústart‚Äù.However,whileNLIsaddressthediscovery
andnavigationchallenges,theyforgothebenefitsofGUI,especiallytheabilitiestoperformfine-grainededits,obtain
immediatevisualfeedbackfromeditingresults,andquicklyundoandreapplyedits.Forexample,iftheuserwantsto
makethewidthofthestrokesinthelinechartthicker,theydonotalwayshavetheexactsizeinmind,andwouldoften
tryoutdifferentsizesbeforechoosingone.Or,iftheuserwantstochangethecolorsofthebarchart,theymaynot
knowtheexacthex(orRGB)valuetoprovide.SuchlimitationsrestrictNLIs‚Äôapplicationsinvisualizationediting.
Toaddressthevisualizationeditingandrefinementchallenge,wedesignanewinteractionapproach,interaction
viadynamicallysynthesizedGUIwidgets,anddevelopatoolnamedDynaVisforvisualizationediting.Ourkeydesign
insightistoblendnaturallanguageinterfaceswithinteractiveGUIwidgetssothatuserscanbenefitfrombothNLIs‚Äô
reductioninthegulfofexecution[11]andGUI‚Äôsinteractivity.Toperformavisualizationeditingtask,theuserstartsby
eitherdescribingwhateditstheywanttoperform(e.g.,‚Äúrotateùë•-axislabel45degrees‚Äù)ordirectlyaskingforaGUI
widgetthattheyenvisiontoperformtheeditswith(e.g.,‚Äúgivemeaslidertocontrolùë•-axislabelangles‚Äù);eitherway,
DynaVissynthesizesaGUIwidget(alongwithapresetvaluefromuser‚Äôsspecificationintheformercase)usingaLarge
LanguageModel(LLM)fortheusertoexploreandperformsubsequentedits.
Besidestheimmediatebenefitsofreducednavigationoverheadandinteractivityforexploringediteffects,users
canalsoeasilycomposeandcoordinatemultipleeditsusingdynamicwidgetsastheypersistaftersynthesisforquick
editingaccess.Behindthescenes,wedesignedawidgetsynthesisenginepoweredbyalargelanguagemodelthat
translatesuserinputsintoanHTMLimplementationofthewidgetandacall-backfunctionthatconnectsthewidget
inputstovisualizationproperties.DynaVisishighlyexpressiveandsupportsbothchartdesignedits(e.g.,adjusting
tickspacing,legendposition,colorscheme,labelandtitlefontproperties)forauthorstorefinevisualizations,and
data-relatededits(e.g.,generatingfilters,zoomingcontrollers,andsort)forreaderstointeractivelyexplorevisualizations
withoutpre-builtinteractivewidgets.Ourstudywith24participantsshowsthatparticipantsprefertouseDynaVis
overNLI-onlyinterfacesduetotheeaseofrepeatingedits,andincreasedconfidencewheneditingusingaGUIdueto
immediatevisualfeedback.
Ourcontributionsareasfollows:
‚Ä¢ Anewinteractiveapproachforvisualizationediting,dynamicwidgets,thatcombinesNLIwithGUIwidgetsto
reducethegulfofexecutionandenhanceinteractivity.
‚Ä¢ Awidgetsynthesisenginethatleverageslargelanguagemodelstotranslatenaturallanguageinputsinto
widgetsandcontrolfunctions.
‚Ä¢ AuserstudytoevaluatehowusersuseDynaVistosolvevisualizationeditingtasks.
2 USAGESCENARIO
Aliceisaconsultantanalyzingstocktrendsoftechnologycompaniesusingspreadsheets,andsheneedstocreate
visualizationstopresentheranalysisresultstohercollaborator.Below,wedescribeAlice‚ÄôsexperienceofusingDynaVis
toeditandenhancehercharts.Figure1showstheUIof DynaVis,whichcontainsfourmaincomponents:(a)thedata
panel,(b)thecommandbarforspecifyingvisualizationandeditingcommands,(c)thevisualizationpanelthatshows
thecurrentworkingchart,and(d)thepanelofsynthesizeddynamicwidgetsthatuserscanusetomanagewidgetsand
edittheworkingchart.4 Vaithilingam,etal.
Fig.3. (1)AliceasksDynaVistocreatealinecharttoshowthestocktrendbyprovidinganaturallanguageprompt.(2)Shethenasks
DynaVistoeditthelegendpositionbygivinganaturallanguagecommand
Initialchart. Alicestartsbyimportingthedata‚Äústocks.csv‚Äùintothetool,andthedatashowsupinthedatapanel
(Figure1-a).Tocreateachart,sheprovidesanaturallanguagedescriptionofthechart‚Äúcreatealinechartshowingthe
stocktrends‚ÄùinFigure1-b.Uponsubmission,DynaVisinvokesanLLMtogeneratealinechartbasedoninformation
fromthedatasetandtheNLdescription(Figure3).Besidescreatingthechartusingnaturallanguage,Alicecanalso
importtheVega-Litevisualizationspecshecreatedfromothertools.
Aliceisnotquitesatisfiedwiththeinitialvisualizationbecause(1)thelegendtakestoomuchspaceontheright,(2)
ùë•-axislabelsaretoosmalltoread,and(3)thecolorschemeisnotideal,AlicedecidestouseDynaVistorefinethechart.
WithDynaVis,Alicehastwooptionstoeditcharts:(1)provideanaturallanguageinstructioninthecommandbar
(Figure1-b)todescribetheeditshewantstoachieve,and(2)explicitlyaddawidgetbyclickingthe‚Äú+‚Äùbuttonatthe
topofthewidgetspanel(Figure1-d)andprovidinganaturallanguagedescriptionofthedesiredwidget.Eitherway,
DynaVisdynamicallygenerateswidgetsforAlicetoperformedits.
Adjustinglegendpositionviacharteditingcommands. Alicefirstwantstoadjustthelegendpositiontokeep
thelegendcontainedwithinthemainchartcanvas.Shedecidestousecharteditingcommandstodescribechanges
shewantstoapply.Forthis,sheprovidestheinstruction‚Äúmovethelegendtotheleftofthechart‚Äùthroughthenatural
languagecommandbar.Basedontheinstruction,DynaVisupdatesthevisualizationspectore-positionthelegend.
Additionally,DynaVisalsoautomaticallygeneratesawidgetwithadrop-downmenuforvariouslegendpositions
pre-populated.AsshowninFigure3-(2),withthiswidget,Aliceexperimentswithmultiplelegendpositionsbefore
finalizingherfinalchoiceof‚Äútop-leftcorner‚Äù,whichis,infact,abetteroptionthan‚Äúleft‚ÄùthatAlicedidn‚Äôtexpectinthe
beginning.
Coordinatededitingoftextsizeandrotationangleofùë•-axislabels. Next,Alicewantstoresolveissueswith
ùë•-axislabelswhicharecurrentlytoosmalltoread.However,thiscanbeaquitechallengingedit:increasingthefont
sizewouldmostlikelymakelabelsoverlapwitheachother;andwhileoverlapscanberesolvedbyrotatinglabelangles,
toomuchrotationwouldmakethemlessreadable.Thus,Aliceneedstocoordinatetheeditstolabelfontsizeand
rotationangletofindtherightbalance.Alicedoesn‚Äôthaveaclearideaonwhat‚Äôstheoptimalcombinationyet,thusshe
startswithanexploratorycommand‚Äúincreasetheùë•-axistextsizeto20androtatethelabelsby60degrees‚Äù.DynaVis
updatesthechartbasedonthecommandandpresentsherwitha‚Äúùë•-axisLabelEditor‚Äùwidgetthatletshereditthetext
sizeandanglesoftheùë•-axislabelssimultaneously(seeFigure4).Withthis,Alicecantryoutmanycombinationswith
easewithouthavingtore-issuetheeditinginstructions.Aftersometrial-and-error,shesettlesonafontsizeof15and
rotationangleof‚àí45thatsuitsherneeds.DynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 5
Fig.4. (1)AliceasksDynaVistoincreasetheùë•-axislabeltextsizeto20androtateitby45degreescounter-clockwise.(2)DynaVis
editsthechartandalsoaddsadynamicallysynthesizedwidgetforAlicetomakefurtherchangesinthefuture.
Fig.5. (1)ThistimeAliceexplicitlyrequestsforawidgettochangethecolorofeachstocksymbolbyclickingthe‚Äú+‚Äùbuttonand
givingthenaturallanguageprompt.(2)DynaVissynthesizesawidget,withoutmakinganyeditstothechart.
Choosingcolorsviawidgetcreationcommands. Now,Alicewantstomodifythedefaultcolorpaletteofthe
chart.SinceAlicedoesnotyethaveconcretecolorsinmind,shedecidestousethewidgetcreationfeatureof DynaVis
toaskforawidgettoexplorethecoloroptions.Todoso,sheclicksthe‚Äú+‚Äùbuttonatthetopofthewidgetpanel
(Figure5)toopenthewidgetcreationcommandbox,shethentypesintheprompt‚Äúchangethecolorofeachstock
symbol‚Äù.DynaVis,whichunderstandsthecurrentcontextofthechartandthecurrentdataset,generatesatailored
‚ÄúStockcolorpicker‚Äùwidgetthatallowshertopickcolorsforeachstocksymbolinthechart(seeFigure5).DynaVis
evenknowsallthesymbolsthatarepartofhercurrentdataset,andcangenerateatailoredwidgetforher.Alicecan
usethiswidgettotrydifferentcolors,getinstantvisualfeedback,andchoosethedesiredcolorsforherchart.
Dataexplorationwithdatafilterwidgets. AfterAlicefinishesupthecustomization,sheemailsthevisualization
tohercollaboratorAlexwhoplanstoincludethevisualizationinanewsarticleheiswriting.Aftersomeanalysis,
AlexwantstocomparethestocktrendsforjustMSFTandIBMtogetdeeperinsights.Insteadofgoingbackand
askingAlicetodothat,AleximportsthevisualizationspecinDynaVistoperformtheedits(aJSONVega-Litespec
thatcontainsdataaselaboratedmoreinsection3).Afterimporting,Alexprovidesthecommand‚ÄúcompareonlyMSFT
andIBM‚Äù,andDynaVisquicklyupdatesthecharttorunafiltertransformationtoshowonlythedataforMSFTand6 Vaithilingam,etal.
IBM.DynaVisalsoprovidesa‚ÄúSymbolFilter‚Äùwidgetwithacheckboxforeachstocksymbol,usingwhichAlexcan
continuetocomparedifferentstocktrendschoosingoneormoresymbolstocompare(Figure1,thirdwidget).DynaVis
alsointelligentlyidentifiesthatthiswidgethasadata-filteringtransformandprovidesaswitcherforuserstoenableor
disablethetransformation.
Next,AlexasksforaDateslicerwidgettozoomthevisualizationbyusingasmallertimewindow(Figure1,second
widget).Sincethestockpricesofthetwocompaniesthatarecomparedaremuchlowerthanothercompanies,Alex
alsorequestsawidgettoslicetheùë¶-axisrange.Nowusingthegeneratedùë¶-axisrangeslicer,Alexcanzoominandout
oftherangewindowtoseeminutepricechangeswithinthetimewindowofhischoosing(Figure1,firstwidget).After
findingthedesiredvisualization,Alexincludesthefinalvisualizationinhisarticleforpublication.
Remark: AliceandAlexcancompletethevisualizationrefinementandexplorationtaskswitheasethankstothe
followingbenefitsof DynaVis.
‚Ä¢ InconventionalGUI,Aliceneedstonavigatemenusandpanelstolocatewidgetstoperformedits,which
requiresherproficiencyinbothGUIandvisualizationterminologies.DynaVislowersthisbarrierbyallowing
Alicetoobtaindesiredwidgetsvianaturallanguagedescriptions.
‚Ä¢ SynthesizedwidgetsallowAlicetoperformfine-grainededitsandobtainimmediatevisualfeedbackfrom
editingresults,whichenableshertoexploreandcoordinateeditingoptions.Thisallowshertofindoptimal
editsthroughtrialanderrorforeditsshepreviouslydidn‚Äôtknowprecisely(e.g.,color,rotationangle,andtext).
Alicewon‚ÄôtbeabletoexploreeditoptionseasilywithanNLIasitrequireshertodescribeconcreteparameter
valuesandhasadelayedspecification-feedbackcycle.
‚Ä¢ DynaVisishighlyexpressiveandsupportsbothchartrefinementeditsfortheauthorAliceanddatamanipulation
editsforthereaderAlex.WithoutDynaVis,AlexwouldeitherhavetointeractwithAliceeverytimehewants
anupdatedversionofthechartoraskAlicetocreateaninteractivevisualizationwhichrequiresadditional
effortstotailoroptions.
‚Ä¢ Asdynamicwidgetspersistaftercreationandarefullycompositional,AliceandAlexcangobackandrepeat
edits(e.g.,updateùë•-axisrangeasanalysisobjectivechanges)orrevertcertainedits(e.g.,undodatafiltering).
ThiscanbechallengingwithanNLIaschangesarenon-compositional,andeveryupdaterequiresanewediting
command.Or,withaconventionalGUI,theywouldneedtokeeptrackofalleditstheyhavedoneinorderto
repeatorredoedits.
3 DYNAVISSYSTEMDESIGNANDIMPLEMENTATION
Inthissection,wefirstdescribethedesignprinciplesbehindourcoreconceptofwidgets.Wethendescribeoursynthesis
frameworkfordynamicallygeneratingthesewidgets.DynaVisisacross-platformwebapplicationthatisimplemented
withReactandTypescriptforthefront-enduserinterfaceandPythonfortheback-endserver.
3.1 DynamicWidgets
Widgetsasmodularsub-components. WithDynaVis,weintroducedynamicwidgets,whicharesmallmodular
UIcomponentsthatfocusonaparticulareditorinteractiontaskathand.Theeditcaninvolvesimplechangestooneor
multiplechartproperties,suchaschangingthepositionofthelegendorslicing,orcaninvolveadatatransformation
operationexecutedonthedatabeforechartrendering,suchasfilteringspecificrangesontheaxes.Atahighlevel,a
widgethastwocomponents:DynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 7
Fig.6. Adynamicwidgetiscomprisedoftwocomponents‚Äî(1)TheHTMLscriptdefiningtheUI(2)TheJScallbackfunctionthat
listensforthechangesintheUItoeditthevisualization.
‚Ä¢ AnHTMLscriptthatdescribestheUIelementsofthewidgetwhichtheuserwillinteractwithtomanipulate
thevisualization.e.g.,AnHTMLscriptcontainingan<input>elementoftypeslidertochangethex-axislabel
sizeofthechart(seeFigure6).
‚Ä¢ AJavaScriptcallbackfunctionthatcontainsthecodethatwillbeexecutedtomanipulatethevisualizationand/or
datawhenevertheuserinteractswiththewidget.Thiscallbackfunctionisoftheformcallback(event,chart)=>
(transforms,chart),whichacceptsboththeHTMLeventobjectandthecurrentchartasinputsandgeneratesan
optionallistoftransformsandtheupdatedchartasoutputs.ThiscallbackfunctionisattachedtotheonChange
eventhandlersofalltheinputelementsintheHTMLscript.
AnexampleofthedynamicwidgetisshowninFigure6alongwithitsHTMLscriptandJavascriptcallbackfunction.
Oneofthemaindesignchoicesofoursystemistoensurethemodularityofthewidgetssothateditsfromtwo
differentwidgetsdonotconflictormanipulatethechartinunexpectedways.Thisrequirementhasimplicationsfor
howwehandlechartsandtransforms:
Handlingcharts. Toensurethateachwidgetonlychangesasmallcomponentofthechart,werecognizedthat
usingadeclarativechartrepresentationispreferabletoanimperativeone.Onesuchdeclarativerepresentationisto
useaJSONobject(calledaspecification)toencodethepropertiesofthechart.Forexample,withJSONrepresentation,
tochangethex-axistitle,onecanjusteditthechartspecificationasspec.encoding.x.title="axistitle"withouthaving
tochangeanythingelseregardingthechart.
Inthispaper,weuseVega-Litespecifications[47]forrepresentingchartssinceitprovidesuswithaconciseand
declarative representation of visualization while also maintaining expressiveness. Vega-Lite also provides a well-
supportedrenderingenginethatiscompatiblewithallthemajorwebframeworks.
Handlingdatatransformations. Datatransformationsareanimportantpartofvisualizationediting.DynaVis
handlesalltheVega-Litedatatransformations,e.g.,filter,fold,flatten,etc.InDynaVis,transformsarerepresentedasa
listofobjectssimilartoVega-Lite.Eachwidget‚Äôscallbackoutputsalistoftransforms.Thetransformsareperformedin
theorderinwhichtheyarespecifiedinthislist.Iftherearemultiplewidgetswithtransforms,weexecutetransformsin
thechronologicalorderofthewidgets.Toenablethis,wekeepamappingofthewidgetstotheirmostrecentcallback‚Äôs
outputtransforms,sothatwecanexecuteallwidget‚Äôslatesttransformsintheaboveorderbeforerenderingthechart
foreveryedit.Foreverywidgetthataddstransformationstothechart,DynaVisaddsaswitchsothatuserscanenable
ordisablethetransform.e.g.,Let‚ÄôstaketheexampleofAlexfromSection2.Whentheyrequestawidgettoslicethe8 Vaithilingam,etal.
Fig.7. DynaVissystemarchitecture.TheDataSummarizergeneratesasummaryfrominputdatatoassistvisualizationandwidget
synthesis.TheChartEngineapplieschangestovisualizationsbasedoncharteditinginstructions,andtheWidgetEngineisresponsible
forsynthesizingdynamicwidgetsfrombothtypesofusercommands.
Fig.8. TheSummarizerconstructsanNLsummary Fig.9. Giventhedatasummary,theNLprompt,andan(optional)chart
fromextracteddataproperties. specification,thechartengineproducesanupdatedchartspecification.
daterange,thesynthesizedwidgetaddsafiltertransformonthedata.DynaVisidentifiesthisasaspecialTransform
Widget,andallowsAlextodynamicallyenableordisablethetransformtoseetheoriginalchartandthefilteredchart.
3.2 SynthesisFramework
Belowwedescribeoursynthesisframeworkbysplittingitintothreestages:pre-processing,LLM-basedsynthesis,
andpost-processing.Ourframeworkcomprisesof3mainmodules:aDataSummarizer,aChartEngine,andaWidget
EngineasshowninFigure7.
3.2.1 Pre-processing:DataSummaryandVisualizationPre-processing.
Togeneratevisualizationsandsynthesizedynamicwidgets,theLLMneedsanaccuratecontextofthedatatheuser
isworkingwith.However,duetothelimitedcontextwindowsupportedbyLLMs,wecannotpassthewholedatatothe
LLM.Hence,toaugmentLLMswithgroundingcontextaboutthedata,weborrowtheDataSummarizerfromLida[22].
Thissummarizerisusedtoproduceadenseyetcompactsummaryforanygivendatasetthatisusefulasagrounding
contextforvisualizationtasks.ForeveryLLMqueryinthesubsequentsteps,wepassthedatasummaryinsteadof
thedata.First,thesummarizerappliesrulestoextractdatasetpropertiesincludingatomictypes(e.g.,integer,string,
boolean),generalstatistics(min,max,uniquevalues,etc.),andarandomlistofnsamplesforeachcolumnusingthe
pandaspythonlibrary[8].ThenthebasesummaryisenrichedbyanLLMtoincludeasemanticdescriptionoftheDynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 9
dataset(e.g.,adatasetofstockpricesfortop5techcompaniesfor10years),andfields(e.g.,StockpriceinUSD)aswell
asfieldsemantictypeprediction[62](seeFigure8).
BeforesendinganyeditorwidgetsynthesisqueriestotheLLM,DynaVissplitsthedatafromthevisualization
specification,andanyotherunnecessarychartproperties(likeconfigurationpropertieslikewidth,height,etc.)to
preventcontextoverflow.ThisalsoensuresthattherenderingenginecanremainresponsivetoUIchanges.
3.2.2 LLM-basedSynthesisofVisualizationandDynamicWidgets.
Synthesizingvisualization. TheChartEngineisprimarilyresponsibleforsynthesizingvisualizations‚Äîeither
newvisualizationsoreditingexistingvisualizationsbasedonthenaturallanguagepromptfromtheuser.TheChart
Engineusestheenricheddatasummaryfromthesummarizer,theuserprompt,andoptionallyanexistingVega-Lite
specificationtoreturnaVega-LitespecificationusingaLLM[Fig9].ToensurethattheLLMproducesavalidVega-Lite
specification,andtopreventversion-basederrors,weinstructthemodeltoonlyusetheVega-LiteSchemav5andto
produceavalidJSONoutputinamarkdowncode-blockformatwithlanguagedescriptors.Sincechat-basedmodelslike
GPT3.5aretrainedtoproduceverboseoutput,usingaMarkdowncode-blockformatensureswecanreliablyextractthe
codeblock.Tomaintainconsistencyofoutput,weprovidesomefew-shotlearningexamplesofVega-Litespecification
withitsdescriptiontothemodel.
Synthesizingdynamicwidgets. TheWidgetEngineisprimarilyresponsibleforsynthesizingdynamicwidgets.
Thewidgetengineusesthedatasummary,currentVega-Litechartspecification,andtheuserprompttoreturnthe
widgetcomponents‚ÄìbothHTMLscriptandtheJavascriptcallbackfunction.
ToensurethattheLLMproducesavalidprogramforthewidgetweprovidestricttemplatesforHTMLandJavaScript.
TheHTMLtemplatedefinestheempty<div>stubwithcommentedinstructions.TheJavaScripttemplatehasanempty
JSfunctionstubwithapredefinedreturnvalue.Thistemplateimprovesthereliabilityandpredictabilityofthecode
generated.TemplatesalsohelpusverifythecodeinthenextstepofProgramAnalysis.Wealsoprovidedafew-shot
examplesofHTMLandJScodetothemodeltomaintainconsistencyofoutput.
3.2.3 Post-Processingthroughprogramanalysis.
Processingvisualizations. OnceweextracttheJSONspecificationfromthemarkdownoutput,weparsethe
specificationtocheckforJSONformattingerrorsandthencompiletheVega-Litespecificationtocheckforsyntaxor
schemaerrorsinthesynthesizedspecification.Incaseoferrors,weprovidetheerrormessageandaskthemodeltofix
theerrorsinthesameconversationcontext.Ifthisdoesn‚Äôtwork,were-trythepromptonceagain.
Processingdynamicwidgets. Topreventerrors,andensurethevalidityofthewidgets,DynaVisperformsaseries
ofpost-processingstepsontheHTMLandJScodesynthesizedbytheLLMusingprogramanalysis.Wementionsome
ofthemanystepsinvolvedinthepost-processingstagebelow.EachstepisachievedbyparsingtheHTMLandJScode
toanabstractsyntaxtree(AST)andmanipulatingtheAST.
‚Ä¢ ParsetheHTMLcode,toensuretherearenoconflictsintheHTML‚ÄúID‚Äùpropertybetweenthesynthesized
widgetsandpreviouswidgets.Ifwefindconflicts,weprogrammaticallymodifytheIDpropertyandmodifythe
correspondingJScallbackfunction.
‚Ä¢ ParsethesynthesizedJScallbackfunctiontoensureithastherightfunctionnameandvalidfunctionparameters.
‚Ä¢ IdentifyandreplacetheHTMLIDsusedinthecallbackfunctionthatweremodifiedintheHTMLscript.10 Vaithilingam,etal.
‚Ä¢ DynaVisensuresthatthepropertiesofthechartbeingeditedareeitheralreadypresentinthecurrentchartor
thecallbackfunctionhandlesthenullcasecorrectly.
3.3 UserInterfaceImplementation
DynaVisisimplementedasawebapplicationwithReactandTypescript.Weusethehtml-react-parser[7]libraryto
attachanddetachwidgetsontheflyastheyarecreatedanddeleted.DynaVis‚Äôsbackedhoststhedatasummarizer
(implementedinpandas)implementedasaflaskwebserverthatcommunicateswiththefront-endusingRESTAPI.
WeusetheOpenAIAPI[1]toissuequeriestotheLLM.Wechosegpt-3.5-turboasthetargetLLMinourcurrent
implementationfromOpenAIbecauseitstrikestherightbalanceofaccuracyvs.speed.Sincewehadtomakeeditsand
synthesizewidgetswithininteractivetimetopreventannoyingtheusers,theGPT-3.5modelwasresponsiveenough
andaccurateenoughtosuitourneeds.WehavealsotestedourtoolwiththemoreadvancedGPT-4model,which
supportslongercontextandhasbetterinstruction-followingcapabilitytogeneratewidgetsmoreaccurately.However,
thelatencyistoohighforsmoothinteraction.
4 USERSTUDYDESIGN
TounderstandhowuserscanuseDynaVistosolvevisualizationeditingtasks,weconductedawithin-subjectslab
studywith24participants.Inthestudy,usersareaskedtosolvetwosetsoffivevisualizationeditingtasks,oneset
usingDynaVisandanotherusingabaselineNLI-basedtool.Weaimtoanswerthefollowingresearchquestions:
RQ1 DoesDynaVisreduceusers‚Äôeffortstoeditvisualizations?
RQ2 Inwhatscenariosdousersprefertousedynamicwidgetscomparedtoabaselinetool?
RQ3 Whatareusers‚Äôstrategiestoworkwithdynamicwidgets?
4.1 Participants
Werecruited24participants(13female,10male,1chosenottodisclose)throughthemailinglistsoftworesearch
universities.Ofthe24participants,2workedwithdatavisualizationatleastoncedaily,4participantsworkedwith
visualizationsweekly,14participantsworkedwithvisualizationsatleastonceamonth,and4participantslessfrequently
butstilloccasionallyworkedwithdatavisualization.Participantsmentionedtheyhadpriorexperiencewithavariety
ofvisualizationtoolsandlibrariesincludingmatplotlib(Python),Seaborn(Python),ggplot(R),Tableau,Excel,D3,
andmore.NoneoftheparticipantshadanyexperiencewithVega-LiteorVegalibraries.Threeofthe24participants
reportedtheyperformeddataanalysisdaily,6participantsdiditweekly,8participantsdiditatleastafewtimesa
month,and7participantsdiditoccasionally(lessthanafewtimesamonth).Participantsreceiveda$25Amazongift
cardascompensationfortheirtime.
4.2 StudyConditions
Weconsiderthefollowingtwoconditionsinouruserstudy.WechoosetheNL-basedvisualizationeditingapproachas
thebaseline[23].
‚Ä¢ BaselineCondition(UINL): WemodifiedtheDynaVisinterfacewiththesupportforNaturalLanguage
Commandsalongwithasetofpre-populatedUIwidgetsforbasicchartmanipulation(e.g.,charttitle,axis
range,etc.)andremovethesupportfordynamicwidgets.ByprovidingbothNLandbasicUIsupportsforusers
tofreelychoosefrom,webelievethisisafairstate-of-the-artbaselinetoolforthestudy.Pre-populatedwidgetsDynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 11
aresimilartostaticUIusersusetoeditvisualizations(likeExcel,GoogleSheets,etc.).Fortheeditingtasks,
userscanuseacombinationofnaturallanguagecommandsandthepre-populatedwidgetstoeditthechart.
‚Ä¢ ExperimentCondition(UIDW):ThisisDynaViswiththesupportfordynamicwidgetsontopofUINL.With
thisUI,theuserscaneditthechartusingnaturallanguagecommands,addcustomdynamicwidgets,oruse
thesamesetofpre-populatedwidgets.Asanaddition,whenevertheuserprovidesanaturallanguageedit
commandtotheAI,wewillsynthesizeandautomaticallyaddadynamicwidget.Wedisplaythesynthesized
widgetsinreversechronologicalorder,sothelatestsynthesizedwidgetisshownatthetop.
Notethatwedidn‚Äôtexplicitlysetupawidget-onlybaselinebasedonanexistingvisualizationtoolasitwouldrequire
ustorestrictparticipantstoonlypeoplewithexperiencewithacertainvisualizationtool,hencelimitingthediversity
oftheparticipants.However,wedocollectuserfeedbackintheinterviewontheiropinionsonhowtheirexperiences
withDynaVisdifferfromtheirfavoritetools.
4.3 Tasks
Weselectedthreedatavisualizationtasksderivedfrompopulardatasets.Sinceourfocusisonvisualizationediting
tasks,nottheauthoringtask,theparticipantstartseachtaskwithabasedatasetandabasevisualization.Informed
bytheformativestudyconductedbyWangetal.[55],theparticipantswillhavetoperformaseriesofeditstothe
visualization.Eachtaskcontainsfivesub-taskscontaininginstructionstoperformeditstothebasevisualization.We
includethefollowingthreetypesofquestions:(1)editingthevisualizationwithaconcreteeditingtask,(2)exploratory
editingtask(e.g.,tryafewoptionsandthenpickthebeststrokewidth),and(3)editingtaskswithaquestiontobe
answeredbasedonthechart(e.g.,zoomintoatimewindoworrange,filterdata,etc.).
Task1(StockTrends). Givenadatasetofstockpricesforthetopfivetechcompaniesovertenyearsandthebaseline
chartbelowvisualizingthestocktrend,theuserisaskedtocompletethefollowingsub-tasks.
(1) Changethecharttitleto‚ÄúStockTrend‚Äù.
(2) Trydifferentlinesstrokewidthsandfindthebestonethatsuitsyou.
(3) EditthecharttoshowthestocktrendsforAAPLandMSFTonly.
(4) Changethey-axismaxrangeto250togetazoomedinview.Then,answerthe
question:‚ÄúByjustviewingthechart,gettheminimumandmaximumstockprice
forbothAAPLandMSFT‚Äù.
(5) NowcompareonlybetweenIBMandMSFT.Then,answerthequestion:‚ÄúByjust
viewingthechart,findthemonthandyear,wherethedifferenceinstockprice
betweenthetwocompaniesweremaximum‚Äù.
Task2(UnemploymentData). GivenadatasetofUSAunemploymentstatisticsovermultiplesectorsandthestacked
areachartbelowvisualizingthedistributionofunemploymentnumbers,theuserisaskedtocompletethefollowing
sub-tasks.12 Vaithilingam,etal.
(1) Changethex-axistitleto‚ÄúTimeline‚Äù.
(2) Tryoutdifferentlegendpositions(insideandoutsidethechart)tochoosethe
bestpositionthatsuitsyou.
(3) EditthecharttoshowthetrendsforConstructionandAgriculturesectorsonly.
(4) Editthey-axismaxdateto06/01/2004(June2004).Then,answerthequestion:‚ÄúBy
justviewingthechart,gettheapproximatemonthandyearwherethedifference
intheunemploymentratebetweenthetwosectorsweremaximum‚Äù.
(5) NowcompareonlybetweenFinanceandConstruction.Then,answertheques-
tion:‚ÄúByjustviewingthechart,gettheapproximatemonthandyearwherethe
differenceintheunemploymentratebetweenthetwosectorsweremaximum‚Äù.
Task3(WeatherData). GivenadatasetofSeattleweatherfortenyearsandthestackedbarchartbelowvisualizing
theaggregateddistributionofweatherovereachmonth,theuserisaskedtocompletethefollowingsub-tasks:
(1) Changethey-axistitleto‚ÄúNumberofRecords‚Äù.
(2) Rotatethex-axislabelsby45,65,and90degreesandchoosethebestoneforyou.
(3) Changethecolorofeachweathertypetothefollowingcolors:SuntoYellow,
SnowtoGray,RaintoBlue,FogtoGreen,DrizzletoPurple.
(4) Editthecharttoonlyshow‚ÄúSnow‚Äùweatherforallthemonths.Then,answerthe
question:‚ÄúByjustviewingthechart,findthemonthwiththelowestsnowdays‚Äù.
(5) Editthecharttoonlyshow‚ÄúFog‚Äùweatherforallthemonths.Then,answerthe
question:‚ÄúByjustviewingthechart,findthemonthswiththehighestfogdays‚Äù.
4.4 StudyProcedure
ToenableeasyaccesstoDynaVis,wehostedboththecontrolandtheexperimentversionsofthetoolonlinewhich
couldbeaccessedbyparticipantsviatheirwebbrowser.Afterobtaininguserconsent,werecordedtheaudioandthe
screen-castofeachparticipant,andtheuserswereencouragedtothinkaloudduringthestudy.Ineachstudysession,
theparticipantcompletedoneofthethreetasksusingthecontrolconditionandanothertaskwiththeexperiment
condition.Tomitigatethelearningeffect,boththeorderoftaskassignmentandtheorderoftoolassignmentwere
counterbalancedacrossparticipantsthroughrandomassignment.Therefore,foreachuniquecombinationof3tasks
and2conditions,wehave8participantdatapoints.Beforeeachtaskinastudysession,theparticipantwasgivena
tutorialoftheassignedtoolandwasallowedtoexploreusingthetoolfor5minuteswithatestdataset.Beforestarting
eachtask,wealsoexplainedthedatasetandthebasevisualizationandprovidedtimefortheparticipantstoexplore
andunderstandthedataset.Wesetatimelimitof15minutesforeachtask.Aftereachtask,theparticipantfilledouta
post-tasksurveytoreflectontheirexperienceusingthetool.Afterfinishingbothtasks,participantsansweredafinal
surveytodirectlycomparethetwoconditions.Attheendofeachstudysession,wealsoconductedabriefinformal
interviewattheendofthestudytogettheparticipant‚Äôssubjectiveexperienceparticipatinginthestudyandfeedback
forthetool.
4.5 MeasurementsandAnalysis
Werecordedbothquantitativeandqualitativemetricsduringtheuserstudy.Wemeasuredthesuccess/failureforeach
editingsub-tasktheparticipanthadtoperform.Asub-taskisconsideredfailediftheparticipantisunabletofinish
thetaskdespitemultipleattemptswiththetool.Theyareallowedtoretryasmanytimesastheyprefer.Throughapp
telemetry,wealsorecordedallthenaturallanguagecommandstheuserprovidedtothetoolandtheinteractionswithDynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 13
Q1.1.Itwaseasytocompletethetasksusingthetoolprovided.(1-StronglyDisagree,7-StronglyAgree)
Q1.2.TheAIunderstoodmyintentandmadetherightedits.(1-StronglyDisagree,7-StronglyAgree)
Q2.1.Howmentallydemandingwasthistaskwiththistool?(1‚ÄîVeryLow,7‚ÄîVeryHigh)
Q2.2.Howhurriedorrushedwereyouduringthistask?(1‚ÄîVeryLow,7‚ÄîVeryHigh)
Q2.3.Howsuccessfulwouldyourateyourselfinaccomplishingthistask?(1‚ÄîPerfect,7‚ÄîFailure)
Q2.4.Howharddidyouhavetoworktoaccomplishyourlevelofperformance?(1‚ÄîVeryLow,7‚ÄîVeryHigh)
Q2.5.Howinsecure,discouraged,irritated,stressed,andannoyedwereyou?(1‚ÄîVeryLow,7‚ÄîVeryHigh)
Table1. Aftereachtask,participantsrated(ona7-pointLikertscale)theirexperience(questions1.1-1.2)andthesubjectiveworkload
usingNASATLXmeasures(questions2.1-2.5).
Q1.1.Whichtoolwouldyouprefertouse?(1-UIDW,7-UINL)
Q2.1.Whichtoolwasmorementallydemandingtocommunicate?(1-UIDW,7-UINL)
Q2.2.Whichtoolmadeyoufeelhurriedorrushedduringthetask?(1-UIDW,7-UINL)
Q2.3.Whichtoolmadeyoufeelsuccessfulinaccomplishingthetask?(1-UIDW,7-UINL)
Q2.4.Forwhichtooldidyouworkhardertoaccomplishyourlevelofperformance?(1-UIDW,7-UINL)
Q2.5.Whichtoolmadeyoufeelmoreinsecure,discouraged,irritated,stressed,andannoyed?(1-UIDW,7-UINL)
Table2. Afterfinishingboththetasks,participantscomparativelyrated(ora7-pointLikertscale)theirtoolpreference(question1.1)
andthesubjectiveworkloadusingNASATLX(questions2.1-2.5)comparingbetweenthetwoconditions.(note:inthesurvey,the
namesoftheUIwerecodedtopreventbias)
thewidgetsinthetool.Inthepost-tasksurveytheuserfilledaftereverytask,werecordedself-reportedNASATask
LoadIndex,self-reportedLikertscoresforeaseofcompletingthetask,andhowwelltheAIunderstoodtheirintent(for
surveyquestionslookatTable1).Inthepost-studysurveytheuserfilledattheendofboththetasks,werecordedthe
participant‚Äôsself-reportedpreferenceandmodifiedtheNASATaskLoadIndexthatfocuseddirectlyoncomparing
theirexperiencebetweenthetwotools(forsurveyquestionslookatTable2).Forqualitativeanalysis,thefirstauthor
performedopen-codingontheparticipants‚Äôresponses,andtheaudiotranscriptstoidentifythemes,andthendiscussed
withco-authorstorefinethethemesovermultiplesessions.Thesethemesareusedtoexplainthequalitativeresults.
Weusepairedt-testtomeasurethestatisticalsignificanceofquantitativemetrics.
5 USERSTUDYRESULTS
5.1 TaskCompletion
ParticipantsusingtheUINLtoolfailedtocompletesub-tasksmoreoftenthantheparticipantsusingtheUIDWtool.
WhenusingtheUINLtool,sevenparticipants(P4,P5,P6,P10,P11,P16,P17)failedoneofthesub-taskscomparedto
twoparticipants(P1,P20)whenusingtheUIDWtool.Noneoftheparticipantsfailedonmorethanonesub-taskduring
thestudy.Itisimportanttonote,thatthesefailuresaredespiteparticipantsretryingthetasksasmanytimesasthey
want.Figure10showstheself-reportedscore(Likertscale;higherisbetter)foreaseofcompletingthetaskwiththe
toolprovidedforeachcondition.ParticipantusingUIDWfounditsignificantly(ùëù =0.004)easiertocompletethetask
(ùúá=6.26,ùúé =0.86)comparedtousingtheUINL(ùúá=5.13,ùúé =1.6).
Theaveragetimeùë°¬ØforparticipantsintheUINLtocompletethetaskis7minutesand22seconds(ùë°¬Ø
task_1
=6‚Ä≤05‚Ä≤‚Ä≤,
ùë°¬Ø
task_2
= 9‚Ä≤23‚Ä≤‚Ä≤,andùë°¬Ø
task_3
= 6‚Ä≤37‚Ä≤‚Ä≤).IntheUIDWcondition,participantstookanaveragetimeof6minutesand36
seconds(ùë°¬Ø =6‚Ä≤20‚Ä≤‚Ä≤,ùë°¬Ø =7‚Ä≤07‚Ä≤‚Ä≤,andùë°¬Ø =6‚Ä≤23‚Ä≤‚Ä≤)tocompletethetask.Thedifferenceintaskcompletion
task_1 task_2 task_3
timebetweenthetwoconditionsisnotstatisticallysignificant.Notethattheexploratorynatureofsomesub-tasks(e.g.,
task1.3)encouragesparticipantstospendtimeexploringthevisualization,andthecompletionspeedisnotadefinitive14 Vaithilingam,etal.
Fig.10. Participantsself-reportedscoresforNASATLXquestions,and Fig.11. Participantsself-reportedcognitiveloadandpref-
easeofcompletingthetask,andhowwelltheAIunderstoodtheirintent. erencescoresthatdirectlycomparethetwoconditions.
measureofperformance.Wereportthecompletiontimehereasasetupforunderstandingusereffortsthatwillbe
discussedinthefollowingsections.
Weanalyzedthesessionrecordingstoidentifytherootcauseofthesetaskfailures.Sixofthesevenfailuresinthe
UINLconditionandboththefailuresintheUIDWconditionhappenedinTask2.4,wheretheparticipantshadtoslice
thedaterangeforthechart.Thiswasduetothemodelreturningthedatesinanincorrectformatwheneditingthe
Vega-LitespecfromanNLcommand.Vega-LiteusesaspecificJSONdateformat,e.g.{‚Äúdate‚Äù: 14, ‚Äúmonth‚Äù: 3,
‚Äúyear‚Äù: 2004},whereasthemodelinmanyinstancesusedstringstorepresentthedate(e.g.‚Äú2004-03-14‚Äù),resulting
inanerror.Whengeneratingthewidget,themodelseemstomakethismistakefewertimescomparedtoeditingthe
chartspecificationdirectly.TheremainingfailureintheUINLconditionoccurredduringTask1.5,wheretheparticipant
hadtochangethefilteringvaluesfrom[MSFT,AAPL]to[MSFT,IBM].Inthisinstance,themodeladdedanextra
conflictingfiltertransformationinsteadofeditingtheexistingtransformation.
5.2 Self-reportedCognitiveTaskLoadIndex
Inthepost-taskself-reportedNASATLXratingswhereparticipantsscoredtheircognitiveloadperformingthetasksin
boththeconditions(checkTable1forquestions),wedidnotfindanystatisticallysignificantdifferenceinthemental
demand,howhurriedorfrustratedtheyfelt,theeffortrequiredtocompletethetasksandtheirperceptionofsuccess
(seeFigure10).
Inthepost-tasksurveywheretheparticipantsdirectlycomparedtheircognitiveloadbetweenthetwoconditions(see
Table2forquestions),whenusingtheUIDWtool,80%ofparticipantsfeltlessmentaldemand,83%ofparticipantsfelt
lesshurried,62%ofparticipantsfeltmoresuccessful,75%ofparticipantsspentlesseffort,and75%oftheparticipants
feltlessfrustratedcomparedtowhenusingUINLtool(seeFigure11).
5.3 UserBehavior
5.3.1 NaturalLanguageCommandsvs.DynamicWidgetsusage. Figure12showstheusagedataforthenumberof
naturallanguagecommandsinvokedbytheparticipants,andthenumberofinteractionswithbothdynamicwidgets
andpre-populatedwidgets.DynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 15
Fig.12. Usagemetricsshowthenumberoftimestheuserusedpre-populatedwidgets,dynamicwidgets,andnaturallanguage
commands.
IntheUINLcondition,participantsusedanaverageof8.4naturallanguagecommandspertask(includingallsub-
tasks)toeditthevisualization.Thisusagesignificantly(ùëù <0.001)decreasedtojust2.67naturallanguagecommands
whenusingtheUIDWcondition.Thiswasindeedreplacedbythedynamicwidgetusage,whereparticipantsonaverage
usedit13.25timeswhenusingtheUIDWcondition.Thisconfirmsourobservationofanincreaseinthenumberof
timesparticipantsfine-tunedwhenusingUIDWcondition.Thewidgetsreducedthebarriertotryingoutmanydifferent
valuesbeforesettlingontheedits.Forinstance,P6said‚ÄúWithdynamicwidgets,Ilikehoweasyitistoggleormakeedits
insmallincrementsandtryoutmanydifferentvalues.IcanseewhatI‚Äômclickingandhavefinegrainedcontrols.‚ÄùThere
wasnosignificantdifferenceintheusageofpre-populatedwidgetsbetweenthetwoconditions.
5.3.2 UserStrategy. IntheUINLcondition,weobservedtwomajorstrategiesusedbyparticipantstoperformthetasks.
Sixof24participants(P7,P9,P12,P13,P15,P17)alwaysusednaturallanguagecommandstoeditthevisualization
irrespectiveofanypre-populatedwidgetsavailabletoperformtheedit.Whereas,theother18participantsfirstlooked
forapre-populatedwidgettoperformtheireditsbeforeresortingtonaturallanguagecommands.
IntheexperimentconditionUIDW,weobservedtwomajorstrategiesusedbyparticipants.Nineparticipants(P2,P3,
P4,P5,P6,P8,P17,P18,P21)preferredtouseonlythewidgetstomakealltheedits.TheseparticipantsusedtheAI
onlytosynthesizedynamicwidgetswithoutmakingtheeditsandthenchosetomaketheeditsbyinteractingwith
thesynthesizedwidgetinstead.Tenparticipants(P7,P10,P12,P13,P16,P19,P20,P22,P23,P24)preferredtousethe
naturallanguagecommandtoperformthebroadedit,andthenusetheautomaticallysynthesizeddynamicwidgetsto
makefine-grainededits.P23said‚ÄúIwouldprefertousetheeditpromptforthefirsttime,andusethedynamicwidgetsfor
furthereditsandadjustments‚Äù.P15chosetouseonlynaturallanguagecommandstomaketheeditsandsaid‚ÄúIthink
that[UINL]waseasiertouse.ItisquiteeasytomakeeditsquicklyusingAIcommands‚Äù.Theremainingparticipantsused
acombinationofwidgetsandNLcommandswithnoparticularpreference.16 Vaithilingam,etal.
5.3.3 PromptingStrategy. ParticipantswhenpromptingtheAItoeditthechartgenerallyprovidedtheirintent(goal)to
theAI.Forallthesub-tasks,theystructuredtheirpromptas[ACTIONVERB]+[CHARTPROPERTY]+[VALUE].Some
examplesare‚ÄúChangethestrokewidthto5‚Äù,‚ÄúRotatethex-axislabelsto65deg‚Äù,‚Äúchangethex-axislabeltotimeline‚Äù.
However,wedidnoticeavarietyofnaturallanguagecommandsforfiltering-basedsub-tasks(Tasks1.3,1.5,2.3,2.5,
3.4,3.5).Someparticipantsdirectlymentionedthevaluestokeep.e.g.,‚Äúshowmefinanceandconstructionsectorsonly‚Äù.
Someparticipantsmentionedvaluestoremove.e.g.,‚ÄúRemoveeverythingotherthanMSFTandAAPL‚Äùor‚ÄúRemovetheplot
forAAPL.ShowmethevariationofIBM‚Äù.Someparticipantswhoweren‚Äôtproficientwithchartinglibrariesusedincorrect
chartpropertynameslike‚ÄúvisibilityofthestrokeswithonlyMSFTandAAPLselected‚Äù,‚Äúremovealllegendcategories
exceptconstructionandagriculture‚Äù.Inthreesuchinstances,themodelstillperformedtherightfiltertransformation.
Fortwoinstances,themodeltriedtomodifythevisibilityresultinginanincorrectchart.
WhenpromptingtheAIforwidgets,participantsskipprovidingthevalueinthepromptanddirectlymanipulateit
viatheUI.Theirpromptwasgenerallystructuredas[ACTIONVERB]+[CHARTPROPERTY].Someexamplesare,
‚Äúchangex-axislimit‚Äù,‚Äúchangedaterange‚Äù,‚ÄúChangethex-axismaxdate‚Äù.Forinstance,P3said‚ÄúJustanactionalongwith
thepartofthechartthatneededtobeedited.‚Äù.P23said‚ÄúIkeepitasshortaspossible.Similarto[edit]commands,but
withoutthedata.‚ÄùInthenextsub-section,weshowevidenceofhowthismakespromptingforawidgeteasierthan
usingnaturallanguagecommandstodirectlyeditthechart.Bytakingadvantageofdatacontext,domainconstraints,
andcleverpromptengineeringusingtemplateswithinDynaVis,wecangeneratedynamicwidgetswithverylittle
ambiguitywithjustsimpleinstructionsfromusers[60].
5.4 UserPreference
Inthepost-tasksurvey,theuserswereaskedtoratetheirpreferencebetweentheUINLandUIDWconditions.Allthe
participantsexceptP15(96%)stronglypreferredusingDynaViscomparedtothebaselinetool.Theinformalinterview
andsurveyresponsesshedlightonthereasons,whichwediscussinthissub-section.
Finding1:Dynamicwidgetsmakerepetitiveeditseasier. Sixteenparticipants(P1,P3,P4,P5,P6,P7,P9,P11,
P13,P14,P17,P18,P19,P21,P22,P23)explicitlymentionedthatdynamicwidgetsgreatlyreducedeffortneededto
performrepeatededits.Byusingdynamicwidgets,theyreducethenumberofnaturallanguagecommandstheyneed
totype‚Äìwhichisverytime-consuming.P5said,‚ÄúIwillratherjustinteractwiththedynamicwidgets.Comparedtotyping
commands,IwouldjustinteractwithanUIattheendoftheday.‚Äù.P7commented‚ÄúOncethewidgetwasthereforacertain
typeoftask,Ipreferredusingthewidgetasclickingislesscumbersomethanarticulatingandtyping.‚ÄùMoreover,when
usingdynamicwidgets,participantsinteractedwiththeLLMonlyoncewhencreatingthewidgets.Subsequentedits
areperformedinstantlywhencomparedtousingNLcommands,wheretheyhavetowaitfortheresponsefromLLM
everytimetheyhavetoperformanedit.P6said,‚ÄúDynamicwidgetswerethefoundationfortheeditsImadeandIcan
dohowevermanytimesIwant.FasterthanaskingtheAIagainandagain.‚Äù.Thisalsoexplainstheincreasedusageof
dynamicwidgetsmentionedin(Section5.3.1).UsersusingUIDW,triedalotmorevaluesforexploratorysub-taskssince
itwaseasiertorepeattheedits,comparedtousingUINL.
Finding2:Visualfeedbackenhancesunderstandingandexploration. Nineparticipants(P2,P4,P5,P8,P11,
P17,P18,P23,P24)mentionedtheypreferusingdynamicwidgetsduetotheinstantvisualfeedbackthewidgetsprovided
whenperformingtheedits.Thisvisualfeedbackworksbothways.First,whentheusermakestheeditsusingthe
dynamicwidgets,theeditsreflectonthechartimmediately,sincewearen‚ÄôtwaitingforaresponsefromtheLLM.
P23summarizesthisbysaying‚ÄúThereal-timeupdatewithwidgets,ratherthanwaitingforAI,wassupercool.IcanDynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 17
interactivelyseewhathappenswiththechart.‚Äù.Itisimportanttonotethatthesevisualizationsareinherentlystaticwith
nointeractivity‚Äìbutbycreatingandusingdynamicwidgets,participantsareinteractingwithaninherentlystatic
visualization.
Second,theUIprovidesvisualfeedbackbyretainingtheeditinformationinthestateoftheUI.P24explainsthis
bysaying‚Äúwithdynamicwidgets,Icanalsovisualizethechanges.Forexample,ifIchangethecolor,Icanjustseethe
colorthereinthewidget.Thatisveryhelpful,thatisjustefficient.‚Äù.Dynamicwidgetsprovideclearvisibilityofchart
(system)status,improvingthevisualfeedback[42].Inotherwords,dynamicwidgetshelpusersovercometheusability
challengeofthegulfofevaluation(understandingthesystemstate)[11,43].
Finding3:Promptingtocreatedynamicwidgetsiseasierandmorereliable. Figure10showstheparticipants‚Äô
self-reportedscore(Likertscale;higherisbetter)forhowwelltheAIunderstoodparticipants‚Äôintent.Participantsusing
UIDWtool(ùúá=6.04,ùúé =1.36Likertscale)reportedthatAIunderstoodtheirintentsignificantlybetter(ùëù =0.024)than
participantsusingUINLtool(ùúá=4.95,ùúé =1.77Likertscale).18ofthe24participantsusingUINLhadatleastonefailed
naturallanguageeditcommand,and8ofthe24participantshadmorethan2failednaturallanguageeditcommands.In
contrast,onlynineparticipantsusingUIDWhadatleastoneerroneouswidget,andnoparticipanthadmorethan2
erroneouswidgetswhenperformingthetasks.
Twelveparticipants(P1,P2,P3,P5,P6,P11,P14,P16,P17,P21,P22,P24)explicitlynotedthatitwaseasierandmore
reliabletopromptfordynamicwidgetsthantousejustnaturallanguagetoeditthevisualization.Forinstance,P3
commented,‚Äúwith[UINL]Ihadtoprovidemychatcommandasspecificaspossibletopreventerrors.Butwithdynamic
widgetsin[UIDW ]Ididn‚Äôthavetobeveryspecific.‚Äù.P6commentedonthereliabilitybysaying‚ÄúIliketheabilityto
executetheeditsusingdynamicwidgetratherthanleaveituptochanceusingtheAI.‚Äù
Oneprobablereasonforimprovedreliabilitycouldbe:whenusingonlynaturallanguagecommands,theLLMwill
havetogeneratethemodifiedVega-Litespecforthewholechartintheresponse.Thisincreasestheprobabilityof
errors,sinceduringthegeneration,theLLMcanpotentiallychangeanyotherunrelatedpropertyinthespecification.
Whereas,whengeneratingdynamicwidgets,themodelsynthesizesaJavaScriptcallbackfunctionthatonlyeditsone
(orafew)propertiesoftheVega-Litespec,greatlyreducingtheprobabilityoferrors.
Finding4:DynamicwidgetsenhancethesenseofcontroloverNL. Sevenparticipants(P3,P5,P6,P8,P10,P16,
P20)mentionedthatusingdynamicwidgetsprovidedthemagreatersenseofcontrolovertheoutcomewhenmaking
editstothevisualization.Usersfeltthatthewidgetsprovidedasenseofstructuretotheeditsperformedandasenseof
autonomy.P8said‚ÄúThewidgetsgavemeafeelingofautonomytomakemorechangescomparedtotheAI.Ithadcreated
somekindofstructureforachievingthechange.‚Äù.Further,P6said‚Äútypingthetextcommandswasalittlenon-ideal.Not
havingthewidgetsmadeitfeellikeIdon‚Äôtcontroltheedits.[naturallanguage]commandsmadeitfeelliketherewassome
levelofuncertainty.‚Äù
Finding 5: Dynamic widgets enable customization, but can be overwhelming for extended use. Nine
participants(P1,P3,P6,P9,P10,P11,P16,P14,P18)mentionedtheylikedusingdynamicwidgetssinceitallowedthem
tocustomizetheirownUItosuittheireditingintents.P7said‚ÄúThedynamicwidgetsareprettycool.It‚Äôslikewritinga
wholetoolforyourself,butinsteadofwritingcode,itisinstantlyavailable.‚ÄùSincewepresentthewidgetsinthereverse
chronologicalorderoftheircreation,P18said‚ÄúIlikedynamicwidgets,becauseitsortofstoresthehistoryofeditsImade.
IcanreferitbackwheneverIwanttochangeitifIdon‚Äôtlike.‚Äù.18 Vaithilingam,etal.
ComparedtotraditionalstaticUIs,dynamicinterfacesareconstantlychanging.Fiveparticipants(P21,P17,P18,P8,
P23)pointedoutthatcreatingdynamicwidgetscangetoverwhelmingoverlongeditingsessionswithwidgetpanels
constantlybeingchanged,andwantedsomewayofeitherpausingwidgetcreationorabilitytocategorizeandcontrol
thewidgetsthatareshown.Forinstance,P23said‚ÄúIfImadealotofthem[dynamicwidgets],thenitmightgettricky.
It‚Äôllbenicetohaveautomaticgroupingbasedonthekindofeditsthewidgetsdo.‚ÄùSimilarly,P8said‚ÄúItwouldbeniceto
group,collapse,orcreatemultiplerelevantandrelatedwidgets,justlikePhotoshop,tocustomizebetter.‚ÄùIncontrast,P7
said‚ÄúIfitwasalongseriesoftasks,Iwouldmaybejustpreferastableinterface.‚Äù,andP15said‚Äî‚Äúwith[UIDW]I‚Äômnot
surehowdynamicwidgetsarehelpful.Usingthecommandswasjustsimpler.‚Äù
5.5 ToolPerformance
TounderstandtheperformanceoftheDynaVisusingtheGPT3.5model,weperformedapostmortemanalysisto
measurethelatencyfacedbytheparticipantsduetothemodelresponsetime,andthenumberofautomaticretries
requiredtogeneratethecorrectVega-Litespecificationandwidgetcode.Wemeasuredthisbyre-playingalltheNL
visualizationeditcommands,andtheNLaddwidgetcommandsprovidedbytheparticipantsduringtheuserstudy.
Onaverage,eachquerytotheGPT3.5modeladdedalatencyof1.47seconds(ùúé =0.34seconds).Also,onaveragefor
eachNLedit/addwidgetcommand,DynaVishadtoautomaticallyretry1.16times(ùúé =0.58times)tofixsyntaxor
semanticerrorsbeforeproducingthecorrectoutput.
6 DISCUSSIONANDFUTUREWORK
ModalitiesbeyondNLandUIwidgets. DynaVisemploystwodifferentmodalitiesforuserstospecifythekinds
ofeditstheywanttomaketothechart:naturallanguagecommandsandinteractionthroughdynamicwidgets.This
designcombinesthestrengthsofbothmodalitiessotheusercanbettercommunicatetheintenttotheAIagentand
quicklymakerepeatedpreciseeditstothevisualization.Thiswasreflectedinthestudybytheparticipants‚Äôpreference
forthetool,andhowtheyinteractedwithbothmodalities.
Aninterestingfuturedirectionistoexpandthemodalitiesbeyondthenaturallanguageandwidgetinteractionby
addingsupportforvoicecommandsaswellasgesturesanddirectmanipulationofthechart.Forexample,insteadof
theusergivinganNLcommand‚ÄúMovethelegendtothebottomofthechart‚Äù,theusercansimplyclickanddrag(though
mouse,touch,ordigitalpens)thelegendtothebottomofthecharttomaketheedit.Theuserdoesn‚Äôtneedtoknow
theyhavetomodifylegend,rathertheycansimplypointustowardit.Similarly,DynaVisalsohasthepotentialto
includeby-examplespecificationstoletusersdemonstrateeditingexamplesbyeditingpartsofthevisualizationand
thenlettingthetoolgeneralizeeditstootherpartsofthevisualization.
However,multiplemodalitiesalsocomewiththeirchallenges.Forexample,itisnotalwayseasyforuserstofigure
outwhichmodalitytouseandwhen.Hence,moreresearchisneededtohelpuserslearnthebenefitsanddisadvantages
ofeachmodalitysothattheymakeaninformedchoice.
Staticvs.DynamicUI. Onebenefitofusingnaturallanguagecommandsanddynamicwidgetsovertraditional
staticUIistheabilitytoeasethegulfofexecution.WithstaticUI,theuserhastoknowhowandwheretoperform
theedits,whichcanbecognitivelydemanding[15].Whereas,withNLIsandDynamicwidgets,theusersonlyneedto
specifytheirintent.Theflipsideofthisargumentis,thatdespitethelearningcurve,overtimeuserswilllearnand
getusedtothestaticUIs.However,withdynamicUIs,theinterfaceisconstantlychanging,whichcanpotentially
increasecognitiveloadfortheuser,especiallyinlongeditingsessionsandforuserswitheditingexpertise.SomeDynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 19
participantsfromthestudydidexpressthisconcernandsuggestedhavingawayofcategorizingthewidgetspredictably.
LongertermusabilitystudywouldprovideinsightstounderstandhowconstantlychangingUIaffectsusability.Unlike
traditionalinterfaces,anotherlimitationof DynaVisandotherpurelyNL-basedinterfacesisthattheydonotpresent
allpossibleoptionstotheuseratalltimes.Thisisadouble-edgedsword;Duetothead-hocnatureofNLinterfaces,NL
commandsforaddingwidgets/editingvisualizationscansometimeshelpusersdiscoverpreviouslyunknownfeatures
(similartoobservationsin[13]),andothertimescanshifttheonusofdiscoveringthetool‚Äôscapabilitiesontotheuser
leadingtomistrustanddistrust[44].Moreresearchisneededtostudyandfindmethodstoovercometheselimitations.
AnotherinterestingfuturedirectionistoinspecthowwecantakeadvantageofdynamicUIwidgets‚Äôlowprogramming
requirementtoturnendusersinto‚Äúno-codedevelopers‚Äùwiththeabilitytocustomize/DIYtheirinteractionpanels
toaugmentstaticGUI.Forexample,withdynamicwidgets,anendusercanconstructtheirownpanelthatbestsuits
theirdailytasksasshortcutsforcomplextasks.Forexample,auserwhooftenworksongeographicaldataanalysiscan
createacustompanelusingdynamicwidgetsspeciallyformapmanipulationfunctionstoreducemapeditingefforts.
Supportingimperativeplottinglibrariesandlower-levelvisualizationgrammars. Dynamicwidgetsare
designedarounddeclarativehigh-levelvisualizationgrammartoenablecompositionalediting(e.g.,VegaLite‚ÄôsJSON
representationforvisualizationobjects).Thedeclarativesyntaxhelpsthewidgetstobemodularandbesynthesized
andusedinanyordertheuserwishes.Despitetheiradvantages,high-levelgrammarsexposefeweroptionsthan
low-levelgrammarsorimperativelibrariesformorecomplexvisualizationeditingtasks(e.g.,tomakepartsofaline
dashedwhiletherestsolid,wouldrequirevisitinglower-leveldetailsofhowlinesarerepresented).Tosupportediting
ofvisualizationintheselow-levellanguages,weenvisioncombiningDynaViswithbidirectionaleditingapproaches
whichleverageprogramanalysisandsynthesistechniquestopropagatesurface-leveleditrequirementstoeditsover
programstructuresorparameters.
Dynamicwidgetsforaccessibilityandotherapplications. PriorworkondynamicallysynthesizedUIsstemmed
fromaccessibilityresearch,likeSUPPLE[25]andSUPPLE++[26]toaccommodatemotorandvisioncapabilities.Inthe
spaceofdynamicwidgetsforvisualizationtasks,therearemanypossibleUIstoperformthesametask(e.g.,slidervs.
numberinputtocontrolthefontsize).EverytypeofUIhasaccessibilitytrade-offsbasedontheuser‚Äôsneeds.Inthe
future,wecanimagineaversionof DynaVisthatletstheuserprovidetheirinterfaceconstraintsandpreferences,and
DynaVisautomaticallysynthesizesUIthatmatchestheseconstraints.Priorworklike[33,53]hasaccomplishedUI
synthesisbasedonexamplesordemonstrations.Apotentialresearchdirectionwouldbetoaddaccessibilityconstraints
andexploitthegeneralknowledgeofLLMstocreateaccessiblewidgets.
WhileDynaVisisdesignedforvisualizationeditingtasks,webelievedynamicwidgetscanalsobenefitgeneralappli-
cationsthathaveextensiveconfigurationoptions(e.g.,documentprocessingsoftware,videoprocessingapplications).
Userscanalsotakeadvantageofdynamicwidgets‚Äôlowprogrammingrequirementsinno-code/low-codetools(like
Excel/Tableau)withtheabilitytocustomizeorDIYtheirinteractionpanelstoaugmentexistingstaticUI.Investigating
howdynamicwidgetscanbegeneralizedacrossdifferentapplicationdomainswouldbeworthstudyinginthefuture.
DynaVisdesignopportunities. TherearealotofopportunitiestoimproveDynaVisinthefuture,someofwhich
wehighlighthere.IntheUINLcondition,someparticipantsanticipatedrepeatededitsandcopiedtheNLcommand,
forreuse,beforesubmittingit.Inthefutureversionsof DynaVis,wecanenableuserstoaccessthehistoryofNL
commandstomakere-runningNLcommandswithsmalleditseasierfortheuser.Oneofthemostrequestedfeatures
fromtheparticipantsisformorewaystocustomizeandmanagealargenumberofdynamicwidgets.Thiscaninvolve20 Vaithilingam,etal.
categorizingwidgetsbytopic(likeAdobePhotoshop),andcollapsing/expanding(sectionsof)widgets.Anotheruseful
featureistosaveandrevisitcertaincombinationsofwidgets.Wecanalsogofurtherbyallowinguserstoexportthe
visualizationspecalongwiththewidgetstobesharedwithotherusers,similartoBespoke[53].
7 RELATEDWORK
Visualizationauthoringtools. Modernvisualizationauthoringtools[6,10,31,45,46]andgrammars[5,47]are
builtaroundthegrammarofgraphics[56]greatlyreducethevisualizationauthoringeffortsbyallowingusersto
specifyhigh-levelvisualizationintentviamappingofdatafieldstovisualproperties.Forexample,usersofTableauor
PowerBIcaneasilydragdatafieldsanddropintoencodingshelvesofvisualpropertiestospecifythemapping,and
usersofVega-LitecanprovidemappingsconciselyasaJSONobject.Then,basedonhigh-levelspecification,thesetools
automaticallyprovide‚Äúsmartdefaults‚Äùtofilllow-levelvisualizationproperties(e.g.,strokewith,spacingofbars)and
compilesthevisualizationspectolow-levelvisualizationgrammarslikeD3[4]forrendering.Whilesuchdesignsreduce
theinitialvisualizationauthoringcomplexity,visualizationediting,andrefinementremainchallengingastheuserneeds
tounboxhigh-levelgrammarandnavigatethroughthelargespaceofeditingoptionstoperformtheedits.DynaVisis
designedtoaddressthevisualizationeditingchallenge,whichcomplementsthestrengthsofexistingauthoringsystems.
WeenvisionthatDynaViscanbecombinedwithexistingtoolsinawaythatusersstartwithahigh-levelspecification
todescribethevisualizationintentandthenutilizedynamicwidgetstoperformsubsequenteditstorefinethechart.
Naturallanguageinterfacesforvisualization(V-NLIs). Naturallanguageinterfaceshavebeenextensively
adoptedtoimprovetheusabilityofvisualizationsystems[49].EvencommercialGUI-basedtoolslikeTableau[36],
MicrosoftPowerBI[12],andGoogleSpreadsheets[21]automaticallytranslatenaturallanguagequeriestodataqueries
andpresentqueryresultswithvisualizations.However,thesesystemslimitnaturallanguageinteractionstodataqueries
andcorrespondingstandardcharts.
TherapiddevelopmentofNaturalLanguageProcessing(NLP)techniques[14,58]hasprovidedgreatopportunities
toexploreanaturallanguage-basedinteractionfordatavisualization.Therehasbeenactiveresearchinadopting
NaturalLanguageInterfacestoimprovetheusabilityofvisualizationsystems[21,27,48,49,52,59].Withthehelpof
advancedNLP-toolkits[2,3,9,32,35],asurgeofvisualization-orientedNaturalLanguageInterfaces(V-NLIs)have
emerged.V-NLI-basedauthoringsystemsaccepttheuser‚Äôsnaturallanguagequeriesorcommandsasinputandoutput
appropriatevisualizations.Researchershaveexploredmultipletechniquesrangingfromheuristics-basedapproachesto
end-to-endlearningapproaches.
Heuristic-basedapproachesexplorepropertiesofdataingeneratingaspaceofpotentialvisualizations[57],ranking
thesespaceofvisualizationsbasedonqualityattributes[34,37]andpresentingthemtotheuser.Furtherworkshave
consideredataskdecompositionapproach,wheretheuserqueriesaredecomposedintomultipletasks.whichare
thensolvedindividuallyandthenaggregatedtoyieldthefinalvisualization[16,38,55].Finally,end-to-endlearning-
basedapproachesseektolearnmappingsfromdatadirectlytogeneratevisualizations[23].Morerecently,withthe
advancementsinLargeLanguageModels(LLMs),systemslikeLida[22]havefoundgreatsuccessinleveragingpatterns
learnedbyLLMsfrommassivelanguageandcodedatasetstocreatevisualizationsfromnaturallanguagecommands.
LLMsprecludetherequirementofapplyingheuristics,ortrainingofcustommodelspairedwithcustomtrainingand
data.Asanextension,manyV-NLIauthoringtoolsalsosupportvisualizationediting,withnaturallanguageasthe
primarymodality.DynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 21
Customizableanddynamicuserinterfaces. Priorresearchindomainssuchasaccessibilityandubiquitous
computinghasworkedonsystemsthatautomaticallygenerateUIs.SUPPLE[25]andSUPPLE++[26]generatecustom
UIsforuserstoaccommodatetheirmotorandvisioncapabilitiesbasedonuser-providedspecificationsandactivity
traces.ProjectssuchasUNIFORM[40]andthePersonalUniversalController(PUC)[39]generatecustomUIsfor
appliancessuchasmediaconsolesandprintersthatarecustomizedforeachindividual‚Äôspreferencesandinteraction
history.Huddle[41]builtatopPUCgeneratesUIstocoordinatemultiplehomeelectronicappliances.Mavo[54]allows
userstocreateinteractiveHTMLpageswithouttheneedforprogrammingbyjustaddingspecialHTMLattributesand
alsoprovidesdifferenteditingwidgetsbasedonthetypeofattributes.DynaVissharesthesesystems‚Äôgoalsofcreating
specializedUItailoredtoindividualusers‚Äôintent.
MorerecentworkonDynamicinterfacesfollowsa‚Äúrelaxation‚Äù methodtocreategeneralizedUIwidgets.The
relaxationmethodinvolvescreatingUIwidgetstodirectlymanipulatevariablesinafunctionorquery.Bespoke[53]
synthesizes custom GUIs for command-line applications by using user demonstrations. They employ rule-based
heuristicsthatinferasemantictypeforparametersinbashcommandstocreateadynamicwidgetforeditingthe
parameter.Similarly,Heeretal.[28]generatesdynamicUIusingqueryrelaxingthatenablestheuserstogeneralizetheir
selection.Asuiteofworknamedprecisioninterfaces[17,19,63]usesSQLqueriesasaproxytogenerateinteractive
widgetsfromasequenceofinputqueries.Thelatestiteration,NL2Interface[18]generatesSQLqueriesfromNL
commandsandcreatesageneralizedUItoedittheparameters/variablesintheSQLquery.BOLT[51]andEVIZA[48]
generateambiguitywidgetsthatprovideasimpleUIformanipulatingvaluesforambiguousinferredvariables.e.g.,for
theNLcommand‚ÄúlargestearthquakesinCalifornia‚Äù,thethresholdforclassifyingearthquakesaslargeisambiguous.
However,inbothBOLTandEVIZA,naturallanguagecommandsarerestrictedbyapre-definedgrammar.Thesetools
highlighttheimportanceofcomplementaryGUItoolsthataccompanyNLinterfaces.DynaVisbuildsonthesesystems,
andusesanLLMtosynthesizedynamicwidgetsthatcanenabledirectmanipulationofVisualizationproperties.Using
LLMstogeneratedynamicwidgetsgivesusthreedistinctadvantages:
(1) Byprovidinganaccuraterepresentationoftheuser‚ÄôscontexttotheLLMs,DynaVisislesssensitivetoerrorsor
ambiguitiesinnaturallanguagecommandsprovidedbytheuser.
(2) Wedonothaveafixedsetofrules,orheuristics,orrelyonqueryrelaxation.InsteadofsynthesizingaUIthat
allowsuserstoeditjustonevariable,LLMscansynthesizewidgetsthatcanevencapturecomplexrelationslike
manipulatingmultiplepropertiesatonce.
(3) Unlikeprevioussystems,wedonotrestrictthespaceorthekindsofUIthatcanbegenerated.AsLLMsbecome
morepowerful,thiscanenablethesynthesisofcomplexinterfacesbeyondjustthetraditionalHTMLInput
elements.
Multi-modal user interfaces. Multi-modal interaction techniques have the advantage of letting users better
conveytheirintentinmultiplewaysreducingtheoveralleffort.Pumice[30]allowsuserstousenaturallanguage
todescribeprogrammingtasksinend-userdevelopmentscenariosandthenrefineintentbyprovidingexamplesto
complementNL‚Äôsambiguousnature.DIYAssistant[24]letsuserscombineNLandprogrammingspecificationsto
createpersonalassistants.Leeetal.[29]enablesbettersense-makingwithvisualquerysystemswiththehelpof
sketching.ShapeSearch[50]letsusersusequeryshapesusingbothNLandregularexpressions‚Äîgreatlyimproving
theexpressivenessofshapesearchqueries.ToolslikePanaromicData[61],andVizdom[20]allowuserstousepenand
touchtodirectlyperformdataaggregationandanalyticsrespectivelyonadigitalwhiteboard.DynaVisbuildsonthe
ideaofenablingmultiplemodalitiesofinteraction.DynaVisleveragesbothNL-basedinteractiontoreducethegulfof22 Vaithilingam,etal.
executionandUI-basedinteractiontoenhanceinteractivity.Inthefuture,DynaViscanfurthercombinepen-and-touch
fordirectcontrolofvisualelementsoncanvasaswellassketchingtodemonstrateeditingeffects.
8 CONCLUSION
Inthispaper,weintroduceDynaVis,whichblendsnaturallanguageanddynamicallysynthesizedUIwidgetstoease
thegulfofexecutionandenhanceinteractivity.Givenavisualizationeditcommandorawidgetcreationcommand,
DynaVissynthesizesaUIwidgetthattheusercaninteractwithtoperformvisualizationedits.Ourstudywith24
participantsshowsthatparticipantspreferredDynaVisovertheNLI-onlyinterfacecitingeaseoffurthereditsand
editingconfidenceduetoimmediatevisualfeedback.
REFERENCES
[1] 2020.OpenAIAPI.https://openai.com/blog/openai-api. Accessed:2023-9-13.
[2] 2023.ApacheOpenNLP.https://opennlp.apache.org/. Accessed:2023-9-13.
[3] 2023.CloudNaturalLanguage.https://cloud.google.com/natural-language. Accessed:2023-9-13.
[4] 2023.D3byObservable.https://d3js.org/. Accessed:2023-9-14.
[5] 2023.ggplot2.https://ggplot2.tidyverse.org/. Accessed:2023-9-14.
[6] 2023.MicrosoftPowerBI.https://powerbi.microsoft.com/en-us/. Accessed:2023-9-14.
[7] 2023.npm:html-react-parser.https://www.npmjs.com/package/html-react-parser. Accessed:2023-12-6.
[8] 2023.pandasdocumentation‚Äîpandas2.1.0documentation.https://pandas.pydata.org/docs/index.html. Accessed:2023-9-14.
[9] 2023.spaCy-Industrial-strengthNaturalLanguageProcessinginPython.https://spacy.io/. Accessed:2023-9-13.
[10] 2023.Tableau:BusinessIntelligenceandAnalyticsSoftware.https://www.tableau.com/. Accessed:2023-9-14.
[11] 2023.TheTwoUXGulfs:EvaluationandExecution.https://www.nngroup.com/articles/two-ux-gulfs-evaluation-execution/. Accessed:2023-9-14.
[12] 2023.UsenaturallanguagetoexploredatawithPowerBIQ&A-PowerBI.https://learn.microsoft.com/en-us/power-bi/natural-language/q-and-a-
intro. Accessed:2023-9-13.
[13] ShraddhaBarke,MichaelB.James,andNadiaPolikarpova.2023.GroundedCopilot:HowProgrammersInteractwithCode-GeneratingModels.
Proc.ACMProgram.Lang.7,OOPSLA1,Article78(apr2023),27pages. https://doi.org/10.1145/3586030
[14] YonatanBelinkovandJamesGlass.2019.Analysismethodsinneurallanguageprocessing:Asurvey.TransactionsoftheAssociationforComputational
Linguistics7(2019),49‚Äì72.
[15] RalucaBudiu.2014.MemoryRecognitionandRecallinUserInterfaces.https://www.nngroup.com/articles/recognition-and-recall/. Accessed:
2023-9-12.
[16] QiaochuChen,ShankaraPailoor,CelesteBarnaby,AbbyCriswell,ChenglongWang,GregDurrett,andI≈üilDillig.2022.Type-directedsynthesisof
visualizationsfromnaturallanguagequeries.ProceedingsoftheACMonProgrammingLanguages6,OOPSLA2(2022),532‚Äì559.
[17] YiruChen.2020.Montecarlotreesearchforgeneratinginteractivedataanalysisinterfaces.InProceedingsofthe2020ACMSIGMODInternational
ConferenceonManagementofData.2837‚Äì2839.
[18] YiruChen,RyanLi,AustinMac,TianbaoXie,TaoYu,andEugeneWu.2022.NL2INTERFACE:InteractiveVisualizationInterfaceGenerationfrom
NaturalLanguageQueries.ArXivabs/2209.08834(2022). https://api.semanticscholar.org/CorpusID:252367337
[19] YiruChenandEugeneWu.2022.Pi2:End-to-endinteractivevisualizationinterfacegenerationfromqueries.InProceedingsofthe2022International
ConferenceonManagementofData.1711‚Äì1725.
[20] AndrewCrotty,AlexGalakatos,EmanuelZgraggen,CarstenBinnig,andTimKraska.2015.Vizdom:interactiveanalyticsthroughpenandtouch.
ProceedingsoftheVLDBEndowment8,12(2015),2024‚Äì2027.
[21] KedarDhamdhere,KevinSMcCurley,RalfiNahmias,MukundSundararajan,andQiqiYan.2017.Analyza:Exploringdatawithconversation.In
Proceedingsofthe22ndInternationalConferenceonIntelligentUserInterfaces.493‚Äì504.
[22] VictorDibia.2023.LIDA:AToolforAutomaticGenerationofGrammar-AgnosticVisualizationsandInfographicsusingLargeLanguageModels.(6
March2023).arXiv:2303.02927[cs.AI]
[23] VictorDibiaand√áaƒüatayDemiralp.2019.Data2vis:Automaticgenerationofdatavisualizationsusingsequence-to-sequencerecurrentneural
networks.IEEEcomputergraphicsandapplications39,5(2019),33‚Äì46.
[24] MichaelHFischer,GiovanniCampagna,EuirimChoi,andMonicaSLam.2021. DIYassistant:amulti-modalend-userprogrammablevirtual
assistant.InProceedingsofthe42ndACMSIGPLANInternationalConferenceonProgrammingLanguageDesignandImplementation.312‚Äì327.
[25] KrzysztofGajosandDanielSWeld.2004.SUPPLE:automaticallygeneratinguserinterfaces.InProceedingsofthe9thinternationalconferenceon
Intelligentuserinterfaces.93‚Äì100.
[26] KrzysztofZGajos,JacobOWobbrock,andDanielSWeld.2007. Automaticallygeneratinguserinterfacesadaptedtousers‚Äômotorandvision
capabilities.InProceedingsofthe20thannualACMsymposiumonUserinterfacesoftwareandtechnology.231‚Äì240.DynaVis:DynamicallySynthesizedUIWidgetsforVisualizationEditing 23
[27] TongGao,MiraDontcheva,EytanAdar,ZhichengLiu,andKarrieGKarahalios.2015.Datatone:Managingambiguityinnaturallanguageinterfaces
fordatavisualization.InProceedingsofthe28thannualacmsymposiumonuserinterfacesoftware&technology.489‚Äì500.
[28] JeffreyHeer,ManeeshAgrawala,andWesleyWillett.2008.Generalizedselectionviainteractivequeryrelaxation.InProceedingsoftheSIGCHI
ConferenceonHumanFactorsinComputingSystems.959‚Äì968.
[29] DorisJung-LinLee,JohnLee,TariqueSiddiqui,JaewooKim,KarrieKarahalios,andAdityaParameswaran.2019.Youcan‚Äôtalwayssketchwhatyou
want:Understandingsensemakinginvisualquerysystems.IEEEtransactionsonvisualizationandcomputergraphics26,1(2019),1267‚Äì1277.
[30] TobyJia-JunLi,MarissaRadensky,JustinJia,KirielleSingarajah,TomMMitchell,andBradAMyers.2019.Pumice:Amulti-modalagentthat
learnsconceptsandconditionalsfromnaturallanguageanddemonstrations.InProceedingsofthe32ndannualACMsymposiumonuserinterface
softwareandtechnology.577‚Äì589.
[31] ZhichengLiu,JohnThompson,AlanWilson,MiraDontcheva,JamesDelorey,SamGrigg,BernardKerr,andJohnStasko.2018.Dataillustrator:
Augmentingvectordesigntoolswithlazydatabindingforexpressivevisualizationauthoring.InProceedingsofthe2018CHIConferenceonHuman
FactorsinComputingSystems.1‚Äì13.
[32] EdwardLoperandStevenBird.2002.Nltk:Thenaturallanguagetoolkit.arXivpreprintcs/0205028(2002).
[33] DylanLukes,JohnSarracino,CoraColeman,HilaPeleg,SorinLerner,andNadiaPolikarpova.2021.Synthesisofweblayoutsfromexamples.In
Proceedingsofthe29thACMJointMeetingonEuropeanSoftwareEngineeringConferenceandSymposiumontheFoundationsofSoftwareEngineering.
651‚Äì663.
[34] YuyuLuo,XuediQin,NanTang,GuoliangLi,andXinranWang.2018.Deepeye:Creatinggooddatavisualizationsbykeywordsearch.InProceedings
ofthe2018InternationalConferenceonManagementofData.1733‚Äì1736.
[35] ChristopherDManning,MihaiSurdeanu,JohnBauer,JennyRoseFinkel,StevenBethard,andDavidMcClosky.2014.TheStanfordCoreNLPnatural
languageprocessingtoolkit.InProceedingsof52ndannualmeetingoftheassociationforcomputationallinguistics:systemdemonstrations.55‚Äì60.
[36] RuhaabMarkas.[n.d.].AskData:Simplifyinganalyticswithnaturallanguage.https://www.tableau.com/blog/ask-data-simplifying-analytics-
natural-language-98655. Accessed:2023-9-13.
[37] DominikMoritz,ChenglongWang,GregLNelson,HaldenLin,AdamMSmith,BillHowe,andJeffreyHeer.2018.Formalizingvisualizationdesign
knowledgeasconstraints:Actionableandextensiblemodelsindraco.IEEEtransactionsonvisualizationandcomputergraphics25,1(2018),438‚Äì448.
[38] ArpitNarechania,ArjunSrinivasan,andJohnStasko.2020.NL4DV:Atoolkitforgeneratinganalyticspecificationsfordatavisualizationfrom
naturallanguagequeries.IEEETransactionsonVisualizationandComputerGraphics27,2(2020),369‚Äì379.
[39] JeffreyNichols,BradAMyers,MichaelHiggins,JosephHughes,ThomasKHarris,RoniRosenfeld,andKevinLitwack.2003.Personaluniversal
controllers:controllingcomplexapplianceswithGUIsandspeech.InCHI‚Äô03ExtendedAbstractsonHumanFactorsinComputingSystems.624‚Äì625.
[40] JeffreyNichols,BradAMyers,andBrandonRothrock.2006.UNIFORM:automaticallygeneratingconsistentremotecontroluserinterfaces.In
ProceedingsoftheSIGCHIconferenceonHumanFactorsincomputingsystems.611‚Äì620.
[41] JeffreyNichols,BrandonRothrock,DuenHorngChau,andBradAMyers.2006.Huddle:automaticallygeneratinginterfacesforsystemsofmultiple
connectedappliances.InProceedingsofthe19thannualACMsymposiumonUserinterfacesoftwareandtechnology.279‚Äì288.
[42] JakobNielsen.2020.10UsabilityHeuristicsforUserInterfaceDesign.https://www.nngroup.com/articles/ten-usability-heuristics/. Accessed:
2023-9-13.
[43] DonaldNorman.1986.Usercenteredsystemdesign.Newperspectivesonhuman-computerinteraction(1986).
[44] RajaParasuramanandVictorRiley.1997.Humansandautomation:Use,misuse,disuse,abuse.Humanfactors39,2(1997),230‚Äì253.
[45] DonghaoRen,BongshinLee,andMatthewBrehmer.2018.Charticulator:Interactiveconstructionofbespokechartlayouts.IEEEtransactionson
visualizationandcomputergraphics25,1(2018),789‚Äì799.
[46] ArvindSatyanarayanandJeffreyHeer.2014.Lyra:Aninteractivevisualizationdesignenvironment.InComputergraphicsforum,Vol.33.Wiley
OnlineLibrary,351‚Äì360.
[47] ArvindSatyanarayan,DominikMoritz,KanitWongsuphasawat,andJeffreyHeer.2016. Vega-lite:Agrammarofinteractivegraphics. IEEE
transactionsonvisualizationandcomputergraphics23,1(2016),341‚Äì350.
[48] VidyaSetlur,SarahEBattersby,MelanieTory,RichGossweiler,andAngelXChang.2016.Eviza:Anaturallanguageinterfaceforvisualanalysis.In
Proceedingsofthe29thannualsymposiumonuserinterfacesoftwareandtechnology.365‚Äì377.
[49] LeixianShen,EnyaShen,YuyuLuo,XiaocongYang,XumingHu,XiongshuaiZhang,ZhiweiTai,andJianminWang.2022.Towardsnaturallanguage
interfacesfordatavisualization:Asurvey.IEEEtransactionsonvisualizationandcomputergraphics(2022).
[50] TariqueSiddiqui,PaulLuh,ZeshengWang,KarrieKarahalios,andAdityaParameswaran.2020.Shapesearch:Aflexibleandefficientsystemfor
shape-basedexplorationoftrendlines.InProceedingsofthe2020ACMSIGMODInternationalConferenceonManagementofData.51‚Äì65.
[51] ArjunSrinivasanandVidyaSetlur.2023.BOLT:ANaturalLanguageInterfaceforDashboardAuthoring.(2023).
[52] ArjunSrinivasanandJohnStasko.2017.Naturallanguageinterfacesfordataanalysiswithvisualization:Consideringwhathasandcouldbeasked.
InProceedingsoftheEurographics/IEEEVGTCconferenceonvisualization:Shortpapers.55‚Äì59.
[53] PriyanVaithilingamandPhilipJGuo.2019.Bespoke:InteractivelysynthesizingcustomGUIsfromcommand-lineapplicationsbydemonstration.In
Proceedingsofthe32ndannualACMsymposiumonuserinterfacesoftwareandtechnology.563‚Äì576.
[54] LeaVerou,AmyX.Zhang,andDavidR.Karger.2016.Mavo:CreatingInteractiveData-DrivenWebApplicationsbyAuthoringHTML.InProceedings
ofthe29thAnnualSymposiumonUserInterfaceSoftwareandTechnology(Tokyo,Japan)(UIST‚Äô16).AssociationforComputingMachinery,NewYork,
NY,USA,483‚Äì496. https://doi.org/10.1145/2984511.298455124 Vaithilingam,etal.
[55] YunWang,ZhitaoHou,LeixianShen,TongshuangWu,JiaqiWang,HeHuang,HaidongZhang,andDongmeiZhang.2022. Towardsnatural
language-basedvisualizationauthoring.IEEETransactionsonVisualizationandComputerGraphics29,1(2022),1222‚Äì1232.
[56] LelandWilkinson.2005.TheGrammarofGraphics,SecondEdition.Springer.
[57] KanitWongsuphasawat,ZeningQu,DominikMoritz,RileyChang,FelixOuk,AnushkaAnand,JockMackinlay,BillHowe,andJeffreyHeer.2017.
Voyager2:Augmentingvisualanalysiswithpartialviewspecifications.InProceedingsofthe2017chiconferenceonhumanfactorsincomputing
systems.2648‚Äì2659.
[58] TomYoung,DevamanyuHazarika,SoujanyaPoria,andErikCambria.2018.Recenttrendsindeeplearningbasednaturallanguageprocessing.ieee
ComputationalintelligenCemagazine13,3(2018),55‚Äì75.
[59] BowenYuandCl√°udioTSilva.2019.FlowSense:Anaturallanguageinterfaceforvisualdataexplorationwithinadataflowsystem.IEEEtransactions
onvisualizationandcomputergraphics26,1(2019),1‚Äì11.
[60] JDZamfirescu-Pereira,RichmondYWong,BjoernHartmann,andQianYang.2023.WhyJohnnycan‚Äôtprompt:hownon-AIexpertstry(andfail)to
designLLMprompts.InProceedingsofthe2023CHIConferenceonHumanFactorsinComputingSystems.1‚Äì21.
[61] EmanuelZgraggen,RobertZeleznik,andStevenMDrucker.2014. Panoramicdata:Dataanalysisthroughpen&touch. IEEEtransactionson
visualizationandcomputergraphics20,12(2014),2112‚Äì2121.
[62] DanZhang,YoshihikoSuhara,JinfengLi,MadelonHulsebos,√áaƒüatayDemiralp,andWang-ChiewTan.2019. Sato:Contextualsemantictype
detectionintables.arXivpreprintarXiv:1911.06311(2019).
[63] HaociZhang,VirajRaj,ThibaultSellam,andEugeneWu.2018.Precisioninterfacesfordifferentmodalities.InProceedingsofthe2018International
ConferenceonManagementofData.1777‚Äì1780.