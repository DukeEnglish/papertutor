CACA Agent: Capability Collaboration based AI Agent
PengXu HaoranWangâˆ—
StateKeyLabofNetworkingandSwitchingTechnology StateKeyLabofNetworkingandSwitchingTechnology
BeijingUniversityofPostsandTelecommunications BeijingUniversityofPostsandTelecommunications
Beijing,China Beijing,China
xupeng@bupt.edu.cn wanghr@bupt.edu.cn
ChuangWang XuLiu
StateKeyLabofNetworkingandSwitchingTechnology ChinaAcademyofIndustrialInternet
BeijingUniversityofPostsandTelecommunications Beijing,China
Beijing,China liuxu@china-aii.com
wangchuang0418@outlook.com
ABSTRACT oftenresultsinunrealisticoutputs,attributabletothehallucinatory
AsAIAgentsbasedonLargeLanguageModels(LLMs)haveshown tendenciesoflargemodels.
potential in practical applications across various fields, how to AIAgentsalsoneedtointeractwiththeexternalenvironment
quicklydeployanAIagentandhowtoconvenientlyexpandthe throughvarioustools.LLMshaveshowngreatpotentialintoolus-
applicationscenarioofAIagentshasbecomeachallenge.Previous agecapabilities[3][4][5][6][7].AIAgentscangreatlyexpandtheir
studiesmainlyfocusedonimplementingallthereasoningcapa- applicationscenariosbycallingopenAPIsofotherapplications,
bilitiesofAIagentswithinasingleLLM,whichoftenmakesthe suchasusingweatherAPIstoobtainreal-timeweatherdataand
modelmorecomplexandalsoreducestheextensibilityofAIagent usingwebsearchAPIstoaccessinternetinformation,providing
functionality.Inthispaper,weproposeCACAAgent(Capability userswithmorepersonalizedandcomprehensiveservices.How-
CollaborationbasedAIAgent),usinganopenarchitectureinspired ever,enablingAIAgentstoquicklymastertheuseofnewtoolsis
byservicecomputing.CACAAgentintegratesasetofcollaborative challenging,oftenrequiringasignificantamountofnewtraining
capabilitiestoimplementAIAgents,notonlyreducingthedepen- dataandmodeltrainingtoachievegoodresults.
denceonasingleLLM,butalsoenhancingtheextensibilityofboth Tomitigatethesechallenges,wehavedevelopedasystemknown
theplanningabilitiesandthetoolsavailabletoAIagents.Utilizing astheCapabilityCollaborativeAIAgentSystem(CACAAgent).
theproposedsystem,wepresentademotoillustratetheoperation Inthissystem,aseriesofcapabilitiesworktogethertoprovide
andtheapplicationscenarioextensionofCACAAgent. AIAgentfunctionalitiestousers.Firstly,weintroducedPlanning
CapabilityandMethodologyCapability.PlanningCapabilityoffers
CCSCONCEPTS planningabilitiesbasedonLLMs,whileMethodologyCapability
focusesonprovidingPlanningCapabilitywithfactualinformation
â€¢Informationsystemsâ†’Decisionsupportsystems;Webservices.
relatedtoplanningandtheabilitytointeractwithexperts.Sec-
ondly,wehavedrawnontheservicecomputingarchitectureby
KEYWORDS
introducingToolsCapability,ToolBroker,andToolServiceintothe
AIAgent,LLM,servicecomputing,extensibility "Registration-Discovery-Invocation"framework,thussupporting
dynamicallyexpandtoolsofAIAgents.SourcecodesofCACA
1 INTRODUCTION Agentcanbefoundhere.1
Inrecentyears,LargeLanguageModels(LLMs)havedemonstrated
2 RELATEDWORKS
remarkablelearningandreasoningcapabilities,achievingsignifi-
cantaccomplishments.Consequently,researchershaveimplemented Planningcapabilityreferstotheabilitytodecomposecomplextasks
decision-makingfunctionsinAIAgentsbasedonthesemodels.By intosimplersubtasks.Somestudies,suchasChainofThought[8],
enhancingmemoryandtoolfunctionalities,AIAgentsarenowca- utilizethereasoningabilitiesofLLMs,inspiringthemodelstoplan
pableofrepresentinghumanstocompletevarioustasks.AIAgents andactthroughpromptingwords.However,thisapproachcan
basedonLLMshaveshownpotentialinpracticalapplicationsacross result in â€™hallucinations,â€™ where the generated content conflicts
variousfields. withfactualinformation.Methodstosolvethisprobleminclude
The planning abilities of AI Agents are key factors affecting enablingmodelstoadjustplansbasedonexternalenvironments
thequalityoftaskhandling.Insomestudies,AIAgentsefficiently (asinReAct[10])orhumanfeedback(suchasInnerMonologue[1]).
handlecomplextasksbysettingsub-goalsandusingdecomposition Nevertheless,feedback-basedplanningstrategiesareprimarilysuit-
strategies[8].Theyarecapableofself-reflectiononpastinteractions ableforsimpletasks.Forcomplextasks,largemodelsoftenneed
withtheenvironment,improvingthequalityoffuturedecisionsand torefertoexpertstofindsolutions.
actions[1][10].However,asignificantdrawbackofthisapproachis Toaddresstheseproblems,wedesignedmethodologycapability
itsfailuretoequipAIAgentswithapriorifactualinformation.This toenhanceplanningcapability.MethodologyCapabilityenables
âˆ—Correspondingauthor. 1https://github.com/free4inno/CACA-Agent
4202
raM
22
]IA.sc[
1v73151.3042:viXratherapidexpansionoftheknowledgebaseconcerningplanning
processesandprovidesinterfacesforexpertfeedback,facilitating
theconvenientintroductionofnewprocessknowledge.
Theabilitytoutilizetoolsiscrucialforthefunctionalexpansion
oflargemodelsandtheireffectiveinteractionwiththerealworld.
StudieshavedemonstratedthatLLMsarecapableofautonomously
learningtoolusagethroughAPIs(suchasToolFormer[5]),select
toolsfromAPIdocumentation(asexemplifiedbyGorilla[3]),or
controlactualapplicationsbyconnectingtoRESTfulAPIs(like
RestGPT[6]).ToolLLM[4]providesacomprehensivetoolutilization
frameworkthatincludesdataconstruction,modeltraining,and
evaluation.However,thesemethodshavelimitations,suchasa
finitedefinitionoftools,datasetsprimarilytargetedatmachine
learningAPIs,theneedfordatacleaningandannotationtoexpand
tools,andaninabilitytomeetmorecomplexanddiverseneeds.
Toaddresstheseissues,wedrewinspirationfromtheconcept
ofservicecomputinganddesignedatoolcapabilityframework
basedonthe"Registration-Discovery-Invocation"Mechanism.This
frameworkfacilitatesrapidexpansionoftoolservicesandleverages Figure1:SystemDesignDiagram
theinferentialcapabilitiesofLLMsfortoolselection.Thisapproach
notonly enhancesthe systemâ€™sflexibilitybut alsosignificantly
simplifiestheintegrationandadditionoftools,makingtheprocess WorkflowCapabilityismainlyusedtomanageworkflowin-
moreefficientandconvenient. stancesforeachuserrequest.IntheCACAAgent,Workflowin-
stancesusethesametemplate.TheyfirstinteractwithPlanning
Capabilitytoobtainspecificprocessingprocedures,thenconsult
3 SYSTEMARCHITECTURE
ToolCapabilityforrelevanttoolinformationaccordingtotheneeds
3.1 OverallSystemDesign ofeachoperationintheprocess,andfinallycompleteinterfacecalls
basedonthisinformation,eventuallyrespondingtotheuserswith
ThecoreconceptoftheCACAAgentsystemdesigncentersaround
therelevantprocessingresults.
acollaborativesetofcapabilitiesaimedatimplementingAIAgents.
[Planning]PlanningCapabilityandMethodologyCapability
TheCACAAgentsystemboastsseveraladvantages:
worktogethertoprovidethefunctionsofPlanningintheAIAgent.
PlanningCapabilityisprimarilyrealizedthroughLLMs,oper-
(1) ThefunctionalityofanAIAgentisaccomplishedthrough
atingbyprovidingaprocessflowforhandlingrequestsbasedon
thecollaborationofaseriesofcomponents,eachpossessing
userqueries.ThePlanningCapabilityreliesonLLMstoimplement
different capabilities. These components can be indepen-
thenecessaryreasoningabilitiesforplanning.Toensurethatthe
dentlydesigned,implemented,deployed,andupgraded,and
PlanningCapabilitycandelivermoreaccurateprocessingflows,
canbeprovidedbydifferentvendors.
andalsotofacilitatetheconvenientexpansionoftheAIAgentâ€™s
(2) TheMethodologyCapabilityenhancesthesystembyen-
applicationcapabilities,itintegratesdomainknowledgeobtained
ablingrapidexpansionoftheprocessknowledgebase,thereby
fromtheMethodologyCapability.Thisintegrationinvolvesbreak-
improvingplanningqualitywithclearerprocessinsightsand
ingdowncomplextasksintoaseriesofpractical,feasiblesub-steps,
facilitatingtheexpansionofplanningcapabilities.
and then transmitting this task planning back to the Workflow
(3) Inspiredbyservicecomputing,atoolcapabilityframework
Capability.TheworkflowprocessofthePlanningCapabilitycan
basedonthe"Registration-Discovery-Invocation"Mecha-
bedescribedbythefollowingformula:
nismisdesignedtoprovideflexibilityandextensibilityof
tools.
ğ‘ƒğ‘™ğ‘ğ‘›ğ¶ğ‘ğ‘(ğ‘‡ğ‘ğ‘ ğ‘˜,ğ‘€ğ‘’ğ‘¡â„ğ‘œğ‘‘ğ‘œğ‘™ğ‘œğ‘”ğ‘¦)â†’ [ğ‘ƒğ‘Ÿğ‘œğ‘(ğ‘†ğ‘‡ 1),...,ğ‘ƒğ‘Ÿğ‘œğ‘(ğ‘†ğ‘‡ ğ‘›)] (1)
OursystemdesignisillustratedinFigure1.Asetofcollaborative
capabilitiesisintroducedtoimplementAIAgents[9]. Toaccommodatevariousconditions,choices,andrepetitiveexe-
[Action] Workflow Capability and Reception Capability are cutionneeds,ğ‘ƒğ‘Ÿğ‘œğ‘(ğ‘†ğ‘‡ ğ‘–)isfurtherbrokendowninto:
introducedtofulfillthefunctionsofActionintheAIAgent.
ReceptionCapabilityprimarilyprovidesauserinterface,re- ğ‘ƒğ‘Ÿğ‘œğ‘(ğ‘†ğ‘‡ ğ‘–):(ğ¸ğ‘¥ğ‘’ğ‘ğ‘¢ğ‘¡ğ‘’(ğ‘†ğ‘‡ ğ‘–),ğµğ‘Ÿğ‘ğ‘›ğ‘â„(ğ‘†ğ‘‡ ğ‘–),ğ¿ğ‘œğ‘œğ‘(ğ‘†ğ‘‡ ğ‘–)) (2)
ceivesuserrequests,andrespondsaccordingly.Importantly,Recep-
tionCapabilitydoesnotdirectlyhandlethedetailsofuserrequests Here,eachcomponenthasaspecificfunction.ğ¸ğ‘¥ğ‘’ğ‘ğ‘¢ğ‘¡ğ‘’(ğ‘†ğ‘‡ ğ‘–)is
butconvertsthemintostructuredtaskdescriptionsuponreceipt, responsible for directly executing each sub-task, ensuring each
thenpassesthetasktoWorkflowCapabilitytocreateaworkflow decomposedtaskunitisimplemented.ğµğ‘Ÿğ‘ğ‘›ğ‘â„(ğ‘†ğ‘‡ ğ‘–)representsap-
instance.OnceWorkflowCapabilitycompletestherelevantpro- plyingbranchinglogic,choosingdifferentexecutionpathsbasedon
cessingsteps,ReceptionCapabilityfeedsbacktheresultsofthetask differentsituations.ğ¿ğ‘œğ‘œğ‘(ğ‘†ğ‘‡ ğ‘–)allowsfortherepetitionofcertain
totheuser,realizinganeffectiveuserrequestprocessingworkflow. sub-tasksunderspecificconditions,providingaloopingmechanismforscenariosrequiringrepeatedexecutionofthesameoperation, ensuringthevalidityoftheservicesitrepresentsthroughmecha-
suchasbatchprocessingoriterativeoptimization. nismslikeheartbeats.Itisnoteworthythattoolregistrationbythe
MethodologyCapabilitymaintainsknowledgeaboutprocess- ToolBrokeristypicallymanuallyinitiatedbythetoolproviders.
ingproceduresforavarietyofapplicationrequestsacrossdifferent Afterdeployingandconfiguringtherelevanttools,providersfillin
scenarios.Simultaneously,itprovidesauserinterfacetoexperts,al- thetoolinformationthroughtheinterfaceprovidedbyToolBroker
lowingthemtoinputknowledgeregardingprocessingprocedures andinitiateatoolregistrationrequest.
for specific scenarios. We propose a data structure designed to
enableexpertstoprovideandupdatetheirprofessionalknowledge. 3.2 KeyWorkflows
Thisdatastructurecomprisesseveralkeycomponents:(1)De-
scriptionprovidesdetailedbackgroundoftheapplicationscenario.
(2)ProcessStepsisanorderedlistoutliningeachstepwithtitle,
description,andrequireddata.(3)DecisionPointsspecificallyiden-
tifieskeydecisionpointsintheprocessalongwiththeirdecision
logic.(4)Rulessectionallowsexpertstoinputspecificconditions
thatinfluencetheprocesspath.(5)Exceptionsectiondescribes
methodsforaddressingpotentialexceptionsintheprocess.(6)Sug-
gestionsprovidesaspaceforexpertstoofferprocessoptimization
suggestions.(7)Referenceenablesuploadingrelevantdocuments
foramorecomprehensiveexplanationoftheprocess.
[Memory]ProfileCapabilityprovidesthelong-termmemory
forusers.MethodologyCapabilitypossessestheknowledgeofpro-
cessesandToolCapabilitysavesthefunctionsofvariousregistered
tools.Astotheshort-termmemoryabouttheprocessingofeach
userrequest,itismaintainedbyWorkflowCapability.
ProfileCapabilityintheCACAAgentsystemistaskedwith
managingtheconfigurationinformationthesystemrelieson.Its
Figure2:UserRequestProcessing
mainresponsibilityistomaintainessentialinformation,suchasthe
basicconfigurationofthesystemandaccountsrequiredforopera-
TheuserrequestprocessingflowisillustratedinFigure2.After
tions.Distinguishingbetweenlong-termandshort-termmemory,
ausersubmitsarequest,itisinitiallyprocessedbytheReception
theProfileCapabilityprimarilyofferslong-termmemory.Within
Capability,andthenhandedofftotheWorkflowCapability.The
theCACAAgentsystem,short-termmemoryispredominantly
WorkflowCapabilitysubsequentlyqueriesfactualdatafromthe
managedbytheWorkflowCapabilitywithintheworkflowinstances
ProfileCapability,createsanewworkflowinstance,andconsults
foreachuserrequest.
thePlanningCapabilityfortaskexecutionplanning.ThePlanning
[Tool]TheToolsfunctionisfacilitatedthroughthecollabora-
Capability,byintegratingdomainknowledge,dividesthetaskinto
tiveeffortsoftheToolCapability,ToolBroker,andToolService.
sub-stepsandprovidesfeedbacktotheWorkflowCapability.
DrawinginspirationfromServiceComputing,theCACAAgent
Basedonthetaskplanning,theWorkflowCapabilityinitiates
systememploysa"Registration-Discovery-Invocation"framework.
anasynchronouslyexecutedworkflow.Duringtheprocessingof
ToolCapabilityactsasbothatoolregistryanddiscoverycenter.
sub-steps,itqueriestheToolCapabilityforthemostappropriate
IthandlestoolregistrationrequestsfromtheToolBroker,ensuring
toolsandparameters,generatestoolinvocationparameters,and
theupkeepandmanagementofinformationrelatedtovarioustools.
thencallsthetoolservicetocompletethesub-steps.Uponcomple-
Additionally,itmanagestooldiscoveryrequestsfromWorkflow
tionoftheworkflowprocess,theWorkflowCapabilityreportsthe
Capability,providingrelevanttoolinformationbasedonspecific
executionresultstotheReceptionCapability.Finally,theReception
operationalneeds.ToolCapabilityutilizesthereasoningabilities
Capabilityconveystheprocessedresultsbacktotheuser.
ofLLMstoanalyzetaskdescriptionsandinformationonregistered
tools,selectingthemostappropriatetoolandreturninginforma- 4 DEMO
tionsuchastherelevantinvocationparameters.Thisprocessis
4.1 UseCase
encapsulatedinthefollowingformula:
We illustrate the workflow of the CACA Agent through a task
requirementforrecommendingadestinationforafamilyâ€™sshort-
{ğ‘‡ selected,ğ‘‡ param[input]}=DiscoverTool(ğ‘ˆ req,{ğ‘‡ registered}) (3)
distancetravel.ThedemonstrationprocessisdepictedinFigure
whereğ‘‡ ğ‘ ğ‘’ğ‘™ğ‘’ğ‘ğ‘¡ğ‘’ğ‘‘ representstheselectedtool,ğ‘‡ ğ‘ğ‘ğ‘Ÿğ‘ğ‘š denotesthe 3.Thedemonstrationisdividedintothreescenarios:Scenario1
parametersneededtoinvokethetool,ğ‘ˆ ğ‘Ÿğ‘’ğ‘ istheuserâ€™srequest, showcasestheworkflowoftheCACAAgent,highlightingtheinter-
andğ‘‡ ğ‘Ÿğ‘’ğ‘”ğ‘–ğ‘ ğ‘¡ğ‘’ğ‘Ÿğ‘’ğ‘‘ signifiestheregisteredtools. actionsbetweentheplanningcapabilityandtheLLM,aswellasthe
ToolServicespecificallyprovidesrelevantprocessingcapabili- interactionsbetweenthetoolcapabilityandtheLLM.InScenario
ties,primarilythroughserviceAPIs. 2,wedemonstratehowtheplanningabilitycanbeextendedto
ToolBrokeractsasanintermediaryforoneormoreToolSer- considerweatherconditionswhenrecommendingadestination.
vices,facilitatingtheirregistrationwithToolCapability,andalso Scenario3showcasestheextensibilityofthetool.isfacilitatedthroughtheexpertinteractionpageprovidedbythe
MethodologyCapability(Figure3(2)).
4.4 Scenario3:ExtensibilityofTools
However,thisnewsubtasklacksacorrespondingtoolservice.When
theToolCapabilityreceivesarequestforthisnewstepandcan-
notfindasuitabletool,theWorkflowCapabilityinformstheTool
Providertoregisteranewtool.AftertheToolProviderregistersa
weatherqueryingservicewiththeToolBroker(Figure3(3)),the
userre-submitsthesamequery.Consequently,whentheworkflow
reachesthefourthstep,theToolCapabilitycannowmatchand
returninformationaboutthenewlyaddedtoolservice.
5 CONCLUSION
WeproposetheCACAAgent(CapabilityCollaborationbasedAI
Agent),whichintroducesasetofcapabilitiesworkingcollabora-
tivelytoimplementAIAgents.Drawinginspirationfromservice
computing,theCACAAgentadoptsanopenarchitecture,effec-
tivelyenhancingtheextensibilityofbothplanningabilitiesand
toolsforAIagents.Usingtheproposedsystem,wepresentademon-
strationtoillustratetheoperationalmechanismandapplication
scenarioextensionmechanismoftheCACAAgent.
BecauseLLMsinourdesignareutilizedfordomain-specificrea-
soning,thescaleofthemodelcouldbeeffectivelyreducedwhile
Figure3:WorkflowofCACAAgent maintaininghighinferencequality[2].Wearecurrentlytransition-
ingtheLLMthatthePlanningandToolCapabilitiesrelyonfrom
LLMservices(GPT-3.5Turbo)toanLLMthatcanbedeployedin
aCPUenvironment.Thistransitionaimstofurtherincreasethe
4.2 Scenario1:WorkflowofCACAAgent
practicalityandflexibilityofAIAgents.
OnthewebpageprovidedbytheReceptionCapability,auserasks
REFERENCES
theCACAAgent:"Iwanttogotoanearbycitywithmyfamilythis
vacation,canyouhelpmefindsomesuitablecities?"TheReception [1] WenlongHuang,FeiXia,TedXiao,HarrisChan,JackyLiang,PeteFlorence,
AndyZeng,JonathanTompson,IgorMordatch,YevgenChebotar,etal.2022.
CapabilityforwardstherequesttotheWorkflowCapabilityfor
Innermonologue:Embodiedreasoningthroughplanningwithlanguagemodels.
processing (Figure3 (1a)). Uponreceiving the userâ€™squery, the arXivpreprintarXiv:2207.05608(2022).
WorkflowCapabilityconsultsthePlanningCapabilitytodevisea [2] LingLuo,JinzhongNing,YingwenZhao,ZhijunWang,ZeyuanDing,PengChen,
WeiruFu,QinyuHan,GuangtaoXu,YunzhiQiu,etal.2023.Taiyi:Abilingual
plantoaddresstherequest(Figure3(1b)).ThePlanningCapability
fine-tunedlargelanguagemodelfordiversebiomedicaltasks. arXivpreprint
thenconsultstheMethodologyCapabilityformethodstosolvethe arXiv:2311.11608(2023).
issue(Figure3(1c)).Onceamethodisidentified,itisreturnedto [3] ShishirGPatil,TianjunZhang,XinWang,andJosephEGonzalez.2023. Go-
rilla: Large language model connected with massive apis. arXiv preprint
thePlanningCapability,which,usingthisinformation,generatesa arXiv:2305.15334(2023).
structuredworkflowdescriptionwiththeassistanceofanLLM. [4] YujiaQin,ShihaoLiang,YiningYe,KunlunZhu,LanYan,YaxiLu,YankaiLin,Xin
Cong,XiangruTang,BillQian,etal.2023.Toolllm:Facilitatinglargelanguage
Forthefirstsubtaskintheworkflow,theWorkflowCapability
modelstomaster16000+real-worldapis.arXivpreprintarXiv:2307.16789(2023).
queriestheProfileCapabilityfortheuserâ€™shomeaddressinforma- [5] TimoSchick,JaneDwivedi-Yu,RobertoDessÃ¬,RobertaRaileanu,MariaLomeli,
tion(Figure3(1d)).Forthesecondandthirdsubtasks,theWorkflow LukeZettlemoyer,NicolaCancedda,andThomasScialom.2023.Toolformer:Lan-
guagemodelscanteachthemselvestousetools.arXivpreprintarXiv:2302.04761
CapabilitysequentiallyqueriestheToolCapabilityforavailable
(2023).
toolservices(Figure3(1e)).Atthispoint,severaltoolsregisteredin [6] YifanSong,WeiminXiong,DaweiZhu,ChengLi,KeWang,YeTian,andSujianLi.
theToolBrokermeetthesubtaskrequirements.TheToolCapability 2023.RestGPT:ConnectingLargeLanguageModelswithReal-WorldApplications
viaRESTfulAPIs.arXivpreprintarXiv:2306.06624(2023).
thensendsinformationaboutthesetoolservicestotheWorkflow [7] LeiWang,ChenMa,XueyangFeng,ZeyuZhang,HaoYang,JingsenZhang,
Capability.Havingreceivedthisinformation,theWorkflowCapa- ZhiyuanChen,JiakaiTang,XuChen,YankaiLin,etal.2023.Asurveyonlarge
languagemodelbasedautonomousagents.arXivpreprintarXiv:2308.11432(2023).
bilitysequentiallyinvokesthesetwotoolservices,thuscompleting
[8] JasonWei,XuezhiWang,DaleSchuurmans,MaartenBosma,EdChi,QuocLe,
theentireworkflowprocess(Figure3(1f)). andDennyZhou.2022.ChainofThoughtPromptingElicitsReasoninginLarge
LanguageModels.(2022).
[9] LilianWeng.2023.LLM-poweredAutonomousAgents.lilianweng.github.io(Jun
4.3 Scenario2:ExtensibilityofPlanningAbility 2023). https://lilianweng.github.io/posts/2023-06-23-agent/
[10] ShunyuYao,JeffreyZhao,DianYu,NanDu,IzhakShafran,KarthikNarasimhan,
Itisimportanttonotethatthemethodprocessdescribedabovedoes andYuanCao.2022.React:Synergizingreasoningandactinginlanguagemodels.
notconsiderweatherconditionsduringthetrip.Tocomprehen- arXivpreprintarXiv:2210.03629(2022).
sivelyaddresstheuserâ€™sneeds,weaddasubtasknamed"Excluding
citieswithadverseweatherduringthetravelperiod."Thisaddition